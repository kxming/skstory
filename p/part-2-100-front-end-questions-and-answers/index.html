<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Why is the data property a function instead of an object, and what is the specific reason? Whether it‚Äôs a function or not depends on the scenario. Also, there‚Äôs no need to worry about when to write data as a function or object, because vue has internally handled it and output error information in the console.\nScenario One: new Vue({data: ...})\nThis scenario is mainly for project entry or when each html page instantiates a Vue, the data here can be in the form of an object or a factory function returning an object. Because the data here only appears once, and there is no problem of data pollution caused by repeated references.\n"><title>Part 2: 100 Front-end Questions and Answers</title>
<link rel=canonical href=https://www.skstory.online/p/part-2-100-front-end-questions-and-answers/><link rel=stylesheet href=/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css><meta property='og:title' content="Part 2: 100 Front-end Questions and Answers"><meta property='og:description' content="Why is the data property a function instead of an object, and what is the specific reason? Whether it‚Äôs a function or not depends on the scenario. Also, there‚Äôs no need to worry about when to write data as a function or object, because vue has internally handled it and output error information in the console.\nScenario One: new Vue({data: ...})\nThis scenario is mainly for project entry or when each html page instantiates a Vue, the data here can be in the form of an object or a factory function returning an object. Because the data here only appears once, and there is no problem of data pollution caused by repeated references.\n"><meta property='og:url' content='https://www.skstory.online/p/part-2-100-front-end-questions-and-answers/'><meta property='og:site_name' content='SK Story'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='Javascript'><meta property='article:tag' content='Vue'><meta property='article:published_time' content='2024-02-08T16:22:38+08:00'><meta property='article:modified_time' content='2024-02-08T16:22:38+08:00'><meta property='og:image' content='https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ge1I6ow4qwBbwv5A'><meta name=twitter:site content="@https://twitter.com/ShawnKxming"><meta name=twitter:creator content="@https://twitter.com/ShawnKxming"><meta name=twitter:title content="Part 2: 100 Front-end Questions and Answers"><meta name=twitter:description content="Why is the data property a function instead of an object, and what is the specific reason? Whether it‚Äôs a function or not depends on the scenario. Also, there‚Äôs no need to worry about when to write data as a function or object, because vue has internally handled it and output error information in the console.\nScenario One: new Vue({data: ...})\nThis scenario is mainly for project entry or when each html page instantiates a Vue, the data here can be in the form of an object or a factory function returning an object. Because the data here only appears once, and there is no problem of data pollution caused by repeated references.\n"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ge1I6ow4qwBbwv5A'><link rel="shortcut icon" href=/favicon.ico></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu1157332405703967761.jpeg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>üç•</span></figure><div class=site-meta><h1 class=site-name><a href=/>SK Story</a></h1><h2 class=site-description>Shawn King's Stories Website</h2></div></header><ol class=menu-social><li><a href=mailto:kxming0229@gmail.com target=_blank title=Email rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-mail"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7a2 2 0 012-2h14a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V7z"/><path d="M3 7l9 6 9-6"/></svg></a></li><li><a href=https://www.facebook.com/p/King-Shawn-100092679065959/ target=_blank title=Facebook rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-facebook"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 10v4h3v7h4v-7h3l1-4h-4V8a1 1 0 011-1h3V3h-3a5 5 0 00-5 5v2H7"/></svg></a></li><li><a href=https://twitter.com/ShawnKxming target=_blank title=Twitter rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4l11.733 16H20L8.267 4z"/><path d="M4 20l6.768-6.768m2.46-2.46L20 4"/></svg></a></li><li><a href=https://t.me/shawnkxming target=_blank title=Telegram rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-telegram"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 10l-4 4 6 6 4-16-18 7 4 2 2 6 3-4"/></svg></a></li><li><a href=https://medium.com/@kxming target=_blank title=Medium rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-medium"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4m0 2a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2z"/><path d="M8 9h1l3 3 3-3h1"/><path d="M8 15h2"/><path d="M14 15h2"/><path d="M9 9v6"/><path d="M15 9v6"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#why-is-the-data-property-a-function-instead-of-an-object-and-what-is-the-specific-reason>Why is the data property a function instead of an object, and what is the specific reason?</a></li><li><a href=#do-you-know-about-the-initialization-process-of-vue2-what-has-it-done>Do you know about the initialization process of Vue2, what has it done?</a></li><li><a href=#a-rough-process-of-vue3-initialization>A rough process of Vue3 initialization</a></li><li><a href=#how-to-write-vue3-responsive-api>How to write Vue3 responsive API</a></li><li><a href=#how-do-you-do-ssr-rendering-in-vue-projects>How do you do SSR rendering in Vue projects</a></li><li><a href=#how-do-you-view-vues-diff-algorithm>How do you view Vue‚Äôs diff algorithm</a></li><li><a href=#what-do-you-need-to-do-to-build-a-vue-project-from-scratch>What do you need to do to build a Vue project from scratch</a></li><li><a href=#what-are-the-data-types-in-js-and-how-are-the-values-stored>What are the data types in js and how are the values stored</a></li><li><a href=#in-js-objectprototypetostringcall-is-used-to-determine-the-data-type>In JS, Object.prototype.toString.call() is used to determine the data type</a></li><li><a href=#whats-the-difference-between-null-and-undefined>What‚Äôs the difference between null and undefined?</a></li><li><a href=#what-are-the-results-of-valueof-and-tostring-for--and->What are the results of valueOf and toString for {} and []?</a></li><li><a href=#the-scope-and-scope-chain-of-javascript>The Scope and Scope Chain of Javascript</a></li><li><a href=#please-discuss-your-understanding-of-this-call-apply-and-bind>Please discuss your understanding of this, call, apply, and bind</a></li><li><a href=#what-is-javascript-prototype-and-prototype-chain-what-are-its-features>What is JavaScript Prototype and Prototype Chain? What are its features?</a></li><li><a href=#what-is-a-closure-and-why-should-we-use-it>What is a closure, and why should we use it?</a></li><li><a href=#what-are-the-three-event-models>What are the three event models?</a></li><li><a href=#javascript-arrays-and-strings-have-a-variety-of-native-methods>JavaScript arrays and strings have a variety of native methods</a></li><li><a href=#what-are-the-ways-to-load-javascript-lazily>What are the ways to load JavaScript lazily?</a></li><li><a href=#there-are-four-mature-module-loading-schemes-in-javascript-now>There are four mature module loading schemes in JavaScript now</a></li><li><a href=#the-difference-between-amd-and-cmd-specifications>The difference between AMD and CMD specifications?</a></li><li><a href=#ifferences-between-es6-modules-and-commonjs-modules-amd-and-cmd>ifferences between ES6 modules and CommonJS modules, AMD, and CMD.</a></li><li><a href=#js-operation-mechanism>JS operation mechanism</a></li><li><a href=#a-brief-introduction-to-the-garbage-collection-mechanism-of-the-v8-engine>A brief introduction to the garbage collection mechanism of the V8 engine</a></li><li><a href=#what-actions-can-cause-a-memory-leak>What actions can cause a memory leak?</a></li><li><a href=#what-are-the-new-features-in-es6>What are the new features in ES6?</a></li><li><a href=#what-is-an-arrow-function>What is an Arrow Function?</a></li><li><a href=#what-is-a-higher-order-function>What is a Higher Order Function?</a></li><li><a href=#handwritten-call-apply-and-bind-functions>Handwritten call, apply, and bind functions</a><ol><li><a href=#implementing-the-call-function>Implementing the call Function</a></li><li><a href=#implementing-the-apply-function>Implementing the apply Function</a></li><li><a href=#implementing-the-bind-function>Implementing the bind Function</a></li></ol></li><li><a href=#implementation-of-function-currying>Implementation of Function Currying</a></li><li><a href=#implement-a-new-operator>Implement a new operator</a></li><li><a href=#can-you-talk-about-promise-and-can-you-implement-it-by-handwriting>Can you talk about Promise, and can you implement it by handwriting?</a></li><li><a href=#what-is-asyncawait-and-how-does-it-work-can-async-be-handwritten>What is async/await and how does it work, can async be handwritten?</a></li><li><a href=#what-are-the-advantages-and-disadvantages-of-instanceof-and-how-is-it-implemented>What are the advantages and disadvantages of instanceof, and how is it implemented?</a></li><li><a href=#throttling-and-debounce-in-javascript>Throttling and Debounce in JavaScript</a><ol><li><a href=#debounce>Debounce</a></li><li><a href=#throttle>Throttle</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/part-2-100-front-end-questions-and-answers/><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ge1I6ow4qwBbwv5A loading=lazy alt="Featured image of post Part 2: 100 Front-end Questions and Answers"></a></div><div class=article-details><header class=article-category><a href=/categories/javascript/ style=background-color:#d1d419;color:#fff>Javascript
</a><a href=/categories/vue/ style=background-color:#28a243;color:#fff>Vue</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/part-2-100-front-end-questions-and-answers/>Part 2: 100 Front-end Questions and Answers</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Feb 08, 2024</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>42 minute read</time></div></footer></div></header><section class=article-content><h2 id=why-is-the-data-property-a-function-instead-of-an-object-and-what-is-the-specific-reason>Why is the data property a function instead of an object, and what is the specific reason?</h2><p>Whether it‚Äôs a function or not depends on the scenario. Also, there‚Äôs no need to worry about when to write data as a function or object, because vue has internally handled it and output error information in the console.</p><p><strong>Scenario One</strong>: <code>new Vue({data: ...})</code></p><p>This scenario is mainly for project entry or when each html page instantiates a Vue, the data here can be in the form of an object or a factory function returning an object. Because the data here only appears once, and there is no problem of data pollution caused by repeated references.</p><p><strong>Scenario Two</strong>: Component scenario options</p><p>In the process of generating component vnode, the component will execute the merge strategy during the process of generating the constructor:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// Data merge strategy
</span></span><span class=line><span class=cl>strats.data = function (
</span></span><span class=line><span class=cl>  parentVal,
</span></span><span class=line><span class=cl>  childVal,
</span></span><span class=line><span class=cl>  vm
</span></span><span class=line><span class=cl>) {
</span></span><span class=line><span class=cl>  if (!vm) {
</span></span><span class=line><span class=cl>    if (childVal &amp;&amp; typeof childVal !== &#39;function&#39;) {
</span></span><span class=line><span class=cl>      process.env.NODE_ENV !== &#39;production&#39; &amp;&amp; warn(
</span></span><span class=line><span class=cl>        &#39;The &#34;data&#34; option should be a function &#39; +
</span></span><span class=line><span class=cl>        &#39;that returns a per-instance value in component &#39; +
</span></span><span class=line><span class=cl>        &#39;definitions.&#39;,
</span></span><span class=line><span class=cl>        vm
</span></span><span class=line><span class=cl>      );
</span></span><span class=line><span class=cl>‚Äã
</span></span><span class=line><span class=cl>      return parentVal
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>    return mergeDataOrFn(parentVal, childVal)
</span></span><span class=line><span class=cl>  }
</span></span><span class=line><span class=cl>‚Äã
</span></span><span class=line><span class=cl>  return mergeDataOrFn(parentVal, childVal, vm)
</span></span><span class=line><span class=cl>};
</span></span></code></pre></td></tr></table></div></div><p>If the merging process finds that the data of a subcomponent is not a function, i.e., <code>typeof childVal !== 'function'</code> is true, it will output a warning in the console in the development environment and directly return <code>parentVal</code>. This suggests that no <code>data</code> information from childVal has been merged into <code>options</code>.</p><p>‚ÄãWe have mentioned before that the data in the component must be a function. Have you ever wondered why?</p><p>When we define a component, vue will eventually form a component instance through Vue.extend().</p><p>Here we imitate the component constructor, defining the data property in the form of an object.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>function Component(){
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>Component.prototype.data = {
</span></span><span class=line><span class=cl>  count : 0
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div><p>Create two component instances.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>const</span> <span class=n>componentA</span> <span class=o>=</span> <span class=n>new</span> <span class=n>Component</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>componentB</span> <span class=o>=</span> <span class=n>new</span> <span class=n>Component</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><p>Modify the value of the data property of the componentA, the value in the componentB also changes.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>console.log(componentB.data.count) // 0
</span></span><span class=line><span class=cl>componentA.data.count = 1
</span></span><span class=line><span class=cl>console.log(componentB.data.count) // 1
</span></span></code></pre></td></tr></table></div></div><p>The reason for this is that the two share the same memory address. The content modified by componentA also affects componentB.</p><p>If we use the form of a function, this situation will not occur (the memory addresses of the objects returned by the function are not the same).</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>function Component(){
</span></span><span class=line><span class=cl>  this.data = this.data()
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>Component.prototype.data = function (){
</span></span><span class=line><span class=cl>    return {
</span></span><span class=line><span class=cl>      count : 0
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div><p>Modify the value of the data property of the componentA, the value in the componentB is not affected.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>console.log(componentB.data.count) // 0
</span></span><span class=line><span class=cl>componentA.data.count = 1
</span></span><span class=line><span class=cl>console.log(componentB.data.count) // 0
</span></span></code></pre></td></tr></table></div></div><p>vue components may have many instances, using the function to return a new data form, so that the data of each instance object will not be polluted by other instance objects data.</p><h2 id=do-you-know-about-the-initialization-process-of-vue2-what-has-it-done>Do you know about the initialization process of Vue2, what has it done?</h2><p>When new Vue goes into Vue‚Äôs constructor in the <code>src\core\instance\index.js</code> file.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>this._init(options)
</span></span></code></pre></td></tr></table></div></div><p>Then from the prototype method added by Mixin, initMixin(Vue), the one called is the _init prototype method added for Vue</p><p>Source code location: <code>src/core/instance/init.js</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>function</span> <span class=n>initMixin</span> <span class=p>(</span><span class=n>Vue</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>Vue</span><span class=o>.</span><span class=n>prototype</span><span class=o>.</span><span class=n>_init</span> <span class=o>=</span> <span class=n>function</span> <span class=p>(</span><span class=n>options</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>     <span class=k>var</span> <span class=n>vm</span> <span class=o>=</span> <span class=n>this</span><span class=p>;</span> <span class=o>//</span> <span class=n>create</span> <span class=n>vm</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>     <span class=o>...</span>
</span></span><span class=line><span class=cl>     <span class=o>//</span> <span class=n>Merge</span> <span class=n>options</span> <span class=n>into</span> <span class=n>vm</span><span class=o>.$</span><span class=n>options</span>
</span></span><span class=line><span class=cl>     <span class=n>vm</span><span class=o>.$</span><span class=n>options</span> <span class=o>=</span> <span class=n>mergeOptions</span><span class=p>(</span>
</span></span><span class=line><span class=cl>       <span class=n>resolveConstructorOptions</span><span class=p>(</span><span class=n>vm</span><span class=o>.</span><span class=n>constructor</span><span class=p>),</span> 
</span></span><span class=line><span class=cl>       <span class=n>options</span> <span class=o>||</span> <span class=p>{},</span>  
</span></span><span class=line><span class=cl>       <span class=n>vm</span> 
</span></span><span class=line><span class=cl>     <span class=p>);</span>
</span></span><span class=line><span class=cl> <span class=p>}</span>
</span></span><span class=line><span class=cl> <span class=o>...</span>
</span></span><span class=line><span class=cl> <span class=n>initLifecycle</span><span class=p>(</span><span class=n>vm</span><span class=p>);</span> <span class=o>//</span> <span class=n>Initialize</span> <span class=n>lifecycle</span>
</span></span><span class=line><span class=cl> <span class=n>initEvents</span><span class=p>(</span><span class=n>vm</span><span class=p>);</span> <span class=o>//</span> <span class=n>Initialize</span> <span class=n>events</span>
</span></span><span class=line><span class=cl> <span class=n>initRender</span><span class=p>(</span><span class=n>vm</span><span class=p>);</span> <span class=o>//</span> <span class=n>Initialize</span> <span class=n>render</span> <span class=n>function</span>
</span></span><span class=line><span class=cl> <span class=n>callHook</span><span class=p>(</span><span class=n>vm</span><span class=p>,</span> <span class=s1>&#39;beforeCreate&#39;</span><span class=p>);</span> <span class=o>//</span> <span class=n>Execute</span> <span class=n>beforeCreate</span> <span class=n>lifecycle</span> <span class=n>hook</span>
</span></span><span class=line><span class=cl> <span class=o>...</span>
</span></span><span class=line><span class=cl> <span class=n>initState</span><span class=p>(</span><span class=n>vm</span><span class=p>);</span> <span class=o>//</span> <span class=n>Initialize</span> <span class=n>data</span><span class=p>,</span> <span class=n>props</span><span class=p>,</span> <span class=n>methods</span> <span class=n>computed</span><span class=p>,</span> <span class=n>watch</span> 
</span></span><span class=line><span class=cl> <span class=o>...</span>
</span></span><span class=line><span class=cl> <span class=n>callHook</span><span class=p>(</span><span class=n>vm</span><span class=p>,</span> <span class=s1>&#39;created&#39;</span><span class=p>);</span> <span class=o>//</span> <span class=n>Execute</span> <span class=n>created</span> <span class=n>lifecycle</span> <span class=n>hook</span>
</span></span><span class=line><span class=cl>   
</span></span><span class=line><span class=cl> <span class=k>if</span> <span class=p>(</span><span class=n>vm</span><span class=o>.$</span><span class=n>options</span><span class=o>.</span><span class=n>el</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>vm</span><span class=o>.$</span><span class=n>mount</span><span class=p>(</span><span class=n>vm</span><span class=o>.$</span><span class=n>options</span><span class=o>.</span><span class=n>el</span><span class=p>);</span> <span class=o>//</span> <span class=n>This</span> <span class=n>is</span> <span class=n>also</span> <span class=n>the</span> <span class=n>key</span> <span class=n>point</span> <span class=n>that</span> <span class=n>will</span> <span class=n>be</span> <span class=n>used</span> <span class=n>later</span>
</span></span><span class=line><span class=cl> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>Summary</strong>:</p><p>Therefore, from the above functions, the things done by new vue unfold like a flow chart, which are:</p><ul><li><p>Merge configuration</p></li><li><p>Initialize lifecycle</p></li><li><p>Initialize events</p></li><li><p>Initialize rendering</p></li><li><p>Call the beforeCreate hook function</p></li><li><p>Init injections and reactivity (at this stage, properties are all injected and bound, and they are transformed into reactivity by $watch, but $el is not yet generated, that is, the DOM is not generated yet)</p></li><li><p>Initialize state state (initialize data, props, computed, watcher)</p></li><li><p>Call the created hook function.</p></li></ul><p>At the end of initialization, if the el attribute is detected, the vm.$mount method is called to mount vm. The target of the mount is to render the template into the final DOM.</p><h2 id=a-rough-process-of-vue3-initialization>A rough process of Vue3 initialization</h2><p>Initial rough process</p><p>createApp() => mount() => render() => patch() => processComponent() => mountComponent()</p><p>Simplified version of the process</p><ol><li><p>Vue.createApp() actually executes renderer‚Äôs createApp()</p></li><li><p>renderer is created by the createRenderer method</p></li><li><p>renderer‚Äôs createApp() is returned by createAppAPI()</p></li><li><p>After receiving render, createAppApi creates an app instance and defines the mount method</p></li><li><p>mount will call the render function. Convert vnode to real dom</p></li></ol><p>createRenderer() => renderer => renderer.createApp() &lt;= createAppApi()</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>&lt;</span><span class=n>div</span> <span class=n>id</span><span class=o>=</span><span class=s2>&#34;app&#34;</span><span class=o>&gt;&lt;/</span><span class=n>div</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=n>script</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=o>//</span> <span class=mf>3.</span><span class=n>createAppAPI</span>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=n>createAppAPI</span> <span class=o>=</span> <span class=n>render</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>function</span> <span class=n>createApp</span><span class=p>(</span><span class=n>rootComponent</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=o>//</span> <span class=k>return</span> <span class=n>application</span> <span class=n>instance</span>
</span></span><span class=line><span class=cl>            <span class=k>const</span> <span class=n>app</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>mount</span><span class=p>(</span><span class=n>rootContainer</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=o>//</span> <span class=n>mount</span> <span class=n>vnode</span> <span class=o>=&gt;</span> <span class=n>dom</span>
</span></span><span class=line><span class=cl>                    <span class=k>const</span> <span class=n>vnode</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                        <span class=n>tag</span><span class=p>:</span> <span class=n>rootComponent</span>
</span></span><span class=line><span class=cl>                    <span class=p>}</span>
</span></span><span class=line><span class=cl>                    <span class=o>//</span> <span class=n>Execute</span> <span class=n>rendering</span>
</span></span><span class=line><span class=cl>                    <span class=n>render</span><span class=p>(</span><span class=n>vnode</span><span class=p>,</span> <span class=n>rootContainer</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>app</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=o>//</span> <span class=mf>1.</span> <span class=n>Create</span> <span class=n>createApp</span>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=n>Vue</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>createApp</span><span class=p>(</span><span class=n>options</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=o>//</span><span class=n>What</span> <span class=n>actually</span> <span class=n>executed</span> <span class=n>is</span> <span class=n>renderer</span><span class=s1>&#39;s createApp()</span>
</span></span><span class=line><span class=cl>            <span class=o>//</span> <span class=n>Return</span> <span class=n>app</span> <span class=n>instance</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>renderer</span><span class=o>.</span><span class=n>createApp</span><span class=p>(</span><span class=n>options</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=o>//</span> <span class=mf>2.</span> <span class=n>Implement</span> <span class=n>renderer</span> <span class=n>factory</span> <span class=n>function</span>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=n>createRenderer</span> <span class=o>=</span> <span class=n>options</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=o>//</span> <span class=n>Implement</span> <span class=n>patch</span>
</span></span><span class=line><span class=cl>        <span class=k>const</span> <span class=n>patch</span> <span class=o>=</span> <span class=p>(</span><span class=n>n1</span><span class=p>,</span> <span class=n>n2</span><span class=p>,</span> <span class=n>container</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=o>//</span> <span class=n>Get</span> <span class=n>root</span> <span class=n>component</span> <span class=n>configuration</span>
</span></span><span class=line><span class=cl>            <span class=k>const</span> <span class=n>rootComponent</span> <span class=o>=</span> <span class=n>n2</span><span class=o>.</span><span class=n>tag</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>const</span> <span class=n>ctx</span> <span class=o>=</span> <span class=p>{</span> <span class=o>...</span><span class=n>rootComponent</span><span class=o>.</span><span class=n>data</span><span class=p>()}</span>
</span></span><span class=line><span class=cl>            <span class=o>//</span> <span class=n>Execute</span> <span class=n>render</span> <span class=n>to</span> <span class=n>get</span> <span class=n>vnode</span>
</span></span><span class=line><span class=cl>            <span class=k>const</span> <span class=n>vnode</span> <span class=o>=</span> <span class=n>rootComponent</span><span class=o>.</span><span class=n>render</span><span class=o>.</span><span class=n>call</span><span class=p>(</span><span class=n>ctx</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=o>//</span> <span class=n>Convert</span> <span class=n>vnode</span> <span class=o>=&gt;</span> <span class=n>dom</span>
</span></span><span class=line><span class=cl>            <span class=k>const</span> <span class=n>parent</span> <span class=o>=</span> <span class=n>options</span><span class=o>.</span><span class=n>querySelector</span><span class=p>(</span><span class=n>container</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>const</span> <span class=n>child</span> <span class=o>=</span> <span class=n>options</span><span class=o>.</span><span class=n>createElement</span><span class=p>(</span><span class=n>vnode</span><span class=o>.</span><span class=n>tag</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nb>typeof</span> <span class=n>vnode</span><span class=o>.</span><span class=n>children</span> <span class=o>===</span> <span class=s1>&#39;string&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>child</span><span class=o>.</span><span class=n>textContent</span> <span class=o>=</span> <span class=n>vnode</span><span class=o>.</span><span class=n>children</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=o>//</span><span class=n>array</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=o>//</span> <span class=n>Append</span>
</span></span><span class=line><span class=cl>            <span class=n>options</span><span class=o>.</span><span class=n>insert</span><span class=p>(</span><span class=n>child</span><span class=p>,</span> <span class=n>parent</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=o>//</span> <span class=n>Implement</span> <span class=n>render</span>
</span></span><span class=line><span class=cl>        <span class=k>const</span> <span class=n>render</span> <span class=o>=</span> <span class=p>(</span><span class=n>vnode</span><span class=p>,</span> <span class=n>container</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>patch</span><span class=p>(</span><span class=n>container</span><span class=o>.</span><span class=n>_vnode</span> <span class=o>||</span> <span class=n>null</span><span class=p>,</span> <span class=n>vnode</span><span class=p>,</span> <span class=n>container</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>container</span><span class=o>.</span><span class=n>_vnode</span> <span class=o>=</span> <span class=n>vnode</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=o>//</span> <span class=n>This</span> <span class=n>object</span> <span class=n>is</span> <span class=n>renderer</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>render</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>createApp</span><span class=p>:</span> <span class=n>createAppAPI</span><span class=p>(</span><span class=n>render</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=n>renderer</span> <span class=o>=</span> <span class=n>createRenderer</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=n>querySelector</span><span class=p>(</span><span class=n>el</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>document</span><span class=o>.</span><span class=n>querySelector</span><span class=p>(</span><span class=n>el</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=n>createElement</span><span class=p>(</span><span class=n>tag</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>document</span><span class=o>.</span><span class=n>createElement</span><span class=p>(</span><span class=n>tag</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=n>insert</span><span class=p>(</span><span class=n>child</span><span class=p>,</span> <span class=n>parent</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>parent</span><span class=o>.</span><span class=n>appendChild</span><span class=p>(</span><span class=n>child</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=n>Vue</span><span class=o>.</span><span class=n>createApp</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=n>data</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>bar</span><span class=p>:</span> <span class=s1>&#39;hello,vue3&#39;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=n>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>tag</span><span class=p>:</span> <span class=s1>&#39;h1&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>children</span><span class=p>:</span> <span class=n>this</span><span class=o>.</span><span class=n>bar</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span><span class=o>.</span><span class=n>mount</span><span class=p>(</span><span class=s1>&#39;#app&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=o>&lt;/</span><span class=n>script</span><span class=o>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>In Vue3, CreateApp() initializes, mount() is responsible for objectifying, render() transforms vnode into the real dom in the browser, you can understand patch() as a diff algorithm, processComponent() usually processes third-party components in vue, and finally mountComponent() will render our HTML.</p><h2 id=how-to-write-vue3-responsive-api>How to write Vue3 responsive API</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>var</span> <span class=n>activeEffect</span> <span class=o>=</span> <span class=n>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>function</span> <span class=n>effect</span><span class=p>(</span><span class=n>fn</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>activeEffect</span> <span class=o>=</span> <span class=n>fn</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>activeEffect</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=n>activeEffect</span> <span class=o>=</span> <span class=n>null</span><span class=p>;</span> 
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>var</span> <span class=n>depsMap</span> <span class=o>=</span> <span class=n>new</span> <span class=n>WeakMap</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=n>function</span> <span class=n>gather</span><span class=p>(</span><span class=n>target</span><span class=p>,</span> <span class=n>key</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=o>//</span> <span class=n>void</span> <span class=n>triggering</span> <span class=n>gather</span> <span class=n>when</span> <span class=n>using</span> <span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>obj1</span><span class=o>.</span><span class=n>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>activeEffect</span><span class=p>)</span> <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>let</span> <span class=n>depMap</span> <span class=o>=</span> <span class=n>depsMap</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>target</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>depMap</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>depsMap</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=n>target</span><span class=p>,</span> <span class=p>(</span><span class=n>depMap</span> <span class=o>=</span> <span class=n>new</span> <span class=n>Map</span><span class=p>()));</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=n>let</span> <span class=n>dep</span> <span class=o>=</span> <span class=n>depMap</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>dep</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>depMap</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=p>(</span><span class=n>dep</span> <span class=o>=</span> <span class=n>new</span> <span class=n>Set</span><span class=p>()));</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=n>dep</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>activeEffect</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>function</span> <span class=n>trigger</span><span class=p>(</span><span class=n>target</span><span class=p>,</span> <span class=n>key</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>let</span> <span class=n>depMap</span> <span class=o>=</span> <span class=n>depsMap</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>target</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=n>depMap</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=n>dep</span> <span class=o>=</span> <span class=n>depMap</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>dep</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>dep</span><span class=o>.</span><span class=n>forEach</span><span class=p>((</span><span class=n>effect</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=n>effect</span><span class=p>());</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>function</span> <span class=n>reactive</span><span class=p>(</span><span class=n>target</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>const</span> <span class=n>handle</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>set</span><span class=p>(</span><span class=n>target</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>,</span> <span class=n>receiver</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>Reflect</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=n>target</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>,</span> <span class=n>receiver</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=n>trigger</span><span class=p>(</span><span class=n>receiver</span><span class=p>,</span> <span class=n>key</span><span class=p>);</span> <span class=o>//</span> <span class=n>Trigger</span> <span class=n>automatic</span> <span class=n>update</span> <span class=n>when</span> <span class=n>setting</span> <span class=n>values</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=n>get</span><span class=p>(</span><span class=n>target</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>receiver</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>gather</span><span class=p>(</span><span class=n>receiver</span><span class=p>,</span> <span class=n>key</span><span class=p>);</span> <span class=o>//</span> <span class=n>Collect</span> <span class=n>dependencies</span> <span class=n>when</span> <span class=n>accessing</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=n>Reflect</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>target</span><span class=p>,</span> <span class=n>key</span><span class=p>,</span> <span class=n>receiver</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>new</span> <span class=n>Proxy</span><span class=p>(</span><span class=n>target</span><span class=p>,</span> <span class=n>handle</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=err>‚Äã</span>
</span></span><span class=line><span class=cl><span class=n>function</span> <span class=n>ref</span><span class=p>(</span><span class=n>name</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>reactive</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>value</span><span class=p>:</span> <span class=n>name</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=how-do-you-do-ssr-rendering-in-vue-projects>How do you do SSR rendering in Vue projects</h2><p>Compared with the traditional SPA (Single-Page Application), the advantages of Server Side Rendering (SSR) mainly include:</p><ul><li><p>Better SEO, as search engine crawlers can directly view the fully rendered page.</p></li><li><p>Faster time-to-content, especially for slow network conditions or slow-running devices.</p></li></ul><p>Vue.js is a framework for building client-side applications. By default, Vue components can be output in the browser to generate DOM and operate DOM. However, the same component can also be rendered as a server-side HTML string, send them directly to the browser, and finally ‚Äúactivate‚Äù these static markers into fully interactive applications on the client side.</p><p>A server-rendered Vue.js app can also be considered ‚Äúisomorphic‚Äù or ‚Äúuniversal‚Äù because most of the application‚Äôs code can run on both the server and the client.</p><ul><li><p>Vue SSR is a server-side rendering that has been improved on SPA.</p></li><li><p>The page rendered by Vue SSR needs to be activated on the client side to achieve interaction.</p></li><li><p>Vue SSR will include two parts: the first screen rendered by the server, and the SPA with interaction.</p></li></ul><p>Using SSR does not have a singleton mode, and a new Vue instance will be created whenever a user makes a request.</p><p>Implementing SSR requires implementing server-side first screen rendering and client-side activation.</p><p>Server asynchronous data fetching asyncData can be divided into first screen asynchronous fetching and switching component fetching.</p><p>The first screen asynchronously fetches data, which should have been completed during server-side pre-rendering.</p><p>Switch components fetch data through mixin mixing, and complete data fetching in the beforeMount hook.</p><h2 id=how-do-you-view-vues-diff-algorithm>How do you view Vue‚Äôs diff algorithm</h2><p>The diff algorithm is an efficient algorithm for comparing tree nodes at the same level</p><p>The overall strategy of diff is: depth first, compare on the same level</p><p>Comparisons are only made at the same level, and will not compare across levels</p><p>During the comparison process, the loop converges from both ends to the middle</p><ol><li><p>When the data changes, the subscriber watcher will call patch to patch the real DOM</p></li><li><p>Call the patchVnode method if they are the same through the isSameVnode judgment</p></li><li><p>PatchVnode does the following operations:</p></li></ol><ul><li><p>Find the corresponding real dom, called el</p></li><li><p>If both have text nodes and are not equal, set the el text node to the text node of Vnode</p></li><li><p>If oldVnode has child nodes and VNode doesn‚Äôt, then delete the child nodes of el</p></li><li><p>If oldVnode has no child nodes and VNode has, then add the real child nodes of VNode to el</p></li><li><p>If both have child nodes, execute the updateChildren function to compare the child nodes</p></li></ul><ol start=4><li>UpdateChildren mainly does the following operations:</li></ol><ul><li><p>Set the head and tail pointers of the new and old VNode</p></li><li><p>Compare the head and tail pointers of the new and old, loop towards the middle, and call patchVnode to repeat the patch process according to the situation, call createElem to create a new node, and find the VNode node with the same key from the hash table and then operate according to the situation.</p></li></ul><h2 id=what-do-you-need-to-do-to-build-a-vue-project-from-scratch>What do you need to do to build a Vue project from scratch</h2><ul><li><p>Scaffold: Choose the appropriate initialization scaffold (vue-cli2.0 or vue-cli3.0)</p></li><li><p>Request: Data axios request configuration</p></li><li><p>Login: Login registration system</p></li><li><p>Routing: Route management page</p></li><li><p>Data: Vuex global data management</p></li><li><p>Permission: Permission management system</p></li><li><p>Buried point: Buried point system</p></li><li><p>Plugin: The selection and introduction of third-party plugins</p></li><li><p>Error: Error page</p></li><li><p>Entry: Front-end resources are used directly as static resources, or the server-side template is fetched</p></li><li><p>SEO: If SEO is considered, the SSR scheme is recommended</p></li><li><p>Components: Base component/Business component</p></li><li><p>Style: style preprocessing, extraction of common styles</p></li><li><p>Method: Common method extraction</p></li></ul><h2 id=what-are-the-data-types-in-js-and-how-are-the-values-stored>What are the data types in js and how are the values stored</h2><p>JavaScript has a total of 8 data types, 7 of which are basic data types: Undefined, Null, Boolean, Number, String, Symbol (new in es6, representing a unique value) and BigInt (new in es10);</p><p>There is 1 reference data type ‚Äî Object (Object is essentially a group of unordered name-value pairs). It contains function, Array, Date, etc. JavaScript does not support any mechanism for creating custom types, and all values will eventually be one of these 8 data types.</p><p>Primitive data types: Directly stored in the stack, occupying small space, fixed size, being frequently used data, so they are stored in the stack.</p><p>Reference data types: Both stored in the stack and heap, occupying large space, and the size is not fixed. The reference data type stores a pointer in the stack, which points to the starting address of the entity in the heap. When the interpreter is looking for a reference value, it will first search for its address in the stack, and then get the entity from the heap after obtaining the address.</p><h2 id=in-js-objectprototypetostringcall-is-used-to-determine-the-data-type>In JS, Object.prototype.toString.call() is used to determine the data type</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>var</span> <span class=n>a</span> <span class=o>=</span> <span class=ne>Object</span><span class=o>.</span><span class=n>prototype</span><span class=o>.</span><span class=n>toString</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>a</span><span class=o>.</span><span class=n>call</span><span class=p>(</span><span class=mi>2</span><span class=p>));</span> <span class=o>//</span> <span class=p>[</span><span class=n>object</span> <span class=n>Number</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>a</span><span class=o>.</span><span class=n>call</span><span class=p>(</span><span class=bp>true</span><span class=p>));</span> <span class=o>//</span> <span class=p>[</span><span class=n>object</span> <span class=n>Boolean</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>a</span><span class=o>.</span><span class=n>call</span><span class=p>(</span><span class=s1>&#39;str&#39;</span><span class=p>));</span> <span class=o>//</span> <span class=p>[</span><span class=n>object</span> <span class=ne>String</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>a</span><span class=o>.</span><span class=n>call</span><span class=p>([]));</span> <span class=o>//</span> <span class=p>[</span><span class=n>object</span> <span class=ne>Array</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>a</span><span class=o>.</span><span class=n>call</span><span class=p>(</span><span class=n>function</span><span class=p>(){}));</span> <span class=o>//</span> <span class=p>[</span><span class=n>object</span> <span class=n>Function</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>a</span><span class=o>.</span><span class=n>call</span><span class=p>({}));</span> <span class=o>//</span> <span class=p>[</span><span class=n>object</span> <span class=ne>Object</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>a</span><span class=o>.</span><span class=n>call</span><span class=p>(</span><span class=n>undefined</span><span class=p>));</span> <span class=o>//</span> <span class=p>[</span><span class=n>object</span> <span class=n>Undefined</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>a</span><span class=o>.</span><span class=n>call</span><span class=p>(</span><span class=n>null</span><span class=p>));</span> <span class=o>//</span> <span class=p>[</span><span class=n>object</span> <span class=n>Null</span><span class=p>]</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=whats-the-difference-between-null-and-undefined>What‚Äôs the difference between null and undefined?</h2><p>Firstly, Undefined and Null are both basic data types, each of which has only one value, undefined and null.</p><p>undefined represents undetermination, null represents a blank object (not really an object, please see the notes below!). Generally, when a variable is declared but not yet defined, it returns undefined; null is mainly used for initializing variables that may return objects.</p><p>In fact, null is not an object, although typeof null will output object, but this is just an long-standing bug in JS. In the earliest version of JS, it used a 32-bit system for performance reasons, used low bits to store variable type information, and 000 at the beginning represented an object. However, null is represented as all-zeros, so it was wrongly judged as an object. Although the code for judging the internal type has changed now, this bug has been passed down.</p><p>undefined in js is not a reserved word, which means we can use undefined as a variable name, this practice is very dangerous, it will affect our judgment of the undefined value. However, we can get a safe undefined value through some methods, such as void 0.</p><p>When we use typeof to judge the two types, the Null type will return ‚Äúobject‚Äù, which is a historical issue. When we use double equals to compare the values of the two types, it returns true, and using triple equals returns false.</p><h2 id=what-are-the-results-of-valueof-and-tostring-for--and->What are the results of valueOf and toString for {} and []?</h2><p>The valueOf result for {} is {}, and the toString result is [object Object].</p><p>The valueOf result for [] is [], and the toString result is ‚Äú‚Äù.</p><h2 id=the-scope-and-scope-chain-of-javascript>The Scope and Scope Chain of Javascript</h2><p>Scope: Scope defines the region where variables are defined. It has a set of rules for accessing variables. These rules manage how the browser engine searches for variables (identifiers) in the current scope and nested scopes.</p><p>Scope Chain: The role of the scope chain is to ensure the orderly access to all variables and functions that the execution environment has the right to access. Through the scope chain, we can access the variables and functions of the outer environment.</p><p>The essence of the scope chain is a pointer list that points to variable objects. The variable object is an object that contains all the variables and functions in the execution environment. The front end of the scope chain is always the variable object of the current execution context. The variable object of the global execution context (that is, the global object) is always the last object of the scope chain.</p><p>When we search for a variable, if it is not found in the current execution environment, we can search backward along the scope chain.</p><p>The creation of the scope chain is related to the establishment of the execution context.</p><h2 id=please-discuss-your-understanding-of-this-call-apply-and-bind>Please discuss your understanding of this, call, apply, and bind</h2><ul><li><p>In the browser, this in the global scope points to the window object;</p></li><li><p>In functions, this always points to the object that last called it;</p></li><li><p>In constructors, this points to the newly created object through new;</p></li><li><p>In call, apply, bind, this is strongly bound to the designated object;</p></li><li><p>this in arrow functions is special, the this in the arrow function is the this in the parent scope, not the this at the time of the call. You should know that the first four methods are determined at the time of the call, that is, dynamically, while the this of the arrow function is static and is determined at the time of the declaration;</p></li><li><p>apply, call, bind are some built-in APIs inside the functions, which can be used to specify the execution of this for the function. They can also pass parameters.</p></li></ul><h2 id=what-is-javascript-prototype-and-prototype-chain-what-are-its-features>What is JavaScript Prototype and Prototype Chain? What are its features?</h2><p>In js, we use the constructor to create a new object. Each constructor internally has a prototype attribute. This attribute is an object that contains all the properties and methods that can be shared by all instances of this constructor. After we use the constructor to create a new object, the object will internally contain a pointer. This pointer points to the value corresponding to the prototype property of the constructor. In ES5, this pointer is called the prototype of the object. Generally, we should not be able to get this value. However, current browsers have implemented the proto property to allow us to access this attribute. However, we should avoid using this attribute because it is not stipulated in the specification. ES5 added a Object.getPrototypeOf() method. We can use this method to get the prototype of the object.</p><p>When we access an attribute of an object and if the attribute does not exist within the object, it will go to its prototype object to find that attribute. This prototype object will also have its own prototype, and it keeps looking this way. This is the concept of the prototype chain. The end of the prototype chain is usually Object.prototype, so this is why newly created objects can use the toString() method and other methods.</p><p>Features:</p><p>JavaScript objects are passed by reference, and each new object entity we create does not have a copy of its own prototype. When we modify the prototype, the corresponding object will also inherit this change.</p><h2 id=what-is-a-closure-and-why-should-we-use-it>What is a closure, and why should we use it?</h2><p>A function that can access the internal variables of other functions is called a closure.</p><p>A function that can access free variables is called a closure.</p><p><strong>Scenarios</strong></p><ul><li><p>As for the use cases of closures, we often use them in daily development.</p></li><li><p>Throttling and debouncing functions</p></li><li><p>Timer callbacks</p></li></ul><p><strong>Advantages</strong></p><p>What problem does the closure help us solve?</p><p>Internal variables are private, which can isolate scope and prevent data from being polluted</p><p><strong>Disadvantages</strong></p><p>At the same time, closures also bring some downsides.</p><p>As its advantage has been discussed, ‚Äòinternal variables are private, it can isolate scope‚Äô, which means that the garbage collection mechanism cannot clean up internal variables in closures, resulting in memory leaks.</p><h2 id=what-are-the-three-event-models>What are the three event models?</h2><p>Events are interactive actions that occur when a user operates a web page or some operations of the web page itself. Modern browsers have three event models:</p><ol><li><p><strong>DOM Level 0 model</strong>: This model does not propagate, so there is no concept of event flow, but now some browsers support implementation in a bubbling way. It allows direct definition of listener functions in web pages, or specification of listener functions through js properties. This method is compatible with all browsers.</p></li><li><p><strong>IE event model</strong>: In this event model, there are two processes for one event, the event handling phase, and the event bubbling phase. The event handling phase will first execute the listening event bound to the target element. Then is the event bubbling phase. Bubbling refers to the event bubbling from the target element to the document while checking whether the nodes passed have bound event listener functions. If there are, then they are executed. This type of model uses attachEvent to add listener functions. It can add multiple listener functions that are executed in the order they were added.</p></li><li><p><strong>DOM Level 2 event model</strong>: This event model has three processes for one event. The first process is the event capturing phase. Capturing is the event propagating from the document down to the target element, checking if the nodes passed have bound event listener functions. If there are, then they are executed. The next two phases are the same as in the IE event model. In this event model, the function bound to the event is addEventListener. Its third parameter can specify whether the event executes in the capture phase.</p></li></ol><h2 id=javascript-arrays-and-strings-have-a-variety-of-native-methods>JavaScript arrays and strings have a variety of native methods</h2><p><strong>Array methods:</strong></p><ul><li><p>push() ‚Äî Add new items to the end of an array</p></li><li><p>pop() ‚Äî Remove the last item of an array</p></li><li><p>shift() ‚Äî Remove the first item of an array</p></li><li><p>unshift() ‚Äî Add new items to the beginning of an array</p></li><li><p>slice() ‚Äî Returns a new array with a portion of the elements of the original array</p></li><li><p>splice() ‚Äî Add/Remove items from an array</p></li><li><p>join() ‚Äî Join all elements of the array into a string</p></li><li><p>reverse() -Reverses the order of the elements in an array</p></li><li><p>sort() ‚Äî Sorts the elements of an array</p></li><li><p>map() ‚Äî Creates a new array with the results of calling a provided function on every element in the array</p></li><li><p>filter() ‚Äî Creates a new array with all elements that pass a test provided by a function</p></li><li><p>reduce() ‚Äî Apply a function against an accumulator and each element in the array (from left to right) to reduce it to a single value.</p></li><li><p>forEach() ‚Äî Executes a provided function once for each array element</p></li></ul><p><strong>String methods:</strong></p><ul><li><p>length() ‚Äî Returns the length of a string</p></li><li><p>charAt() ‚Äî Returns the character at a specified index in a string</p></li><li><p>charCodeAt() ‚Äî Returns the Unicode of the character at a specified index</p></li><li><p>concat() ‚Äî Concatenate two or more strings</p></li><li><p>indexOf() ‚Äî Returns the position of the first found occurrence of a specified value in a string</p></li><li><p>lastIndexOf() ‚Äî Returns the position of the last found occurrence of a specified value in a string</p></li><li><p>match() ‚Äî Searches a string for a match against a regular expression and returns the matches</p></li><li><p>search() ‚Äî Searches a string for a specified value or regular expression and returns the position of the match</p></li><li><p>replace() ‚Äî Replaces some or all matches with a replacement</p></li><li><p>slice() ‚Äî Extracts a part of a string and returns a new string</p></li><li><p>split() ‚Äî Splits a string into an array of substrings</p></li><li><p>substr() ‚Äî Extracts parts of a string, beginning at the character at the specified position, and returns the specified number of characters</p></li><li><p>substring() ‚Äî Extracts characters from a string between two specified indices</p></li><li><p>toLowerCase() ‚Äî Converts a string to lowercase letters</p></li><li><p>toUpperCase() ‚Äî Converts a string to uppercase letters</p></li></ul><h2 id=what-are-the-ways-to-load-javascript-lazily>What are the ways to load JavaScript lazily?</h2><p>The loading, parsing, and execution of JavaScript can block the rendering of the page. Therefore, we hope that JavaScript scripts can be loaded as late as possible to improve the rendering speed of the page.</p><ol><li><p>ut JavaScript scripts at the bottom of the document to load and execute them as late as possible.</p></li><li><p>Add the defer attribute to the JavaScript script. This attribute allows the script to load in parallel with the document‚Äôs parsing process. After the document has finished parsing, then this script file will be executed. This way, the rendering of the page is not blocked. Multiple scripts set with the defer attribute should be executed in order according to the standard, but in some browsers, it may not be the case.</p></li><li><p>Add the async attribute to the JavaScript script. This attribute allows the script to load asynchronously and will not block the parsing of the page. However, when the script loading is completed, the JavaScript script will be executed immediately. If the document has not finished parsing, it will also block. The execution order of multiple scripts with the async attribute is unpredictable and does not generally follow the order of the code.</p></li><li><p>Dynamic creation of DOM tags. We can listen to the loading events of the document. When the document has finished loading, we can dynamically create script tags to import JavaScript scripts.</p></li></ol><h2 id=there-are-four-mature-module-loading-schemes-in-javascript-now>There are four mature module loading schemes in JavaScript now</h2><ul><li><p>The first one is the CommonJS scheme, which uses require to import modules and defines the module‚Äôs output interface through module.exports. This module loading solution is a server-side solution, it imports modules in a synchronous way because on the server-side all files are stored on the local disk, so the reading is very fast, so synchronous loading is not a problem. But if it is on the client-side, because the loading of modules uses network requests, using asynchronous loading is more appropriate.</p></li><li><p>The second is the AMD scheme, which uses asynchronous loading to load modules, the loading of modules does not affect the execution of subsequent statements, all statements that depend on this module are defined in a callback function, and the callback function is executed after the loading is completed. Require.js implements the AMD specification.</p></li><li><p>The third is the CMD scheme, this scheme and the AMD scheme are to solve the problem of asynchronous module loading, sea.js implements the CMD specification. It differs from require.js in the handling of dependencies when defining modules and the timing of executing dependent modules.</p></li><li><p>The fourth scheme is proposed by ES6, using import and export to import and export modules.</p></li></ul><h2 id=the-difference-between-amd-and-cmd-specifications>The difference between AMD and CMD specifications?</h2><p>There are two main differences between them.</p><ol><li><p>The first aspect is the different handling of dependencies when defining modules. AMD advocates for dependency upfront, which means you need to declare its dependent modules when defining a module. CMD, on the other hand, advocates for just-in-time dependency, meaning that you only require a module when you need it.</p></li><li><p>The second aspect is the differing handling of when dependent modules are executed. Although AMD and CMD both load modules asynchronously, they are different when it comes to the execution timing of modules. Once AMD‚Äôs dependent modules are loaded, it starts executing them directly, and the execution order of these modules may not necessarily be the same as how we write them. CMD, on the other hand, does not execute the module immediately after it is loaded, it only downloads it. After all dependent modules have been loaded, it enters the callback function logic. It only executes the corresponding module when it encounters a require statement, so the execution order of the modules is consistent with the order in which we write them.</p></li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>//</span> <span class=n>CMD</span>
</span></span><span class=line><span class=cl><span class=n>define</span><span class=p>(</span><span class=n>function</span><span class=p>(</span><span class=n>require</span><span class=p>,</span> <span class=n>exports</span><span class=p>,</span> <span class=n>module</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>var</span> <span class=n>a</span> <span class=o>=</span> <span class=n>require</span><span class=p>(</span><span class=s2>&#34;./a&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>a</span><span class=o>.</span><span class=n>doSomething</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=o>...</span>
</span></span><span class=line><span class=cl>  <span class=k>var</span> <span class=n>b</span> <span class=o>=</span> <span class=n>require</span><span class=p>(</span><span class=s2>&#34;./b&#34;</span><span class=p>);</span> <span class=o>//</span> <span class=n>Dependencies</span> <span class=n>can</span> <span class=n>be</span> <span class=n>written</span> <span class=n>nearby</span>
</span></span><span class=line><span class=cl>  <span class=n>b</span><span class=o>.</span><span class=n>doSomething</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=o>//</span> <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>AMD</span>
</span></span><span class=line><span class=cl><span class=n>define</span><span class=p>([</span><span class=s2>&#34;./a&#34;</span><span class=p>,</span> <span class=s2>&#34;./b&#34;</span><span class=p>],</span> <span class=n>function</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=o>//</span> <span class=n>Dependencies</span> <span class=n>must</span> <span class=n>be</span> <span class=n>written</span> <span class=n>from</span> <span class=n>the</span> <span class=n>beginning</span>
</span></span><span class=line><span class=cl>  <span class=n>a</span><span class=o>.</span><span class=n>doSomething</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=o>...</span>
</span></span><span class=line><span class=cl>  <span class=n>b</span><span class=o>.</span><span class=n>doSomething</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=o>//</span> <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=ifferences-between-es6-modules-and-commonjs-modules-amd-and-cmd>ifferences between ES6 modules and CommonJS modules, AMD, and CMD.</h2><ol><li>Syntax</li></ol><p>CommonJS uses module.exports = {} to export a module object, require(&lsquo;file_path&rsquo;) to import a module object;
ES6 uses export to export specific data, import to import specific data.</p><ol start=2><li>CommonJS module outputs a copy of a value, ES6 module outputs a reference to a value</li></ol><p>CommonJS module outputs a copy of a value, that is, once a value is output, changes inside the module cannot affect this value.</p><p>The operating mechanism of ES6 Modules is different from CommonJS. When the JS engine performs a static analysis of the script, it encounters the module loading command import, it will generate a read-only reference. When the script is actually executed, it will retrieve the value from the loaded module based on this read-only reference. In other words, ES6&rsquo;s import is like Unix system&rsquo;s &ldquo;symbolic link&rdquo;. If the original value changes, the value loaded by import will also change accordingly. Therefore, ES6 modules are dynamic references and do not cache values. The variables within the module are bound to the module where they are located.</p><ol start=3><li>CommonJS modules are loaded at runtime, ES6 modules are loaded at compile time</li></ol><p>Runtime Loading: CommonJS modules are objects, i.e., modules are loaded in their entirety first to generate an object, and then methods are read from this object. This type of loading is called ‚Äúruntime loading‚Äù.</p><p>Compile-time loading: ES6 modules are not objects, they specify the code that is to output explicitly through the export command, and static commands are used when imports. At the time of import, you can specify to load some outputted values instead of loading the whole module. This type of loading is called &ldquo;compile-time loading&rdquo;.</p><p>PS: The CommonJS loads an object (i.e., module.exports property), which is only generated after the script has finished running. ES6 modules, on the other hand, are not objects, their external interfaces are just static definitions that are generated during the static analysis phase of the code.</p><h2 id=js-operation-mechanism>JS operation mechanism</h2><p>Asynchronous task types: macro tasks, micro tasks</p><p>Synchronous tasks and asynchronous tasks enter different execution ‚Äúplaces‚Äù</p><p>First, execute the macro tasks in the main thread execution stack</p><p>If a micro task is encountered during execution, it enters the Event Table and registers a function, after which it moves into the task queue of micro tasks</p><p>After the macro task is executed, all micro tasks in the current micro task queue are immediately executed (in order)</p><p>The main thread will continuously retrieve tasks from the task queue, execute tasks, retrieve more, and execute more tasks. This is often referred to as the Event Loop.</p><h2 id=a-brief-introduction-to-the-garbage-collection-mechanism-of-the-v8-engine>A brief introduction to the garbage collection mechanism of the V8 engine</h2><p>V8‚Äôs garbage collection mechanism is based on generational garbage collection, which is in turn based on the generational hypothesis. This hypothesis has two characteristics, one is that newly created objects easily die young, the other is that objects that do not die will live longer. Based on this hypothesis, the V8 engine divides memory into new generation and old generation.</p><p>Newly created objects or objects that have only undergone garbage collection once are referred to as the new generation. Objects that have undergone garbage collection multiple times are referred to as the old generation.</p><p>The new generation is divided into ‚ÄòFrom‚Äô and ‚ÄòTo‚Äô spaces, with ‚ÄòTo‚Äô typically being idle. When the ‚ÄòFrom‚Äô space is full, the Scavenge algorithm executes garbage collection. When we execute the garbage collection algorithm, the application logic will stop and only continue after the garbage collection ends. This algorithm consists of three steps:</p><p>(1) First, check the surviving objects in the ‚ÄòFrom‚Äô space. If the object is alive, check if it meets the criteria for promotion to the old generation. If the conditions are met, it is promoted to the old generation. If the conditions are not met, it is moved to the ‚ÄòTo‚Äô space.</p><p>(2) If the object is not alive, then the space of the object is freed.</p><p>(3) Finally, the roles of the ‚ÄòFrom‚Äô space and the ‚ÄòTo‚Äô space are swapped.</p><p>There are two conditions for promoting new generation objects to the old generation:</p><p>(1) The first is to check if the object has already undergone a Scavenge recovery. If it has undergone one, the object will be copied from the ‚ÄòFrom‚Äô space to the old generation. If it has not undergone one, it will be copied to the ‚ÄòTo‚Äô space.</p><p>(2) The second is to check if the usage of the ‚ÄòTo‚Äô space exceeds the limit. When an object is copied from the ‚ÄòFrom‚Äô space to the ‚ÄòTo‚Äô space, if the ‚ÄòTo‚Äô space usage is over 25%, the object is directly promoted to the old generation. The reason for setting ‚Äò25%‚Äô is mainly because after the algorithm ends, the two spaces will be swapped. If the memory of the ‚ÄòTo‚Äô space is too small, it will affect subsequent memory allocation.</p><p>The old generation uses the mark-sweep and mark-compact methods. The mark-sweep method first marks the surviving objects in memory and then removes the unmarked objects after the marking ends. Since mark-sweep can cause a lot of memory fragments, which is not conducive to subsequent memory allocation, the mark-compact method was introduced to solve the problem of memory fragmentation.</p><p>Since the application logic is paused during garbage collection, the pause time is not too long for the new generation method because of the small memory. However, for the old generation, each garbage collection takes a long time, and the pause will have a significant impact. To solve this problem, V8 introduced an incremental marking method, dividing the pause process into multiple steps. After each small step, it lets the running logic execute for a while, alternating like this.</p><h2 id=what-actions-can-cause-a-memory-leak>What actions can cause a memory leak?</h2><ol><li><p>Accidental Global Variables</p></li><li><p>Forgotten Timers or Callbacks</p></li><li><p>Out-of-DOM References</p></li><li><p>Closures</p></li></ol><h2 id=what-are-the-new-features-in-es6>What are the new features in ES6?</h2><ul><li><p>Block Scoping</p></li><li><p>Classes</p></li><li><p>Arrow Functions</p></li><li><p>Template Strings</p></li><li><p>Enhanced Object Literals</p></li><li><p>Object Destructuring</p></li><li><p>Promise</p></li><li><p>Modules</p></li><li><p>Symbol</p></li><li><p>Proxy & Set</p></li><li><p>Default Function Parameters</p></li><li><p>Spread</p></li></ul><h2 id=what-is-an-arrow-function>What is an Arrow Function?</h2><p>What is an Arrow Function?</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>//</span><span class=n>ES5</span> <span class=n>Version</span>
</span></span><span class=line><span class=cl><span class=k>var</span> <span class=n>getCurrentDate</span> <span class=o>=</span> <span class=n>function</span> <span class=p>(){</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>new</span> <span class=n>Date</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>//</span><span class=n>ES6</span> <span class=n>Version</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>getCurrentDate</span> <span class=o>=</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=n>new</span> <span class=n>Date</span><span class=p>();</span>
</span></span></code></pre></td></tr></table></div></div><p>Arrow function expressions have a more concise syntax than function expressions and do not have their own this, arguments, super, or new.target. Arrow function expressions are best suited for places where anonymous functions are originally needed, and they cannot be used as constructors.</p><p>An arrow function does not have its own this value. It captures the this value of the lexical scope function. If we declare the arrow function in the global scope, the this value is the window object.</p><h2 id=what-is-a-higher-order-function>What is a Higher Order Function?</h2><p>Higher order functions are simply functions that take functions as arguments or return them as results.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>function higherOrderFunction(param, callback){
</span></span><span class=line><span class=cl>    return callback(param);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div><h2 id=handwritten-call-apply-and-bind-functions>Handwritten call, apply, and bind functions</h2><h3 id=implementing-the-call-function>Implementing the call Function</h3><p>Process the edge case:</p><p>If the object does not exist, the this points to window.</p><p>Assign the ‚Äúcalling function‚Äù to the fn property of the object that this points to.</p><p>Execute the fn function on the object that this points to, pass in the parameters, and return the results.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>Function</span><span class=o>.</span><span class=n>prototype</span><span class=o>.</span><span class=n>mu_call</span> <span class=o>=</span> <span class=n>function</span> <span class=p>(</span><span class=n>context</span><span class=p>,</span> <span class=o>...</span><span class=n>args</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=o>//</span> <span class=n>If</span> <span class=n>the</span> <span class=n>object</span> <span class=n>does</span> <span class=ow>not</span> <span class=n>exist</span><span class=p>,</span> <span class=n>it</span> <span class=n>points</span> <span class=n>to</span> <span class=n>window</span><span class=o>.</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>context</span> <span class=o>||</span> <span class=n>context</span> <span class=o>===</span> <span class=n>null</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>context</span> <span class=o>=</span> <span class=n>window</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>//</span> <span class=n>Create</span> <span class=n>a</span> <span class=n>unique</span> <span class=n>key</span> <span class=n>value</span> <span class=n>to</span> <span class=n>be</span> <span class=n>used</span> <span class=n>as</span> <span class=n>the</span> <span class=n>internal</span> <span class=n>method</span> <span class=n>name</span> <span class=n>of</span> <span class=n>the</span> <span class=n>context</span> <span class=n>we</span> <span class=n>construct</span><span class=o>.</span>
</span></span><span class=line><span class=cl>    <span class=n>let</span> <span class=n>fn</span> <span class=o>=</span> <span class=n>Symbol</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>//</span> <span class=n>The</span> <span class=n>this</span> <span class=n>points</span> <span class=n>to</span> <span class=n>the</span> <span class=n>function</span> <span class=n>that</span> <span class=n>calls</span> <span class=n>call</span><span class=o>.</span>
</span></span><span class=line><span class=cl>    <span class=n>context</span><span class=p>[</span><span class=n>fn</span><span class=p>]</span> <span class=o>=</span> <span class=n>this</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>//</span> <span class=n>Executing</span> <span class=n>the</span> <span class=n>function</span> <span class=ow>and</span> <span class=n>returning</span> <span class=n>the</span> <span class=n>result</span> <span class=n>is</span> <span class=n>equivalent</span> <span class=n>to</span> <span class=n>calling</span> <span class=n>itself</span> <span class=n>as</span> <span class=n>a</span> <span class=n>method</span> <span class=n>of</span> <span class=n>the</span> <span class=n>passed</span><span class=o>-</span><span class=ow>in</span> <span class=n>context</span><span class=o>.</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>context</span><span class=p>[</span><span class=n>fn</span><span class=p>](</span><span class=o>...</span><span class=n>args</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>test</span>
</span></span><span class=line><span class=cl><span class=k>var</span> <span class=n>value</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>var</span> <span class=n>obj1</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>value</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=n>function</span> <span class=n>bar</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>age</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>var</span> <span class=n>myObj</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span><span class=p>:</span> <span class=n>name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>age</span><span class=p>:</span> <span class=n>age</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>value</span><span class=p>:</span> <span class=n>this</span><span class=o>.</span><span class=n>value</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>this</span><span class=o>.</span><span class=n>value</span><span class=p>,</span> <span class=n>myObj</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>bar</span><span class=o>.</span><span class=n>mu_call</span><span class=p>(</span><span class=n>null</span><span class=p>);</span> <span class=o>//</span> <span class=p>{</span><span class=n>name</span><span class=p>:</span> <span class=n>undefined</span><span class=p>,</span> <span class=n>age</span><span class=p>:</span> <span class=n>undefined</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=mi>2</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>bar</span><span class=o>.</span><span class=n>mu_call</span><span class=p>(</span><span class=n>obj1</span><span class=p>,</span> <span class=s1>&#39;tom&#39;</span><span class=p>,</span> <span class=s1>&#39;110&#39;</span><span class=p>);</span> <span class=o>//</span> <span class=p>{</span><span class=n>name</span><span class=p>:</span> <span class=s2>&#34;tom&#34;</span><span class=p>,</span> <span class=n>age</span><span class=p>:</span> <span class=s2>&#34;110&#34;</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=mi>1</span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=implementing-the-apply-function>Implementing the apply Function</h3><p>Similar to call, the difference lies in the form of parameters.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>Function</span><span class=o>.</span><span class=n>prototype</span><span class=o>.</span><span class=n>mu_apply</span> <span class=o>=</span> <span class=n>function</span> <span class=p>(</span><span class=n>context</span><span class=p>,</span> <span class=n>args</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=o>//</span> <span class=n>If</span> <span class=n>the</span> <span class=n>object</span> <span class=n>does</span> <span class=ow>not</span> <span class=n>exist</span><span class=p>,</span> <span class=n>it</span> <span class=n>points</span> <span class=n>to</span> <span class=n>window</span><span class=o>.</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>context</span> <span class=o>||</span> <span class=n>context</span> <span class=o>===</span> <span class=n>null</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>context</span> <span class=o>=</span> <span class=n>Window</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=o>//</span> <span class=n>Create</span> <span class=n>a</span> <span class=n>unique</span> <span class=n>key</span> <span class=n>value</span> <span class=n>to</span> <span class=n>be</span> <span class=n>used</span> <span class=n>as</span> <span class=n>the</span> <span class=n>internal</span> <span class=n>method</span> <span class=n>name</span> <span class=n>of</span> <span class=n>the</span> <span class=n>context</span> <span class=n>we</span> <span class=n>construct</span><span class=o>.</span>
</span></span><span class=line><span class=cl>  <span class=n>let</span> <span class=n>fn</span> <span class=o>=</span> <span class=n>Symbol</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=err>‚Äã</span>
</span></span><span class=line><span class=cl>  <span class=o>//</span> <span class=n>The</span> <span class=n>this</span> <span class=n>points</span> <span class=n>to</span> <span class=n>the</span> <span class=n>function</span> <span class=n>that</span> <span class=n>calls</span> <span class=n>call</span><span class=o>.</span>
</span></span><span class=line><span class=cl>  <span class=n>context</span><span class=p>[</span><span class=n>fn</span><span class=p>]</span> <span class=o>=</span> <span class=n>this</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=err>‚Äã</span>
</span></span><span class=line><span class=cl>  <span class=o>//</span> <span class=n>Executing</span> <span class=n>the</span> <span class=n>function</span> <span class=ow>and</span> <span class=n>returning</span> <span class=n>the</span> <span class=n>result</span> <span class=n>is</span> <span class=n>equivalent</span> <span class=n>to</span> <span class=n>calling</span> <span class=n>itself</span> <span class=n>as</span> <span class=n>a</span> <span class=n>method</span> <span class=n>of</span> <span class=n>the</span> <span class=n>passed</span><span class=o>-</span><span class=ow>in</span> <span class=n>context</span><span class=o>.</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>context</span><span class=p>[</span><span class=n>fn</span><span class=p>](</span><span class=o>...</span><span class=n>args</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=err>‚Äã</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>test</span>
</span></span><span class=line><span class=cl><span class=k>var</span> <span class=n>value</span> <span class=o>=</span> <span class=mi>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>var</span> <span class=n>obj1</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>value</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=n>function</span> <span class=n>bar</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>age</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>var</span> <span class=n>myObj</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span><span class=p>:</span> <span class=n>name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>age</span><span class=p>:</span> <span class=n>age</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>value</span><span class=p>:</span> <span class=n>this</span><span class=o>.</span><span class=n>value</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>this</span><span class=o>.</span><span class=n>value</span><span class=p>,</span> <span class=n>myObj</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>bar</span><span class=o>.</span><span class=n>mu_apply</span><span class=p>(</span><span class=n>obj1</span><span class=p>,</span> <span class=p>[</span><span class=s2>&#34;tom&#34;</span><span class=p>,</span> <span class=s2>&#34;110&#34;</span><span class=p>]);</span> <span class=o>//</span> <span class=p>{</span><span class=n>name</span><span class=p>:</span> <span class=s2>&#34;tom&#34;</span><span class=p>,</span> <span class=n>age</span><span class=p>:</span> <span class=s2>&#34;110&#34;</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=mi>1</span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=implementing-the-bind-function>Implementing the bind Function</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>Function</span><span class=o>.</span><span class=n>prototype</span><span class=o>.</span><span class=n>mu_bind</span> <span class=o>=</span> <span class=n>function</span> <span class=p>(</span><span class=n>context</span><span class=p>,</span> <span class=o>...</span><span class=n>args</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>context</span> <span class=o>||</span> <span class=n>context</span> <span class=o>===</span> <span class=n>null</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>context</span> <span class=o>=</span> <span class=n>window</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=o>//</span> <span class=n>Create</span> <span class=n>a</span> <span class=n>unique</span> <span class=n>key</span> <span class=n>value</span> <span class=n>as</span> <span class=n>the</span> <span class=n>method</span> <span class=n>name</span> <span class=n>inside</span> <span class=n>our</span> <span class=n>constructed</span> <span class=n>context</span><span class=o>.</span>
</span></span><span class=line><span class=cl>    <span class=n>let</span> <span class=n>fn</span> <span class=o>=</span> <span class=n>Symbol</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=n>context</span><span class=p>[</span><span class=n>fn</span><span class=p>]</span> <span class=o>=</span> <span class=n>this</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>let</span> <span class=n>_this</span> <span class=o>=</span> <span class=n>this</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=n>result</span> <span class=o>=</span> <span class=n>function</span> <span class=p>(</span><span class=o>...</span><span class=n>innerArgs</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=o>//</span> <span class=n>First</span> <span class=n>situation</span><span class=p>:</span> <span class=n>If</span> <span class=n>the</span> <span class=n>function</span> <span class=n>bound</span> <span class=n>by</span> <span class=n>bind</span> <span class=n>is</span> <span class=n>used</span> <span class=n>as</span> <span class=n>a</span> <span class=n>constructor</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=o>//</span> <span class=ow>and</span> <span class=n>used</span> <span class=n>through</span> <span class=n>the</span> <span class=n>new</span> <span class=n>operator</span><span class=p>,</span> <span class=k>do</span> <span class=ow>not</span> <span class=n>bind</span> <span class=n>the</span> <span class=n>passed</span><span class=o>-</span><span class=ow>in</span> <span class=n>this</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=o>//</span> <span class=n>but</span> <span class=n>point</span> <span class=n>this</span> <span class=n>to</span> <span class=n>the</span> <span class=n>object</span> <span class=n>that</span> <span class=n>has</span> <span class=n>been</span> <span class=n>instantiated</span><span class=o>.</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=n>this</span> <span class=n>instanceof</span> <span class=n>_this</span> <span class=o>===</span> <span class=bp>true</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=o>//</span> <span class=n>At</span> <span class=n>this</span> <span class=n>point</span><span class=p>,</span> <span class=n>this</span> <span class=n>points</span> <span class=n>to</span> <span class=n>the</span> <span class=n>instance</span> <span class=n>of</span> <span class=n>result</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=o>//</span> <span class=n>so</span> <span class=n>there</span> <span class=n>is</span> <span class=n>no</span> <span class=n>need</span> <span class=n>to</span> <span class=n>change</span> <span class=n>the</span> <span class=n>pointing</span> <span class=n>of</span> <span class=n>this</span><span class=o>.</span>
</span></span><span class=line><span class=cl>        <span class=n>this</span><span class=p>[</span><span class=n>fn</span><span class=p>]</span> <span class=o>=</span> <span class=n>_this</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>this</span><span class=p>[</span><span class=n>fn</span><span class=p>](</span><span class=o>...</span><span class=p>[</span><span class=o>...</span><span class=n>args</span><span class=p>,</span> <span class=o>...</span><span class=n>innerArgs</span><span class=p>]);</span> 
</span></span><span class=line><span class=cl>        <span class=n>delete</span> <span class=n>this</span><span class=p>[</span><span class=n>fn</span><span class=p>];</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=o>//</span> <span class=n>If</span> <span class=n>it</span> <span class=n>is</span> <span class=n>called</span> <span class=n>as</span> <span class=n>a</span> <span class=n>regular</span> <span class=n>function</span><span class=p>,</span> <span class=n>then</span> <span class=n>just</span> <span class=n>change</span> <span class=n>this</span> <span class=n>to</span> <span class=n>point</span> <span class=n>to</span> <span class=n>the</span> <span class=n>passed</span><span class=o>-</span><span class=ow>in</span> <span class=n>context</span><span class=o>.</span>
</span></span><span class=line><span class=cl>        <span class=n>context</span><span class=p>[</span><span class=n>fn</span><span class=p>](</span><span class=o>...</span><span class=p>[</span><span class=o>...</span><span class=n>args</span><span class=p>,</span> <span class=o>...</span><span class=n>innerArgs</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>        <span class=n>delete</span> <span class=n>context</span><span class=p>[</span><span class=n>fn</span><span class=p>];</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=o>//</span> <span class=n>If</span> <span class=n>what</span> <span class=n>is</span> <span class=n>bound</span> <span class=n>is</span> <span class=n>a</span> <span class=n>constructor</span><span class=p>,</span> <span class=n>then</span> <span class=n>we</span> <span class=n>need</span> <span class=n>to</span> <span class=n>inherit</span> <span class=n>the</span> <span class=n>prototype</span><span class=s1>&#39;s attributes and methods of the constructor, </span>
</span></span><span class=line><span class=cl>    <span class=o>//</span> <span class=n>it</span> <span class=n>can</span> <span class=n>be</span> <span class=n>done</span> <span class=n>using</span> <span class=ne>Object</span><span class=o>.</span><span class=n>create</span><span class=o>.</span>
</span></span><span class=line><span class=cl>    <span class=n>result</span><span class=o>.</span><span class=n>prototype</span> <span class=o>=</span> <span class=ne>Object</span><span class=o>.</span><span class=n>create</span><span class=p>(</span><span class=n>this</span><span class=o>.</span><span class=n>prototype</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>function</span> <span class=n>Person</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>age</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>name</span><span class=p>);</span> <span class=o>//</span><span class=s1>&#39;The name passed in by the parameter&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>age</span><span class=p>);</span> <span class=o>//</span><span class=s1>&#39;The age passed in by the parameter&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>this</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Person</span><span class=o>.</span><span class=n>prototype</span><span class=o>.</span><span class=n>say</span> <span class=o>=</span> <span class=n>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=mi>123</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>function</span> <span class=n>normalFun</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>age</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>name</span><span class=p>);</span> <span class=o>//</span><span class=s1>&#39;The name passed in by the parameter&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>age</span><span class=p>);</span> <span class=o>//</span><span class=s1>&#39;The age passed in by the parameter&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>this</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>this</span><span class=o>.</span><span class=n>objName</span><span class=p>);</span> <span class=o>//</span><span class=s1>&#39;The name passed in by obj&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>this</span><span class=o>.</span><span class=n>objAge</span><span class=p>);</span> <span class=o>//</span><span class=s1>&#39;The age passed in by obj&#39;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>let</span> <span class=n>obj</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>objName</span><span class=p>:</span> <span class=s1>&#39;The name passed in by obj&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>objAge</span><span class=p>:</span> <span class=s1>&#39;The age passed in by obj&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>let</span> <span class=n>bindFun</span> <span class=o>=</span> <span class=n>normalFun</span><span class=o>.</span><span class=n>mu_bind</span><span class=p>(</span><span class=n>obj</span><span class=p>,</span> <span class=s1>&#39;The name passed in by the parameter&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>bindFun</span><span class=p>(</span><span class=s1>&#39;The age passed in by the parameter&#39;</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=implementation-of-function-currying>Implementation of Function Currying</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// Function currying refers to a technique of converting a function that uses multiple parameters into a series of functions that use a single parameter. 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>function curry(fn, args) {
</span></span><span class=line><span class=cl>  // Get the number of parameters required by the function
</span></span><span class=line><span class=cl>  let length = fn.length;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  args = args || [];
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  return function() {
</span></span><span class=line><span class=cl>    let subArgs = args.slice(0);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // Concatenate to get all the current arguments
</span></span><span class=line><span class=cl>    for (let i = 0; i &lt; arguments.length; i++) {
</span></span><span class=line><span class=cl>      subArgs.push(arguments[i]);
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    // Determine whether the length of the argument already meets the length of the parameters required by the function
</span></span><span class=line><span class=cl>    if (subArgs.length &gt;= length) {
</span></span><span class=line><span class=cl>      // If it meets the requirements, execute the function
</span></span><span class=line><span class=cl>      return fn.apply(this, subArgs);
</span></span><span class=line><span class=cl>    } else {
</span></span><span class=line><span class=cl>      // If it does not meet the requirements, recurse to return the curried function and wait for the argument to be passed in
</span></span><span class=line><span class=cl>      return curry.call(this, fn, subArgs);
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>  };
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// es6 Implementation
</span></span><span class=line><span class=cl>function curry(fn, ...args) {
</span></span><span class=line><span class=cl>  return fn.length &lt;= args.length ? fn(...args) : curry.bind(null, fn, ...args);
</span></span><span class=line><span class=cl>}
</span></span></code></pre></td></tr></table></div></div><h2 id=implement-a-new-operator>Implement a new operator</h2><p>First, we need to understand what the new operator does:</p><p>Firstly, it creates an empty object.</p><p>To point the proto of the empty object to the prototype of the constructor.</p><p>It makes this point to the newly created object and execute the constructor.</p><p>If the execution result has a return value and it is an object, return the execution result, otherwise, return the newly created object.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>//</span> <span class=n>Code</span> <span class=n>implementation</span>
</span></span><span class=line><span class=cl><span class=n>function</span> <span class=n>my_new</span><span class=p>(</span><span class=n>fn</span><span class=p>,</span><span class=o>...</span><span class=n>arg</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=o>//</span> <span class=n>Firstly</span><span class=p>,</span> <span class=n>create</span> <span class=n>an</span> <span class=n>empty</span> <span class=n>object</span>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=n>obj</span> <span class=o>=</span> <span class=p>{};</span>
</span></span><span class=line><span class=cl>    <span class=o>//</span> <span class=n>To</span> <span class=n>point</span> <span class=n>the</span> <span class=n>proto</span> <span class=n>of</span> <span class=n>the</span> <span class=n>empty</span> <span class=n>object</span> <span class=n>to</span> <span class=n>the</span> <span class=n>prototype</span> <span class=n>of</span> <span class=n>the</span> <span class=n>constructor</span>
</span></span><span class=line><span class=cl>    <span class=ne>Object</span><span class=o>.</span><span class=n>setPrototypeOf</span><span class=p>(</span><span class=n>obj</span><span class=p>,</span> <span class=n>fn</span><span class=o>.</span><span class=n>prototype</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=o>//</span> <span class=n>It</span> <span class=n>makes</span> <span class=n>this</span> <span class=n>point</span> <span class=n>to</span> <span class=n>the</span> <span class=n>newly</span> <span class=n>created</span> <span class=n>object</span> <span class=ow>and</span> <span class=n>execute</span> <span class=n>the</span> <span class=n>constructor</span>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=n>result</span> <span class=o>=</span> <span class=n>fn</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=n>obj</span><span class=p>,</span><span class=n>arg</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=o>//</span> <span class=n>If</span> <span class=n>the</span> <span class=n>execution</span> <span class=n>result</span> <span class=n>has</span> <span class=n>a</span> <span class=k>return</span> <span class=n>value</span> <span class=ow>and</span> <span class=n>it</span> <span class=n>is</span> <span class=n>an</span> <span class=n>object</span><span class=p>,</span> <span class=k>return</span> <span class=n>the</span> <span class=n>execution</span> <span class=n>result</span><span class=p>,</span> <span class=n>otherwise</span><span class=p>,</span> <span class=k>return</span> <span class=n>the</span> <span class=n>newly</span> <span class=n>created</span> <span class=n>object</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>result</span> <span class=n>instanceof</span> <span class=ne>Object</span> <span class=err>?</span> <span class=n>result</span> <span class=p>:</span> <span class=n>obj</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>Validate</span> <span class=n>my_new</span> <span class=n>function</span>
</span></span><span class=line><span class=cl><span class=n>function</span> <span class=n>Dog</span><span class=p>(</span><span class=n>name</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=n>this</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>this</span><span class=o>.</span><span class=n>say</span> <span class=o>=</span> <span class=n>function</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>        <span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=s1>&#39;my name is&#39;</span> <span class=o>+</span> <span class=n>this</span><span class=o>.</span><span class=n>name</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>dog</span> <span class=o>=</span> <span class=n>my_new</span><span class=p>(</span><span class=n>Dog</span><span class=p>,</span> <span class=s2>&#34;Shawn&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>dog</span><span class=o>.</span><span class=n>say</span><span class=p>()</span> <span class=o>//</span><span class=n>my</span> <span class=n>name</span> <span class=n>is</span> <span class=n>Shawn</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=can-you-talk-about-promise-and-can-you-implement-it-by-handwriting>Can you talk about Promise, and can you implement it by handwriting?</h2><p>Promise is a solution to asynchronous programming, which is more reasonable and powerful than traditional solutions ‚Äî callback functions and events. It was first proposed and implemented by the community, ES6 wrote it into the language standard, unified its usage, and provided Promise object natively.</p><p>Promise, simply put, is a container that holds the result of an event (usually an asynchronous operation) that will only end in the future. From a syntactic point of view, Promise is an object from which you can get messages about asynchronous operations. Promise provides a unified API, and various asynchronous operations can be handled in the same way.</p><p>Let‚Äôs look at the basic principles of the Promise we are familiar with</p><ul><li><p>First of all, when we call Promise, it will return a Promise object.</p></li><li><p>When constructing a Promise object, you need to pass in an executor function. The main business process of Promise is executed in the executor function.</p></li><li><p>If the business running in the executor function is successful, it will call the resolve function; if it fails, it will call the reject function.</p></li><li><p>The status of Promise is irreversible. If you call the resolve function and the reject function at the same time, the result of the first call will be adopted by default.</p></li></ul><p><strong>Considering the Promise/A+ specification, we can also analyze some basic features</strong></p><p>The Promise/A+ specification is quite extensive, here are a few key points for reference. <a class=link href=https://promisesaplus.com/ target=_blank rel=noopener>Promise/A+ specification</a></p><ul><li><p>Promise has three states: pending, fulfilled, and rejected. The default state is pending.</p></li><li><p>Promise has a value to save the successful state value and a reason to save the failed state value. It can be undefined/thenable/promise.</p></li><li><p>Promises can only go from pending to rejected, or from pending to fulfilled. Once the state is confirmed, it will not change.</p></li><li><p>Promise must have a then method, which accepts two parameters, one is the onFulfilled callback for success, and the other is the onRejected callback for failure.</p></li><li><p>If an exception is thrown in the then, it will pass this exception as a parameter to the next then‚Äôs onRejected callback.</p></li></ul><p>So CustomPromise, can&rsquo;t implement the basic principles of 3, 4. So let&rsquo;s analyze what&rsquo;s missing based on the basic principles and Promise/A+:</p><ul><li><p>Promise has three states: pending, fulfilled, and rejected.</p></li><li><p>The executor calls two methods: reject and resolve</p></li><li><p>You also need variables to save the values ‚Äã‚Äãof success or failure</p></li><li><p>Then accepts two parameters, onFulfilled for successful callbacks and onRejected for failed callbacks.</p></li></ul><p>Manually implement promise:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span><span class=lnt>163
</span><span class=lnt>164
</span><span class=lnt>165
</span><span class=lnt>166
</span><span class=lnt>167
</span><span class=lnt>168
</span><span class=lnt>169
</span><span class=lnt>170
</span><span class=lnt>171
</span><span class=lnt>172
</span><span class=lnt>173
</span><span class=lnt>174
</span><span class=lnt>175
</span><span class=lnt>176
</span><span class=lnt>177
</span><span class=lnt>178
</span><span class=lnt>179
</span><span class=lnt>180
</span><span class=lnt>181
</span><span class=lnt>182
</span><span class=lnt>183
</span><span class=lnt>184
</span><span class=lnt>185
</span><span class=lnt>186
</span><span class=lnt>187
</span><span class=lnt>188
</span><span class=lnt>189
</span><span class=lnt>190
</span><span class=lnt>191
</span><span class=lnt>192
</span><span class=lnt>193
</span><span class=lnt>194
</span><span class=lnt>195
</span><span class=lnt>196
</span><span class=lnt>197
</span><span class=lnt>198
</span><span class=lnt>199
</span><span class=lnt>200
</span><span class=lnt>201
</span><span class=lnt>202
</span><span class=lnt>203
</span><span class=lnt>204
</span><span class=lnt>205
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>const</span> <span class=n>PENDING</span> <span class=o>=</span> <span class=s2>&#34;pending&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>FULFILLED</span> <span class=o>=</span> <span class=s2>&#34;fulfilled&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>REJECTED</span> <span class=o>=</span> <span class=s2>&#34;rejected&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=n>CustomPromise</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>constructor</span><span class=p>(</span><span class=n>executor</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>executor</span><span class=p>(</span><span class=n>this</span><span class=o>.</span><span class=n>resolve</span><span class=p>,</span> <span class=n>this</span><span class=o>.</span><span class=n>reject</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=n>catch</span> <span class=p>(</span><span class=n>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=o>//</span> <span class=n>If</span> <span class=n>there</span> <span class=n>is</span> <span class=n>an</span> <span class=n>error</span><span class=p>,</span> <span class=n>execute</span> <span class=n>reject</span> <span class=n>directly</span>
</span></span><span class=line><span class=cl>      <span class=n>this</span><span class=o>.</span><span class=n>reject</span><span class=p>(</span><span class=n>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=o>//</span> <span class=n>Why</span> <span class=n>use</span> <span class=n>arrow</span> <span class=n>functions</span> <span class=k>for</span> <span class=n>resolve</span> <span class=ow>and</span> <span class=n>reject</span><span class=err>?</span>
</span></span><span class=line><span class=cl>  <span class=o>//</span> <span class=n>If</span> <span class=n>directly</span> <span class=n>called</span><span class=p>,</span> <span class=n>the</span> <span class=n>this</span> <span class=n>pointer</span> <span class=n>of</span> <span class=n>the</span> <span class=n>regular</span> <span class=n>function</span> <span class=n>points</span> <span class=n>to</span> <span class=n>window</span> <span class=ow>or</span> <span class=n>undefined</span>
</span></span><span class=line><span class=cl>  <span class=o>//</span> <span class=n>Using</span> <span class=n>arrow</span> <span class=n>function</span> <span class=n>can</span> <span class=n>let</span> <span class=n>this</span> <span class=n>point</span> <span class=n>to</span> <span class=n>the</span> <span class=n>current</span> <span class=n>object</span> <span class=n>instance</span>
</span></span><span class=line><span class=cl>  <span class=n>resolve</span> <span class=o>=</span> <span class=p>(</span><span class=n>value</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=o>//</span> <span class=n>Promise</span> <span class=n>can</span> <span class=n>only</span> <span class=n>go</span> <span class=n>from</span> <span class=n>pending</span> <span class=n>to</span> <span class=n>rejected</span><span class=p>,</span> <span class=ow>or</span> <span class=n>from</span> <span class=n>pending</span> <span class=n>to</span> <span class=n>fulfilled</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>this</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=n>PENDING</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>this</span><span class=o>.</span><span class=n>status</span> <span class=o>=</span> <span class=n>FULFILLED</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=n>this</span><span class=o>.</span><span class=n>value</span> <span class=o>=</span> <span class=n>value</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>      <span class=o>//</span> <span class=n>In</span> <span class=n>resolve</span><span class=p>,</span> <span class=n>all</span> <span class=n>successful</span> <span class=n>callbacks</span> <span class=n>are</span> <span class=n>taken</span> <span class=n>out</span> <span class=ow>and</span> <span class=n>executed</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=n>this</span><span class=o>.</span><span class=n>onResolvedCallbacks</span><span class=o>.</span><span class=n>length</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>this</span><span class=o>.</span><span class=n>onResolvedCallbacks</span><span class=o>.</span><span class=n>forEach</span><span class=p>((</span><span class=n>fn</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=n>fn</span><span class=p>());</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=n>reject</span> <span class=o>=</span> <span class=p>(</span><span class=n>err</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=o>//</span> <span class=n>Promise</span> <span class=n>can</span> <span class=n>only</span> <span class=n>go</span> <span class=n>from</span> <span class=n>pending</span> <span class=n>to</span> <span class=n>rejected</span><span class=p>,</span> <span class=ow>or</span> <span class=n>from</span> <span class=n>pending</span> <span class=n>to</span> <span class=n>fulfilled</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>this</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=n>PENDING</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>this</span><span class=o>.</span><span class=n>status</span> <span class=o>=</span> <span class=n>REJECTED</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=n>this</span><span class=o>.</span><span class=n>reason</span> <span class=o>=</span> <span class=n>err</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=o>//</span> <span class=n>In</span> <span class=n>reject</span><span class=p>,</span> <span class=n>all</span> <span class=n>failed</span> <span class=n>callbacks</span> <span class=n>are</span> <span class=n>taken</span> <span class=n>out</span> <span class=ow>and</span> <span class=n>executed</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=n>this</span><span class=o>.</span><span class=n>onFulfilledCallbacks</span><span class=o>.</span><span class=n>length</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>this</span><span class=o>.</span><span class=n>onFulfilledCallbacks</span><span class=o>.</span><span class=n>forEach</span><span class=p>((</span><span class=n>fn</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=n>fn</span><span class=p>());</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=o>//</span> <span class=n>Storing</span> <span class=n>successful</span> <span class=n>callback</span> <span class=n>functions</span>
</span></span><span class=line><span class=cl>  <span class=n>onResolvedCallbacks</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>  <span class=o>//</span> <span class=n>Storing</span> <span class=n>failed</span> <span class=n>callback</span> <span class=n>functions</span>
</span></span><span class=line><span class=cl>  <span class=n>onFulfilledCallbacks</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>status</span> <span class=o>=</span> <span class=n>PENDING</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=o>//</span> <span class=n>Value</span> <span class=n>after</span> <span class=n>success</span>
</span></span><span class=line><span class=cl>  <span class=n>value</span> <span class=o>=</span> <span class=n>undefined</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=o>//</span> <span class=n>Value</span> <span class=n>after</span> <span class=n>failure</span>
</span></span><span class=line><span class=cl>  <span class=n>reason</span> <span class=o>=</span> <span class=n>undefined</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>then</span><span class=p>(</span><span class=n>onFulfilled</span><span class=p>,</span> <span class=n>onRejected</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=o>//</span> <span class=n>If</span> <span class=ow>not</span> <span class=n>passed</span><span class=p>,</span> <span class=n>the</span> <span class=n>default</span> <span class=n>function</span> <span class=n>is</span> <span class=n>used</span> <span class=n>to</span> <span class=n>ensure</span> <span class=n>it</span> <span class=n>is</span> <span class=n>a</span> <span class=n>function</span> <span class=n>type</span>
</span></span><span class=line><span class=cl>    <span class=n>onFulfilled</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>      <span class=nb>typeof</span> <span class=n>onFulfilled</span> <span class=o>===</span> <span class=s2>&#34;function&#34;</span> <span class=err>?</span> <span class=n>onFulfilled</span> <span class=p>:</span> <span class=p>(</span><span class=n>value</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=n>value</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>onRejected</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>      <span class=nb>typeof</span> <span class=n>onRejected</span> <span class=o>===</span> <span class=s2>&#34;function&#34;</span>
</span></span><span class=line><span class=cl>        <span class=err>?</span> <span class=n>onRejected</span>
</span></span><span class=line><span class=cl>        <span class=p>:</span> <span class=p>(</span><span class=n>reason</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>throw</span> <span class=n>reason</span><span class=p>;</span>
</span></span><span class=line><span class=cl>          <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=n>thenCustomPromise</span> <span class=o>=</span> <span class=n>new</span> <span class=n>CustomPromise</span><span class=p>((</span><span class=n>resolve</span><span class=p>,</span> <span class=n>reject</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>const</span> <span class=n>resolveCustomPromise</span> <span class=o>=</span> <span class=p>(</span><span class=n>callBack</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=k>const</span> <span class=n>x</span> <span class=o>=</span> <span class=n>callBack</span><span class=p>(</span><span class=n>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>          <span class=o>//</span> <span class=n>If</span> <span class=n>it</span> <span class=n>is</span> <span class=n>equal</span><span class=p>,</span> <span class=n>it</span> <span class=n>means</span> <span class=n>that</span> <span class=n>it</span> <span class=n>returns</span> <span class=n>itself</span><span class=p>,</span> <span class=n>throws</span> <span class=n>a</span> <span class=n>type</span> <span class=n>error</span> <span class=ow>and</span> <span class=n>returns</span>
</span></span><span class=line><span class=cl>          <span class=k>if</span> <span class=p>(</span><span class=n>resolveCustomPromise</span> <span class=o>===</span> <span class=n>x</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>reject</span><span class=p>(</span><span class=n>new</span> <span class=n>TypeError</span><span class=p>(</span><span class=s2>&#34;Type Error&#34;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>          <span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=o>//</span> <span class=n>Determine</span> <span class=k>if</span> <span class=n>x</span> <span class=n>is</span> <span class=n>a</span> <span class=n>CustomPromise</span> <span class=n>instance</span> <span class=n>object</span>
</span></span><span class=line><span class=cl>          <span class=k>if</span> <span class=p>(</span><span class=n>x</span> <span class=n>instanceof</span> <span class=n>CustomPromise</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=o>//</span> <span class=n>Execute</span> <span class=n>x</span> <span class=ow>and</span> <span class=n>call</span> <span class=n>the</span> <span class=n>then</span> <span class=n>method</span> <span class=n>to</span> <span class=n>make</span> <span class=n>its</span> <span class=n>state</span> <span class=n>fulfilled</span> <span class=ow>or</span> <span class=n>rejected</span>
</span></span><span class=line><span class=cl>            <span class=o>//</span> <span class=n>x</span><span class=o>.</span><span class=n>then</span><span class=p>(</span><span class=n>value</span> <span class=o>=&gt;</span> <span class=n>resolve</span><span class=p>(</span><span class=n>value</span><span class=p>),</span> <span class=n>error</span> <span class=o>=&gt;</span> <span class=n>reject</span><span class=p>(</span><span class=n>reason</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=o>//</span> <span class=n>Simplified</span> <span class=n>as</span>
</span></span><span class=line><span class=cl>            <span class=n>x</span><span class=o>.</span><span class=n>then</span><span class=p>(</span><span class=n>resolve</span><span class=p>,</span> <span class=n>reject</span><span class=p>);</span>
</span></span><span class=line><span class=cl>          <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=o>//</span> <span class=n>Ordinary</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>            <span class=n>resolve</span><span class=p>(</span><span class=n>x</span><span class=p>);</span>
</span></span><span class=line><span class=cl>          <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=n>catch</span> <span class=p>(</span><span class=n>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=n>reject</span><span class=p>(</span><span class=n>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>};</span>
</span></span><span class=line><span class=cl>      <span class=o>//</span> <span class=n>Need</span> <span class=n>to</span> <span class=n>judge</span> <span class=n>the</span> <span class=n>status</span><span class=p>,</span> <span class=n>choose</span> <span class=n>the</span> <span class=n>processing</span> <span class=n>callback</span> <span class=n>function</span> <span class=n>according</span> <span class=n>to</span> <span class=n>the</span> <span class=n>status</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=n>this</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=n>FULFILLED</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>resolveCustomPromise</span><span class=p>(</span><span class=n>onFulfilled</span><span class=p>,</span> <span class=n>this</span><span class=o>.</span><span class=n>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=n>this</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=n>REJECTED</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>resolveCustomPromise</span><span class=p>(</span><span class=n>onRejected</span><span class=p>,</span> <span class=n>this</span><span class=o>.</span><span class=n>reason</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=n>this</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=n>PENDING</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=o>//</span> <span class=n>When</span> <span class=n>the</span> <span class=n>status</span> <span class=n>is</span> <span class=n>pending</span><span class=p>,</span> <span class=n>push</span> <span class=n>the</span> <span class=n>then</span> <span class=n>callback</span> <span class=n>into</span> <span class=n>the</span> <span class=n>resolve</span><span class=o>/</span><span class=n>reject</span> <span class=n>execution</span> <span class=n>queue</span> <span class=ow>and</span> <span class=n>wait</span> <span class=k>for</span> <span class=n>execution</span>
</span></span><span class=line><span class=cl>        <span class=n>this</span><span class=o>.</span><span class=n>onResolvedCallbacks</span><span class=o>.</span><span class=n>push</span><span class=p>(()</span> <span class=o>=&gt;</span>
</span></span><span class=line><span class=cl>          <span class=n>resolveCustomPromise</span><span class=p>(</span><span class=n>onFulfilled</span><span class=p>,</span> <span class=n>this</span><span class=o>.</span><span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>this</span><span class=o>.</span><span class=n>onFulfilledCallbacks</span><span class=o>.</span><span class=n>push</span><span class=p>(()</span> <span class=o>=&gt;</span>
</span></span><span class=line><span class=cl>          <span class=n>resolveCustomPromise</span><span class=p>(</span><span class=n>onRejected</span><span class=p>,</span> <span class=n>this</span><span class=o>.</span><span class=n>reason</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>thenCustomPromise</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=n>catch</span><span class=p>(</span><span class=n>onFulfilled</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>this</span><span class=o>.</span><span class=n>then</span><span class=p>(</span><span class=n>null</span><span class=p>,</span> <span class=n>onFulfilled</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=n>finally</span><span class=p>(</span><span class=n>callback</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>this</span><span class=o>.</span><span class=n>then</span><span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=n>value</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=n>CustomPromise</span><span class=o>.</span><span class=n>resolve</span><span class=p>(</span><span class=n>callback</span><span class=p>())</span><span class=o>.</span><span class=n>then</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=n>value</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=n>reason</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=n>CustomPromise</span><span class=o>.</span><span class=n>resolve</span><span class=p>(</span><span class=n>callback</span><span class=p>())</span><span class=o>.</span><span class=n>then</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=n>reason</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=o>//</span><span class=n>Static</span> <span class=n>resolve</span> <span class=n>method</span>
</span></span><span class=line><span class=cl>  <span class=k>static</span> <span class=n>resolve</span><span class=p>(</span><span class=n>value</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>value</span> <span class=n>instanceof</span> <span class=n>CustomPromise</span><span class=p>)</span> <span class=k>return</span> <span class=n>value</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>new</span> <span class=n>CustomPromise</span><span class=p>((</span><span class=n>resolve</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=n>resolve</span><span class=p>(</span><span class=n>value</span><span class=p>));</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=o>//</span><span class=n>Static</span> <span class=n>reject</span> <span class=n>method</span>
</span></span><span class=line><span class=cl>  <span class=k>static</span> <span class=n>reject</span><span class=p>(</span><span class=n>reason</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>new</span> <span class=n>CustomPromise</span><span class=p>((</span><span class=n>resolve</span><span class=p>,</span> <span class=n>reject</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=n>reject</span><span class=p>(</span><span class=n>reason</span><span class=p>));</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=o>//</span><span class=n>Static</span> <span class=n>all</span> <span class=n>method</span>
</span></span><span class=line><span class=cl>  <span class=k>static</span> <span class=n>all</span><span class=p>(</span><span class=n>values</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=o>//</span> <span class=n>Used</span> <span class=n>to</span> <span class=n>record</span> <span class=n>the</span> <span class=n>number</span> <span class=n>of</span> <span class=n>successful</span> <span class=n>promises</span>
</span></span><span class=line><span class=cl>    <span class=n>let</span> <span class=n>resolveCount</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=o>//</span> <span class=n>Used</span> <span class=n>to</span> <span class=n>save</span> <span class=n>the</span> <span class=n>results</span> <span class=n>of</span> <span class=n>successful</span> <span class=n>promises</span>
</span></span><span class=line><span class=cl>    <span class=n>resolveDataList</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>new</span> <span class=n>CustomPromise</span><span class=p>((</span><span class=n>resolve</span><span class=p>,</span> <span class=n>reject</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>function</span> <span class=n>addPromise</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>resolveDataList</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>resolveCount</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>resolveCount</span> <span class=o>===</span> <span class=n>values</span><span class=o>.</span><span class=n>length</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=n>resolve</span><span class=p>(</span><span class=n>resolveDataList</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=k>for</span> <span class=p>(</span><span class=n>let</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>values</span><span class=o>.</span><span class=n>length</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>let</span> <span class=n>item</span> <span class=o>=</span> <span class=n>values</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>item</span> <span class=n>instanceof</span> <span class=n>CustomPromise</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=o>//</span> <span class=n>The</span> <span class=n>parameter</span> <span class=n>is</span> <span class=n>Promise</span>
</span></span><span class=line><span class=cl>          <span class=n>item</span><span class=o>.</span><span class=n>then</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=p>(</span><span class=n>value</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=n>addPromise</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>value</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=p>(</span><span class=n>error</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=n>reject</span><span class=p>(</span><span class=n>error</span><span class=p>)</span>
</span></span><span class=line><span class=cl>          <span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=o>//</span> <span class=n>The</span> <span class=n>parameter</span> <span class=n>is</span> <span class=n>an</span> <span class=n>ordinary</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>          <span class=n>addPromise</span><span class=p>(</span><span class=n>i</span><span class=p>,</span> <span class=n>item</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=o>//</span><span class=n>Static</span> <span class=n>race</span> <span class=n>method</span>
</span></span><span class=line><span class=cl>  <span class=k>static</span> <span class=n>race</span><span class=p>(</span><span class=n>values</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>new</span> <span class=n>CustomPromise</span><span class=p>((</span><span class=n>resolve</span><span class=p>,</span> <span class=n>reject</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>for</span> <span class=p>(</span><span class=k>const</span> <span class=n>p</span> <span class=n>of</span> <span class=n>values</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>p</span><span class=o>.</span><span class=n>then</span><span class=p>(</span><span class=n>resolve</span><span class=p>,</span> <span class=n>reject</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=o>//</span><span class=n>Static</span> <span class=n>allSettled</span> <span class=n>method</span>
</span></span><span class=line><span class=cl>  <span class=k>static</span> <span class=n>allSettled</span><span class=p>(</span><span class=n>values</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>new</span> <span class=n>Promise</span><span class=p>((</span><span class=n>resolve</span><span class=p>,</span> <span class=n>reject</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>let</span> <span class=n>resolveDataList</span> <span class=o>=</span> <span class=p>[],</span>
</span></span><span class=line><span class=cl>        <span class=n>resolveCount</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>const</span> <span class=n>addPromise</span> <span class=o>=</span> <span class=p>(</span><span class=n>status</span><span class=p>,</span> <span class=n>value</span><span class=p>,</span> <span class=n>i</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>resolveDataList</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=n>status</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=n>value</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>};</span>
</span></span><span class=line><span class=cl>        <span class=n>resolveCount</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>resolveCount</span> <span class=o>===</span> <span class=n>values</span><span class=o>.</span><span class=n>length</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=n>resolve</span><span class=p>(</span><span class=n>resolveDataList</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>};</span>
</span></span><span class=line><span class=cl>      <span class=n>values</span><span class=o>.</span><span class=n>forEach</span><span class=p>((</span><span class=n>value</span><span class=p>,</span> <span class=n>i</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>value</span> <span class=n>instanceof</span> <span class=n>CustomPromise</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=n>value</span><span class=o>.</span><span class=n>then</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=p>(</span><span class=n>res</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>              <span class=n>addPromise</span><span class=p>(</span><span class=s2>&#34;fulfilled&#34;</span><span class=p>,</span> <span class=n>res</span><span class=p>,</span> <span class=n>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=p>(</span><span class=n>err</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>              <span class=n>addPromise</span><span class=p>(</span><span class=s2>&#34;rejected&#34;</span><span class=p>,</span> <span class=n>err</span><span class=p>,</span> <span class=n>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=n>addPromise</span><span class=p>(</span><span class=s2>&#34;fulfilled&#34;</span><span class=p>,</span> <span class=n>value</span><span class=p>,</span> <span class=n>i</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=o>//</span><span class=n>Static</span> <span class=n>any</span> <span class=n>method</span>
</span></span><span class=line><span class=cl>  <span class=k>static</span> <span class=n>any</span><span class=p>(</span><span class=n>values</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>new</span> <span class=n>CustomPromise</span><span class=p>((</span><span class=n>resolve</span><span class=p>,</span> <span class=n>reject</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>let</span> <span class=n>rejectCount</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=n>values</span><span class=o>.</span><span class=n>forEach</span><span class=p>((</span><span class=n>value</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>value</span><span class=o>.</span><span class=n>then</span><span class=p>(</span>
</span></span><span class=line><span class=cl>          <span class=p>(</span><span class=n>val</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=n>resolve</span><span class=p>(</span><span class=n>val</span><span class=p>),</span>
</span></span><span class=line><span class=cl>          <span class=p>(</span><span class=n>err</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>rejectCount</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>rejectCount</span> <span class=o>===</span> <span class=n>value</span><span class=o>.</span><span class=n>length</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>              <span class=n>reject</span><span class=p>(</span><span class=s2>&#34;All promises were rejected&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=what-is-asyncawait-and-how-does-it-work-can-async-be-handwritten>What is async/await and how does it work, can async be handwritten?</h2><p>Async ‚Äî Declaration of an asynchronous function</p><ul><li><p>Automatically converts regular functions to Promise, and the return value is also a Promise object.</p></li><li><p>Only after the asynchronous operation inside the async function is completed, then the callback function specified by the then method will be executed.</p></li><li><p>You can use await inside asynchronous functions.</p></li></ul><p>Await ‚Äî Pause the execution of asynchronous functions (var result = await someAsyncCall();)</p><ul><li><p>Placed before Promise calls, await forces other codes to wait until the Promise is completed and returns a result.</p></li><li><p>It can only be used with Promise, not with callbacks.</p></li><li><p>It can only be used inside async functions.</p></li></ul><h2 id=what-are-the-advantages-and-disadvantages-of-instanceof-and-how-is-it-implemented>What are the advantages and disadvantages of instanceof, and how is it implemented?</h2><p>Advantages and disadvantages:</p><p><strong>„ÄåAdvantages„Äç</strong>: Able to distinguish between Array, Object and Function, suitable for judging custom class instance objects</p><p><strong>„ÄåDisadvantages„Äç</strong>: Basic data types such as Number, Boolean, and String cannot be determined</p><p>Implementation steps:</p><ul><li><p>Pass in parameters as instance L on the left and constructor R on the right</p></li><li><p>Handle the boundary. If the object to be detected is of a basic type, return false</p></li><li><p>Get the prototype of the passed-in parameters separately</p></li><li><p>Determine whether the prototype on the left is null, if it is null, return false; if the prototype on both sides is equal, return true, otherwise continue to get the prototype of the prototype on the left.</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>//</span> <span class=n>The</span> <span class=n>parameters</span> <span class=n>passed</span> <span class=ow>in</span> <span class=n>are</span> <span class=n>instance</span> <span class=n>L</span> <span class=n>on</span> <span class=n>the</span> <span class=n>left</span> <span class=ow>and</span> <span class=n>constructor</span> <span class=n>R</span> <span class=n>on</span> <span class=n>the</span> <span class=n>right</span>
</span></span><span class=line><span class=cl><span class=n>function</span> <span class=n>my_instanceof</span><span class=p>(</span><span class=n>L</span><span class=p>,</span> <span class=n>R</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=o>//</span> <span class=n>Handle</span> <span class=n>boundary</span><span class=p>:</span> <span class=n>check</span> <span class=k>if</span> <span class=n>the</span> <span class=n>instance</span> <span class=n>type</span> <span class=n>is</span> <span class=n>a</span> <span class=n>primitive</span> <span class=n>type</span>
</span></span><span class=line><span class=cl>  <span class=k>const</span> <span class=n>baseTypes</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;string&#34;</span><span class=p>,</span> <span class=s2>&#34;number&#34;</span><span class=p>,</span> <span class=s2>&#34;boolean&#34;</span><span class=p>,</span> <span class=s2>&#34;symbol&#34;</span><span class=p>,</span> <span class=s2>&#34;undefined&#34;</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=err>‚Äã</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=n>baseTypes</span><span class=o>.</span><span class=n>includes</span><span class=p>(</span><span class=nb>typeof</span> <span class=n>L</span><span class=p>)</span> <span class=o>||</span> <span class=n>L</span> <span class=o>===</span> <span class=n>null</span><span class=p>)</span> <span class=k>return</span> <span class=bp>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=err>‚Äã</span>
</span></span><span class=line><span class=cl>  <span class=o>//</span> <span class=n>Get</span> <span class=n>the</span> <span class=n>prototype</span> <span class=n>of</span> <span class=n>the</span> <span class=n>passing</span> <span class=n>parameters</span> <span class=n>separately</span>
</span></span><span class=line><span class=cl>  <span class=n>let</span> <span class=n>Lp</span> <span class=o>=</span> <span class=n>L</span><span class=o>.</span><span class=n>__proto__</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>let</span> <span class=n>Rp</span> <span class=o>=</span> <span class=n>R</span><span class=o>.</span><span class=n>prototype</span><span class=p>;</span> <span class=o>//</span> <span class=n>Only</span> <span class=n>functions</span> <span class=n>have</span> <span class=n>the</span> <span class=n>prototype</span> <span class=n>property</span>
</span></span><span class=line><span class=cl><span class=err>‚Äã</span>
</span></span><span class=line><span class=cl>  <span class=o>//</span> <span class=n>Judge</span> <span class=n>the</span> <span class=n>prototype</span>
</span></span><span class=line><span class=cl>  <span class=k>while</span> <span class=p>(</span><span class=bp>true</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>Lp</span> <span class=o>===</span> <span class=n>null</span><span class=p>)</span> <span class=k>return</span> <span class=bp>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>Lp</span> <span class=o>===</span> <span class=n>Rp</span><span class=p>)</span> <span class=k>return</span> <span class=bp>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>Lp</span> <span class=o>=</span> <span class=n>Lp</span><span class=o>.</span><span class=n>__proto__</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>validate</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>isArray</span> <span class=o>=</span> <span class=n>mu_instanceof</span><span class=p>([],</span><span class=ne>Array</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>isArray</span><span class=p>);</span> <span class=o>//</span><span class=bp>true</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>isDate</span> <span class=o>=</span> <span class=n>mu_instanceof</span><span class=p>(</span><span class=s1>&#39;2023-01-09&#39;</span><span class=p>,</span><span class=n>Date</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>isDate</span><span class=p>);</span> <span class=o>//</span> <span class=bp>false</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=throttling-and-debounce-in-javascript>Throttling and Debounce in JavaScript</h2><h3 id=debounce>Debounce</h3><p>Function debounce is to execute the callback after the event is triggered for n seconds. If it is ‚Äòtriggered within n seconds‚Äô, then ‚Äòretime‚Äô.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>function debounce(fn, wait) {
</span></span><span class=line><span class=cl>  let timeout;
</span></span><span class=line><span class=cl>  return function () {
</span></span><span class=line><span class=cl>    clearTimeout(timeout);
</span></span><span class=line><span class=cl>    timeout = setTimeout(() =&gt; {
</span></span><span class=line><span class=cl>      fn.apply(this, arguments);
</span></span><span class=line><span class=cl>    }, wait);
</span></span><span class=line><span class=cl>  };
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// Test
</span></span><span class=line><span class=cl>function handle() {
</span></span><span class=line><span class=cl>  console.log(Math.random());
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>// When the window size changes, trigger the debounce function and execute the handle function
</span></span><span class=line><span class=cl>window.addEventListener(&#39;resize&#39;, debounce(handle, 1000));
</span></span></code></pre></td></tr></table></div></div><h3 id=throttle>Throttle</h3><p>When an event is triggered, it ensures that the function is only called once within a certain time period. For example, when scrolling the page, send a request every once in a while.</p><p>Implementation steps:</p><ul><li><p>Pass in parameters for execute function fn and wait time wait.</p></li><li><p>Save initial time now.</p></li><li><p>Return a function, if it exceeds the waiting time, execute the function and update now to the current time.</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>function</span> <span class=n>throttle</span><span class=p>(</span><span class=n>fn</span><span class=p>,</span> <span class=n>wait</span><span class=p>,</span> <span class=o>...</span><span class=n>args</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>var</span> <span class=n>pre</span> <span class=o>=</span> <span class=n>Date</span><span class=o>.</span><span class=n>now</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=o>//</span> <span class=n>The</span> <span class=n>function</span> <span class=n>may</span> <span class=n>have</span> <span class=n>parameters</span>
</span></span><span class=line><span class=cl>    <span class=k>var</span> <span class=n>context</span> <span class=o>=</span> <span class=n>this</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>var</span> <span class=n>now</span> <span class=o>=</span> <span class=n>Date</span><span class=o>.</span><span class=n>now</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>now</span> <span class=o>-</span> <span class=n>pre</span> <span class=o>&gt;=</span> <span class=n>wait</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=o>//</span> <span class=n>Point</span> <span class=n>the</span> <span class=s1>&#39;this&#39;</span> <span class=n>of</span> <span class=n>the</span> <span class=n>execution</span> <span class=n>function</span> <span class=n>to</span> <span class=n>the</span> <span class=n>current</span> <span class=n>scope</span>
</span></span><span class=line><span class=cl>      <span class=n>fn</span><span class=o>.</span><span class=n>apply</span><span class=p>(</span><span class=n>context</span><span class=p>,</span> <span class=n>args</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=n>pre</span> <span class=o>=</span> <span class=n>Date</span><span class=o>.</span><span class=n>now</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>Test</span>
</span></span><span class=line><span class=cl><span class=k>var</span> <span class=n>name</span> <span class=o>=</span> <span class=s1>&#39;mu&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>function</span> <span class=n>handle</span><span class=p>(</span><span class=n>val</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>val</span> <span class=o>+</span> <span class=n>this</span><span class=o>.</span><span class=n>name</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>Scroll</span> <span class=n>the</span> <span class=n>mouse</span><span class=p>,</span> <span class=n>trigger</span> <span class=n>the</span> <span class=n>throttle</span> <span class=n>function</span> <span class=ow>and</span> <span class=n>execute</span> <span class=n>the</span> <span class=n>handle</span> <span class=n>function</span>
</span></span><span class=line><span class=cl><span class=n>window</span><span class=o>.</span><span class=n>addEventListener</span><span class=p>(</span><span class=s1>&#39;scroll&#39;</span><span class=p>,</span> <span class=n>throttle</span><span class=p>(</span><span class=n>handle</span><span class=p>,</span> <span class=mi>1000</span><span class=p>,</span> <span class=s1>&#39;mu&#39;</span><span class=p>));</span>
</span></span></code></pre></td></tr></table></div></div></section><footer class=article-footer><section class=article-tags><a href=/tags/javascript/>Javascript</a>
<a href=/tags/vue/>Vue</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/understanding-keepalive-in-vue3/><div class=article-image><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SNKB1Duz47DDtnG1.png loading=lazy data-key data-hash=https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SNKB1Duz47DDtnG1.png></div><div class=article-details><h2 class=article-title>Understanding KeepAlive in Vue3</h2></div></a></article><article class=has-image><a href=/p/understanding-v-memo-in-vue3/><div class=article-image><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mHgmXlGtuB6aLKdr.jpg loading=lazy data-key data-hash=https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mHgmXlGtuB6aLKdr.jpg></div><div class=article-details><h2 class=article-title>Understanding v-memo in Vue3</h2></div></a></article><article class=has-image><a href=/p/understanding-suspense-in-vue3/><div class=article-image><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/0*J3V7D8PQIiGwlztx.jpeg loading=lazy data-key data-hash=https://miro.medium.com/v2/resize:fit:1400/format:webp/0*J3V7D8PQIiGwlztx.jpeg></div><div class=article-details><h2 class=article-title>Understanding Suspense in Vue3</h2></div></a></article><article class=has-image><a href=/p/understanding-reactive-isreactive-and-shallowreactive-in-vue3/><div class=article-image><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Lf_gf2uitG3fuTvg.jpg loading=lazy data-key data-hash=https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Lf_gf2uitG3fuTvg.jpg></div><div class=article-details><h2 class=article-title>Understanding reactive, isReactive and shallowReactive in Vue3</h2></div></a></article><article class=has-image><a href=/p/vue3-api-overview/><div class=article-image><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jiE6x4r2qIl3C2PBHdDsug.png loading=lazy data-key data-hash=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jiE6x4r2qIl3C2PBHdDsug.png></div><div class=article-details><h2 class=article-title>vue3 API¬†Overview</h2></div></a></article></div></div></aside><script src=https://giscus.app/client.js data-repo=kxming/skstory data-repo-id=R_kgDOLehX4A data-category=Announcements data-category-id=DIC_kwDOLehX4M4Cd4Vx data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=en-us data-loading crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){setGiscusTheme(document.documentElement.dataset.scheme==="light"?"light":"dark_dimmed")}})()</script><footer class=site-footer><section class=copyright>&copy;
2024 SK Story</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.29.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>