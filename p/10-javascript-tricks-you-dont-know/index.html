<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="As one of the most popular languages, JavaScript‚Äôs syntax is flexible and continuously absorbs new features each year...."><title>10 JavaScript Tricks You Don‚Äôt Know</title>
<link rel=canonical href=https://www.skstory.online/p/10-javascript-tricks-you-dont-know/><link rel=stylesheet href=/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css><meta property='og:title' content="10 JavaScript Tricks You Don‚Äôt Know"><meta property='og:description' content="As one of the most popular languages, JavaScript‚Äôs syntax is flexible and continuously absorbs new features each year...."><meta property='og:url' content='https://www.skstory.online/p/10-javascript-tricks-you-dont-know/'><meta property='og:site_name' content='SK Story'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='Javascript'><meta property='article:published_time' content='2024-02-16T16:22:38+08:00'><meta property='article:modified_time' content='2024-02-16T16:22:38+08:00'><meta property='og:image' content='https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ESMQv6s2ta9iDO9H3ChVlg.png'><meta name=twitter:site content="@https://twitter.com/ShawnKxming"><meta name=twitter:creator content="@https://twitter.com/ShawnKxming"><meta name=twitter:title content="10 JavaScript Tricks You Don‚Äôt Know"><meta name=twitter:description content="As one of the most popular languages, JavaScript‚Äôs syntax is flexible and continuously absorbs new features each year...."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ESMQv6s2ta9iDO9H3ChVlg.png'><link rel="shortcut icon" href=/favicon.ico></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu1157332405703967761.jpeg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>üç•</span></figure><div class=site-meta><h1 class=site-name><a href=/>SK Story</a></h1><h2 class=site-description>Shawn King's Stories Website</h2></div></header><ol class=menu-social><li><a href=mailto:kxming0229@gmail.com target=_blank title=Email rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-mail"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7a2 2 0 012-2h14a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V7z"/><path d="M3 7l9 6 9-6"/></svg></a></li><li><a href=https://www.facebook.com/p/King-Shawn-100092679065959/ target=_blank title=Facebook rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-facebook"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 10v4h3v7h4v-7h3l1-4h-4V8a1 1 0 011-1h3V3h-3a5 5 0 00-5 5v2H7"/></svg></a></li><li><a href=https://twitter.com/ShawnKxming target=_blank title=Twitter rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4l11.733 16H20L8.267 4z"/><path d="M4 20l6.768-6.768m2.46-2.46L20 4"/></svg></a></li><li><a href=https://t.me/shawnkxming target=_blank title=Telegram rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-telegram"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 10l-4 4 6 6 4-16-18 7 4 2 2 6 3-4"/></svg></a></li><li><a href=https://medium.com/@kxming target=_blank title=Medium rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-medium"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4m0 2a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2z"/><path d="M8 9h1l3 3 3-3h1"/><path d="M8 15h2"/><path d="M14 15h2"/><path d="M9 9v6"/><path d="M15 9v6"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#using-flatmap>Using flatMap</a></li><li><a href=#array-method-order>Array Method Order</a></li><li><a href=#make-full-use-of-reduce>Make full use of reduce</a></li><li><a href=#make-full-use-of-generator>Make full use of generator</a></li><li><a href=#making-good-use-of-console>Making Good Use of Console</a></li><li><a href=#deep-copy-with-structuredclone>Deep Copy with structuredClone()</a></li><li><a href=#tagged-templates>Tagged Templates</a></li><li><a href=#nullish-coalescing-operator>Nullish Coalescing Operator??</a></li><li><a href=#use-symbols-as-keys-in-weakmap>Use Symbols as Keys in WeakMap</a></li><li><a href=#functional-programming>Functional Programming</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/10-javascript-tricks-you-dont-know/><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ESMQv6s2ta9iDO9H3ChVlg.png loading=lazy alt="Featured image of post 10 JavaScript Tricks You Don‚Äôt Know"></a></div><div class=article-details><header class=article-category><a href=/categories/javascript/ style=background-color:#d1d419;color:#fff>Javascript</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/10-javascript-tricks-you-dont-know/>10 JavaScript Tricks You Don‚Äôt Know</a></h2><h3 class=article-subtitle>As one of the most popular languages, JavaScript‚Äôs syntax is flexible and continuously absorbs new features each year....</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Feb 16, 2024</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>13 minute read</time></div></footer></div></header><section class=article-content><p>As one of the most popular languages, JavaScript‚Äôs syntax is flexible and continuously absorbs new features each year. Even seasoned professionals occasionally come across some underestimated JavaScript features and tricks. This article will share these tricks for discussion and exploration.</p><h2 id=using-flatmap>Using flatMap</h2><p>Although some JavaScript methods are barely known, they possess the potential to enhance coding efficiency by resolving unique challenges, such as flatMap().</p><p>The array method flatMap() is essentially a combination of map() and flat(). The difference is that flatMap can only flatten 1 level, while flat can specify the number of levels to flatten. FlatMap is slightly more efficient than calling these two methods separately.</p><p><strong>Using flat + map</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>const</span> <span class=n>arr</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>],</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=p>[</span><span class=mi>8</span><span class=p>]];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>Use</span> <span class=n>map</span> <span class=n>to</span> <span class=n>operate</span> <span class=n>on</span> <span class=n>each</span> <span class=n>element</span> <span class=ow>and</span> <span class=n>use</span> <span class=n>flat</span> <span class=n>to</span> <span class=n>flatten</span> <span class=n>the</span> <span class=n>result</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>result</span> <span class=o>=</span> <span class=n>arr</span><span class=o>.</span><span class=n>map</span><span class=p>(</span><span class=n>element</span> <span class=o>=&gt;</span> <span class=ne>Array</span><span class=o>.</span><span class=n>isArray</span><span class=p>(</span><span class=n>element</span><span class=p>)</span> <span class=err>?</span> <span class=n>element</span> <span class=p>:</span> <span class=p>[</span><span class=n>element</span><span class=p>])</span><span class=o>.</span><span class=n>flat</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>result</span><span class=p>);</span> <span class=o>//</span> <span class=n>output</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>]</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>Using flatMap</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>const</span> <span class=n>arr</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>],</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=p>[</span><span class=mi>8</span><span class=p>]]</span> <span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>arr</span><span class=o>.</span><span class=n>flatMap</span><span class=p>((</span><span class=n>element</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=n>element</span><span class=p>));</span> 
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>output</span> <span class=p>:[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>]</span>
</span></span></code></pre></td></tr></table></div></div><p>Although flatMap is a method, it still generates an intermediate array (which refers to a temporary array created for garbage collection). FlatMap is highly suitable for use in scenarios requiring flexibility and readability.</p><h2 id=array-method-order>Array Method Order</h2><p>javascript has dozens of array methods that can be used in combination. They look something like this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>const</span> <span class=n>numbers</span> <span class=o>=</span> <span class=p>[</span><span class=mi>9</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>7</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>Sort</span> <span class=n>only</span> <span class=k>for</span> <span class=n>odd</span> <span class=n>numbers</span> <span class=ow>and</span> <span class=n>raise</span> <span class=n>them</span> <span class=n>to</span> <span class=n>the</span> <span class=n>power</span> <span class=n>of</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=n>numbers</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=n>sort</span><span class=p>((</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=n>a</span> <span class=o>-</span> <span class=n>b</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=n>filter</span><span class=p>((</span><span class=n>n</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=n>n</span> <span class=o>%</span> <span class=mi>2</span> <span class=o>!==</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=n>map</span><span class=p>((</span><span class=n>n</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=n>n</span> <span class=o>**</span> <span class=mi>3</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>The above code looks good, but there is an issue ‚Äî sorting is done for the array before filtering. If the filtering is done before the sorting, we can accomplish fewer tasks, thereby optimizing the code.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>const</span> <span class=n>numbers</span> <span class=o>=</span> <span class=p>[</span><span class=mi>9</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>6</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>8</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>7</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>numbers</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=n>filter</span><span class=p>((</span><span class=n>n</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=n>n</span> <span class=o>%</span> <span class=mi>2</span> <span class=o>!==</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=n>sort</span><span class=p>((</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=n>a</span> <span class=o>-</span> <span class=n>b</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=n>map</span><span class=p>((</span><span class=n>n</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=n>n</span> <span class=o>**</span> <span class=mi>3</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=make-full-use-of-reduce>Make full use of reduce</h2><p>When writing JavaScript, sometimes we need to provide data in a key-value grouping format. Most developers will use the .forEach() method or map() method, similar to this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>fetch</span><span class=p>(</span><span class=s2>&#34;https://jsonplaceholder.typicode.com/todos/&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=n>then</span><span class=p>(</span><span class=n>res</span><span class=o>=&gt;</span><span class=n>res</span><span class=o>.</span><span class=n>json</span><span class=p>())</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=n>then</span><span class=p>(</span><span class=n>todos</span><span class=o>=&gt;</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=o>//</span> <span class=n>using</span> <span class=n>forEach</span><span class=p>()</span> <span class=ow>or</span> <span class=n>Map</span>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=n>todosForUserMap</span> <span class=o>=</span> <span class=p>{};</span>
</span></span><span class=line><span class=cl>    <span class=n>todos</span><span class=o>.</span><span class=n>forEach</span><span class=p>(</span><span class=n>todo</span><span class=o>=&gt;</span><span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=n>todosForUserMap</span><span class=p>[</span><span class=n>todo</span><span class=o>.</span><span class=n>userId</span><span class=p>]){</span>
</span></span><span class=line><span class=cl>        <span class=n>todosForUserMap</span><span class=p>[</span><span class=n>todo</span><span class=o>.</span><span class=n>userId</span><span class=p>]</span><span class=o>.</span><span class=n>push</span><span class=p>(</span><span class=n>todo</span><span class=p>);</span>  
</span></span><span class=line><span class=cl>      <span class=p>}</span><span class=k>else</span><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>todosForUserMap</span><span class=p>[</span><span class=n>todo</span><span class=o>.</span><span class=n>userId</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span><span class=n>todo</span><span class=p>];</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>  
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>todosForUserMap</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>Here, it‚Äôs better to use forEach rather than the map method, because the map method returns a new array, and the performance overhead of array creation and value assignment is relatively large, especially when the data volume is large, this will not happen in forEach.</p><p>Another quite clean and readable method is using the reduce method from the array:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>fetch</span><span class=p>(</span><span class=s2>&#34;https://jsonplaceholder.typicode.com/todos/&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=n>then</span><span class=p>(</span><span class=n>res</span><span class=o>=&gt;</span><span class=n>res</span><span class=o>.</span><span class=n>json</span><span class=p>())</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=n>then</span><span class=p>(</span><span class=n>todos</span><span class=o>=&gt;</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=o>//</span> <span class=n>using</span> <span class=n>reduce</span>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=n>todosForUserMap</span> <span class=o>=</span> <span class=n>todos</span><span class=o>.</span><span class=n>reduce</span><span class=p>((</span><span class=n>accumulator</span><span class=p>,</span> <span class=n>todo</span><span class=p>)</span><span class=o>=&gt;</span><span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=n>accumulator</span><span class=p>[</span><span class=n>todo</span><span class=o>.</span><span class=n>userId</span><span class=p>])</span> <span class=n>accumulator</span><span class=p>[</span><span class=n>todo</span><span class=o>.</span><span class=n>userId</span><span class=p>]</span><span class=o>.</span><span class=n>push</span><span class=p>(</span><span class=n>todo</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>accumulator</span><span class=p>[</span><span class=n>todo</span><span class=o>.</span><span class=n>userId</span><span class=p>])</span> <span class=n>accumulator</span><span class=p>[</span><span class=n>todo</span><span class=o>.</span><span class=n>userId</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span><span class=n>todo</span><span class=p>];</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=n>accumulator</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>},{})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>todosForUserMap</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><p>Note how we‚Äôre using an empty object {} as the initial value for the reduce operation. This object becomes the new accumulator.</p><h2 id=make-full-use-of-generator>Make full use of generator</h2><p>Generators and iterators might be the least frequently used code by JavaScript developers, as their knowledge is confined to coding interviews. (Because there‚Äôs a better syntax sugar async/await? üòÇ)</p><p>The generator is a powerful method to control asynchronous programming, generate iterable objects and multiple values. Generators are different from traditional functions. They can start and stop execution many times. That allows them to generate a lot of values ‚Äã‚Äãand to continue their execution later, which makes them extremely suitable for managing asynchronous operations, constructing iterators, and dealing with endless data streams.</p><p>Imagine a scenario where the amount of data from the database/API might be infinite, and you need to transfer them to the front-end, how would you do it?</p><p>In this case, the most common solution in react is infinite loading. If it is in node or native JS, how would you implement a function like infinite loading.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>async</span> <span class=n>function</span> <span class=o>*</span><span class=n>fetchProducts</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>  <span class=k>while</span> <span class=p>(</span><span class=bp>true</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=n>productUrl</span> <span class=o>=</span> <span class=s2>&#34;https://fakestoreapi.com/products?limit=2&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=n>res</span> <span class=o>=</span> <span class=n>await</span> <span class=n>fetch</span><span class=p>(</span><span class=n>productUrl</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=n>data</span> <span class=o>=</span> <span class=n>await</span> <span class=n>res</span><span class=o>.</span><span class=n>json</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nb>yield</span> <span class=n>data</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>//</span> <span class=n>Update</span> <span class=n>the</span> <span class=n>user</span> <span class=n>interface</span> <span class=n>here</span>
</span></span><span class=line><span class=cl>        <span class=o>//</span> <span class=n>Or</span> <span class=n>save</span> <span class=n>it</span> <span class=ow>in</span> <span class=n>a</span> <span class=n>database</span> <span class=ow>or</span> <span class=n>elsewhere</span>
</span></span><span class=line><span class=cl>        <span class=o>//</span> <span class=n>Use</span> <span class=n>this</span> <span class=k>for</span> <span class=n>side</span> <span class=n>effects</span>
</span></span><span class=line><span class=cl>        <span class=o>//</span> <span class=n>Interrupt</span> <span class=n>the</span> <span class=n>process</span> <span class=k>if</span> <span class=n>some</span> <span class=n>conditions</span> <span class=n>match</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>async</span> <span class=n>function</span> <span class=n>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>const</span> <span class=n>itr</span> <span class=o>=</span> <span class=n>fetchProducts</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=o>//</span> <span class=n>This</span> <span class=n>should</span> <span class=n>be</span> <span class=n>called</span> <span class=n>based</span> <span class=n>on</span> <span class=n>the</span> <span class=n>user</span> <span class=n>interaction</span>
</span></span><span class=line><span class=cl>        <span class=o>//</span> <span class=n>Or</span> <span class=n>other</span> <span class=n>tricks</span><span class=p>,</span> <span class=n>because</span> <span class=n>you</span> <span class=n>don</span><span class=s1>&#39;t want it to load indefinitely.</span>
</span></span><span class=line><span class=cl>  <span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span> <span class=n>await</span> <span class=n>itr</span><span class=o>.</span><span class=n>next</span><span class=p>()</span> <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=n>main</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><p>This is where iterators are really useful, instead of streaming a large amount of request data to local storage or some location. This is one of the ways to perform this operation using asynchronous generators, so we can solve the problem of infinite loading in JS.</p><h2 id=making-good-use-of-console>Making Good Use of Console</h2><p>Console is not just about console.log(). In actual production, a well-packaged log library will typically be used. The console object actually has many useful built-in methods, which can help you improve the quality and readability of your debugging output. Mastering them can help you debug and solve problems in your code more easily.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>//</span> <span class=mf>1.</span> <span class=n>console</span><span class=o>.</span><span class=n>time</span> <span class=ow>and</span> <span class=n>console</span><span class=o>.</span><span class=n>timeEnd</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>Measure</span> <span class=n>the</span> <span class=n>time</span> <span class=n>taken</span> <span class=n>to</span> <span class=n>execute</span> <span class=n>a</span> <span class=n>piece</span> <span class=n>of</span> <span class=n>code</span><span class=o>.</span> <span class=n>Identify</span> <span class=n>performance</span> <span class=n>bottlenecks</span> <span class=ow>in</span> <span class=n>the</span> <span class=n>code</span> <span class=ow>and</span> <span class=n>optimize</span> <span class=n>them</span>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>time</span><span class=p>(</span><span class=s1>&#39;Start fetching data&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>fetch</span><span class=p>(</span><span class=s1>&#39;https://reqres.in/api/users&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=n>then</span><span class=p>(</span><span class=n>response</span> <span class=o>=&gt;</span> <span class=n>response</span><span class=o>.</span><span class=n>json</span><span class=p>())</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=n>then</span><span class=p>(</span><span class=n>data</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>console</span><span class=o>.</span><span class=n>timeEnd</span><span class=p>(</span><span class=s1>&#39;Time spent fetching data:&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=o>//</span> <span class=o>...</span><span class=n>code</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=mf>2.</span> <span class=n>console</span><span class=o>.</span><span class=n>dir</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>The</span> <span class=n>console</span><span class=o>.</span><span class=n>dir</span> <span class=n>method</span> <span class=n>outputs</span> <span class=n>the</span> <span class=n>properties</span> <span class=n>of</span> <span class=n>an</span> <span class=n>object</span> <span class=ow>in</span> <span class=n>a</span> <span class=n>layered</span> <span class=n>format</span><span class=o>.</span> <span class=n>It</span> <span class=n>is</span> <span class=n>convenient</span> <span class=n>to</span> <span class=n>view</span> <span class=n>the</span> <span class=n>structure</span> <span class=n>of</span> <span class=n>the</span> <span class=n>object</span> <span class=n>as</span> <span class=n>well</span> <span class=n>as</span> <span class=n>all</span> <span class=n>its</span> <span class=n>properties</span> <span class=ow>and</span> <span class=n>methods</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>promise</span> <span class=o>=</span> <span class=n>new</span> <span class=n>Promise</span><span class=p>((</span><span class=n>resolve</span><span class=p>,</span> <span class=n>reject</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=n>resolve</span><span class=p>(</span><span class=s1>&#39;foo&#39;</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>dir</span><span class=p>(</span><span class=n>promise</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=mf>3.</span> <span class=n>console</span><span class=o>.</span><span class=n>count</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>Use</span> <span class=n>the</span> <span class=n>console</span><span class=o>.</span><span class=n>count</span> <span class=n>method</span> <span class=n>to</span> <span class=n>count</span> <span class=n>the</span> <span class=n>number</span> <span class=n>of</span> <span class=n>times</span> <span class=n>a</span> <span class=n>specific</span> <span class=nb>log</span> <span class=n>message</span> <span class=n>is</span> <span class=n>output</span><span class=o>.</span> <span class=n>This</span> <span class=n>is</span> <span class=n>very</span> <span class=n>useful</span> <span class=k>for</span> <span class=n>tracking</span> <span class=n>the</span> <span class=n>number</span> <span class=n>of</span> <span class=n>times</span> <span class=n>a</span> <span class=n>specific</span> <span class=n>code</span> <span class=n>path</span> <span class=n>is</span> <span class=n>executed</span> <span class=ow>and</span> <span class=n>identifying</span> <span class=n>hotspots</span> <span class=ow>in</span> <span class=n>the</span> <span class=n>code</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>fun</span> <span class=o>=</span> <span class=p>(</span><span class=n>x</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=n>console</span><span class=o>.</span><span class=n>count</span><span class=p>(</span><span class=n>x</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>fun</span><span class=p>(</span><span class=s1>&#39;Keqing&#39;</span><span class=p>);</span> <span class=o>//</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>fun</span><span class=p>(</span><span class=s1>&#39;Ganyu&#39;</span><span class=p>);</span> <span class=o>//</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>fun</span><span class=p>(</span><span class=s1>&#39;Keqing&#39;</span><span class=p>);</span> <span class=o>//</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=mf>4.</span> <span class=n>console</span><span class=o>.</span><span class=n>trace</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>trace</span> <span class=n>can</span> <span class=n>output</span> <span class=n>stack</span> <span class=n>traces</span><span class=o>.</span> <span class=n>It</span> <span class=n>is</span> <span class=n>very</span> <span class=n>useful</span> <span class=k>for</span> <span class=n>understanding</span> <span class=n>the</span> <span class=n>execution</span> <span class=n>flow</span> <span class=ow>in</span> <span class=n>the</span> <span class=n>code</span> <span class=ow>and</span> <span class=n>identifying</span> <span class=n>the</span> <span class=n>source</span> <span class=n>of</span> <span class=n>a</span> <span class=n>specific</span> <span class=nb>log</span> <span class=n>message</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>foo</span> <span class=o>=</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=n>console</span><span class=o>.</span><span class=n>trace</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>bar</span> <span class=o>=</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=n>foo</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=n>bar</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=mf>5.</span> <span class=n>console</span><span class=o>.</span><span class=n>profile</span> <span class=n>profileEnd</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>Measure</span> <span class=n>the</span> <span class=n>performance</span> <span class=n>of</span> <span class=n>a</span> <span class=n>block</span> <span class=n>of</span> <span class=n>code</span><span class=o>.</span> <span class=n>This</span> <span class=n>is</span> <span class=n>very</span> <span class=n>useful</span> <span class=k>for</span> <span class=n>identifying</span> <span class=n>performance</span> <span class=n>bottlenecks</span> <span class=ow>and</span> <span class=n>optimizing</span> <span class=n>code</span> <span class=n>to</span> <span class=n>improve</span> <span class=n>speed</span> <span class=ow>and</span> <span class=n>efficiency</span><span class=o>.</span>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>profile</span><span class=p>(</span><span class=s1>&#39;MyProfile&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>Code</span> <span class=n>you</span> <span class=n>want</span> <span class=n>to</span> <span class=n>measure</span> <span class=n>performance</span> <span class=n>on</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=n>let</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>100000</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=o>//</span> <span class=o>...</span><span class=n>code</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>profileEnd</span><span class=p>(</span><span class=s1>&#39;MyProfile&#39;</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=deep-copy-with-structuredclone>Deep Copy with structuredClone()</h2><p>Previously, if a developer wanted to do a deep copy of an object, they usually had to rely on a third-party library or manually implement a deep copy, or adopt a hack like const cloneObj = JSON.parse(JSON.stringify(obj));. But it had a lot of shortcomings when dealing with more complex objects containing circular references or data types that don&rsquo;t conform to JSON (such as Map and Set, Blob, etc.)</p><p>Now, JavaScript has a built-in method called structuredClone(). This method provides a simple and effective way to deep clone objects and is suitable for most modern browsers and Node.js v17 and above.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>//</span> <span class=n>Pass</span> <span class=n>the</span> <span class=n>original</span> <span class=n>object</span> <span class=n>to</span> <span class=n>this</span> <span class=n>function</span> <span class=ow>and</span> <span class=n>it</span> <span class=n>will</span> <span class=k>return</span> <span class=n>a</span> <span class=n>deep</span> <span class=n>copy</span> <span class=n>with</span> <span class=n>different</span> <span class=n>references</span> <span class=ow>and</span> <span class=n>object</span> <span class=n>attribute</span> <span class=n>references</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>obj</span> <span class=o>=</span> <span class=p>{</span> <span class=n>name</span><span class=p>:</span> <span class=s1>&#39;Mike&#39;</span><span class=p>,</span> <span class=n>friends</span><span class=p>:</span> <span class=p>[{</span> <span class=n>name</span><span class=p>:</span> <span class=s1>&#39;Sam&#39;</span> <span class=p>}]</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>clonedObj</span> <span class=o>=</span> <span class=n>structuredClone</span><span class=p>(</span><span class=n>obj</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>obj</span><span class=o>.</span><span class=n>name</span> <span class=o>===</span> <span class=n>clonedObj</span><span class=p>);</span> <span class=o>//</span> <span class=bp>false</span>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>obj</span><span class=o>.</span><span class=n>friends</span> <span class=o>===</span> <span class=n>clonedObj</span><span class=o>.</span><span class=n>friends</span><span class=p>);</span> <span class=o>//</span> <span class=bp>false</span>
</span></span></code></pre></td></tr></table></div></div><p>Unlike the well-known JSON.parse(JSON.stringify()), structuredClone() allows you to clone circular references, which makes it the simplest method to use deep copy in JavaScript currently.</p><h2 id=tagged-templates>Tagged Templates</h2><p>Tagged Templates is a more advanced form of template strings (backticks) that allows you to parse template literals using functions.</p><p>I only learned about this advanced feature when Next.js 14 was released and people were talking about a certain pictureü´°. Although this feature was included in ES6 and has been around for 8 years!!! But I bet there are only a handful of people who know and have used this feature.</p><p>If you don‚Äôt understand how Tagged Templates work, let me briefly explain it with an example:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>const</span> <span class=n>checkCurrency</span> <span class=o>=</span> <span class=n>function</span> <span class=p>(</span><span class=n>currency</span><span class=p>,</span> <span class=n>amount</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>const</span> <span class=n>symbol</span> <span class=o>=</span> <span class=n>currency</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>===</span> <span class=s2>&#34;USD&#34;</span> <span class=err>?</span> <span class=s2>&#34;$&#34;</span> <span class=p>:</span> <span class=s2>&#34;¬•&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>currency</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=s2>&#34;--&#34;</span> <span class=p>,</span><span class=n>currency</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span><span class=o>//</span> <span class=n>Outputs</span><span class=p>:</span> <span class=n>USD</span> <span class=o>--</span> <span class=n>RMB</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=err>`</span><span class=o>$</span><span class=p>{</span><span class=n>symbol</span><span class=p>}</span><span class=o>$</span><span class=p>{</span><span class=n>amount</span><span class=p>}</span><span class=err>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>amount</span> <span class=o>=</span> <span class=mi>200</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>currency</span> <span class=o>=</span> <span class=n>checkCurrency</span><span class=err>`</span><span class=n>USD</span><span class=o>$</span><span class=p>{</span><span class=n>amount</span><span class=p>}</span><span class=n>RMB</span><span class=err>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>currency</span><span class=p>);</span> <span class=o>//</span> <span class=n>Outputs</span><span class=p>:</span> <span class=o>$</span><span class=mi>200</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=mf>1.</span> <span class=n>checkCurrency</span> <span class=n>is</span> <span class=n>a</span> <span class=n>function</span><span class=p>,</span> <span class=n>the</span> <span class=n>first</span> <span class=n>argument</span> <span class=n>currency</span> <span class=n>of</span> <span class=n>the</span> <span class=n>tagged</span> <span class=n>function</span> <span class=n>contains</span> <span class=n>an</span> <span class=n>array</span> <span class=n>of</span> <span class=n>string</span> <span class=n>values</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=mf>2.</span> <span class=n>The</span> <span class=n>array</span> <span class=n>of</span> <span class=n>strings</span> <span class=n>is</span> <span class=n>composed</span> <span class=n>of</span> <span class=n>the</span> <span class=n>strings</span> <span class=ow>in</span> <span class=n>the</span> <span class=n>tagged</span> <span class=n>template</span> <span class=ow>in</span><span class=err>`</span><span class=n>USD</span><span class=o>$</span><span class=p>{</span><span class=n>amount</span><span class=p>}</span><span class=n>RMB</span><span class=err>`</span><span class=p>,</span> <span class=n>which</span> <span class=n>contains</span> <span class=n>the</span> <span class=n>strings</span> <span class=n>USD</span> <span class=ow>and</span> <span class=n>RMB</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=mf>3.</span> <span class=n>So</span> <span class=n>currency</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=n>refers</span> <span class=n>to</span> <span class=n>the</span> <span class=n>first</span> <span class=n>string</span> <span class=n>USD</span><span class=p>,</span> <span class=ow>and</span> <span class=n>currency</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=n>corresponds</span> <span class=n>to</span> <span class=n>the</span> <span class=n>second</span> <span class=n>string</span> <span class=n>RMB</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=mf>4.</span> <span class=n>The</span> <span class=n>remaining</span> <span class=n>arguments</span> <span class=n>of</span> <span class=n>the</span> <span class=n>checkCurrency</span> <span class=n>function</span> <span class=n>are</span> <span class=n>then</span> <span class=n>inserted</span> <span class=n>directly</span> <span class=n>into</span> <span class=n>the</span> <span class=n>strings</span> <span class=n>according</span> <span class=n>to</span> <span class=n>the</span> <span class=n>respective</span> <span class=n>expressions</span><span class=p>,</span> <span class=n>such</span> <span class=n>as</span> <span class=n>amount</span> <span class=o>=</span> <span class=mi>200</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=mf>5.</span> <span class=n>Inside</span> <span class=n>the</span> <span class=n>checkCurrency</span> <span class=n>function</span><span class=p>,</span> <span class=n>it</span> <span class=n>checks</span> <span class=k>if</span> <span class=n>the</span> <span class=n>first</span> <span class=n>item</span> <span class=n>of</span> <span class=n>the</span> <span class=n>argument</span> <span class=n>array</span> <span class=n>is</span> <span class=s1>&#39;USD&#39;</span><span class=p>,</span> <span class=k>if</span> <span class=n>so</span><span class=p>,</span> <span class=n>it</span> <span class=n>selects</span> <span class=n>the</span> <span class=s2>&#34;$&#34;</span> <span class=n>symbol</span><span class=p>,</span> <span class=n>otherwise</span> <span class=n>it</span> <span class=n>chooses</span> <span class=s2>&#34;¬•&#34;</span><span class=o>.</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=mf>6.</span> <span class=n>The</span> <span class=n>function</span> <span class=n>internally</span> <span class=n>concatenates</span> <span class=n>symbol</span> <span class=ow>and</span> <span class=n>amount</span> <span class=n>to</span> <span class=k>return</span> <span class=n>a</span> <span class=n>new</span> <span class=n>string</span><span class=p>,</span> <span class=n>with</span> <span class=n>symbol</span> <span class=n>representing</span> <span class=n>the</span> <span class=n>currency</span> <span class=n>symbol</span> <span class=ow>and</span> <span class=n>amount</span> <span class=n>referring</span> <span class=n>to</span> <span class=n>the</span> <span class=n>money</span> <span class=n>passed</span> <span class=n>to</span> <span class=n>the</span> <span class=n>function</span><span class=o>.</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=mf>7.</span> <span class=n>The</span> <span class=n>returned</span> <span class=n>string</span> <span class=n>is</span> <span class=n>assigned</span> <span class=n>to</span> <span class=n>the</span> <span class=n>currency</span> <span class=n>constant</span><span class=p>,</span> <span class=n>so</span> <span class=n>the</span> <span class=nb>log</span> <span class=n>is</span> <span class=o>$</span><span class=mi>200</span>
</span></span></code></pre></td></tr></table></div></div><p>As you can see, the way Tagged Templates work is to pass all the strings in the template string to the first argument of the function as an array. The remaining arguments are then inserted directly into the strings according to the respective expressions. Tagged Templates pass literal strings and the results of expressions to the function, and then the function can operate and return them in a custom way. This allows developers to appropriately escape and verify inputs when building SQL queries, thus preventing SQL injection attacks.</p><p>Tagged template strings can be used for many purposes, such as security, i18n, and localization, etc.</p><h2 id=nullish-coalescing-operator>Nullish Coalescing Operator??</h2><p>The Nullish Coalescing Operator <code>??</code> is a logical operator that returns its right-hand operand when its left-hand operand is null or undefined, otherwise, it returns its left-hand operand.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>const</span> <span class=n>foo</span> <span class=o>=</span> <span class=n>null</span> <span class=err>??</span> <span class=s1>&#39;default string&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>foo</span><span class=p>);</span>  <span class=o>//</span><span class=n>output</span><span class=p>:</span> <span class=s2>&#34;default string&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>bar</span> <span class=o>=</span> <span class=mi>0</span> <span class=err>??</span> <span class=s1>&#39;default string&#39;</span>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>bar</span><span class=p>);</span>  <span class=o>//</span><span class=n>output</span><span class=p>:</span> <span class=mi>0</span>
</span></span></code></pre></td></tr></table></div></div><p>What‚Äôs worth mentioning about this? Is not <code>||</code> enough? Because one question that may confuse many people when learning JS is the difference between false and falsy, and the main difference between <code>??</code> and <code>||</code> lies in</p><p><code>??</code> operator only returns its right-hand operand if the left-hand operand is null or undefined.
<code>||</code> operator treats all falsy values ‚Äã‚Äãof its left operand‚Äôs result as its right operand.
Here are some examples:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>//</span> <span class=mf>1.</span> <span class=n>Using</span> <span class=mi>0</span> <span class=n>as</span> <span class=n>input</span> 
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=err>`</span><span class=n>a</span> <span class=o>||</span> <span class=mi>10</span> <span class=o>=</span> <span class=o>$</span><span class=p>{</span><span class=n>a</span> <span class=o>||</span> <span class=mi>10</span><span class=p>}</span><span class=err>`</span><span class=p>);</span> <span class=o>//</span> <span class=n>a</span> <span class=o>||</span> <span class=mi>10</span> <span class=o>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=err>`</span><span class=n>a</span> <span class=err>??</span> <span class=mi>10</span> <span class=o>=</span> <span class=o>$</span><span class=p>{</span><span class=n>a</span> <span class=err>??</span> <span class=mi>10</span><span class=p>}</span><span class=err>`</span><span class=p>);</span> <span class=o>//</span> <span class=n>a</span> <span class=err>??</span> <span class=mi>10</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=mf>2.</span> <span class=n>Using</span> <span class=n>an</span> <span class=n>empty</span> <span class=n>string</span> <span class=s1>&#39;&#39;</span> <span class=n>as</span> <span class=n>input</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>a</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=err>`</span><span class=n>a</span> <span class=o>||</span> <span class=s2>&#34;ABC&#34;</span> <span class=o>=</span> <span class=o>$</span><span class=p>{</span><span class=n>a</span> <span class=o>||</span> <span class=s2>&#34;ABC&#34;</span><span class=p>}</span><span class=err>`</span><span class=p>);</span> <span class=o>//</span> <span class=n>a</span> <span class=o>||</span> <span class=s2>&#34;ABC&#34;</span> <span class=o>=</span> <span class=n>ABC</span>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=err>`</span><span class=n>a</span> <span class=err>??</span> <span class=s2>&#34;ABC&#34;</span> <span class=o>=</span> <span class=o>$</span><span class=p>{</span><span class=n>a</span> <span class=err>??</span> <span class=s2>&#34;ABC&#34;</span><span class=p>}</span><span class=err>`</span><span class=p>);</span> <span class=o>//</span> <span class=n>a</span> <span class=err>??</span> <span class=s2>&#34;ABC&#34;</span> <span class=o>=</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=mf>3.</span> <span class=n>Using</span> <span class=n>null</span> <span class=n>as</span> <span class=n>input</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>a</span> <span class=o>=</span> <span class=n>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=err>`</span><span class=n>a</span> <span class=o>||</span> <span class=mi>10</span> <span class=o>=</span> <span class=o>$</span><span class=p>{</span><span class=n>a</span> <span class=o>||</span> <span class=mi>10</span><span class=p>}</span><span class=err>`</span><span class=p>);</span> <span class=o>//</span> <span class=n>a</span> <span class=o>||</span> <span class=mi>10</span> <span class=o>=</span> <span class=mi>10</span><span class=n>v</span>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=err>`</span><span class=n>a</span> <span class=err>??</span> <span class=mi>10</span> <span class=o>=</span> <span class=o>$</span><span class=p>{</span><span class=n>a</span> <span class=err>??</span> <span class=mi>10</span><span class=p>}</span><span class=err>`</span><span class=p>);</span> <span class=o>//</span> <span class=n>a</span> <span class=err>??</span> <span class=mi>10</span> <span class=o>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=mf>4.</span> <span class=n>Using</span> <span class=n>undefined</span> <span class=n>as</span> <span class=n>input</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>a</span> <span class=o>=</span> <span class=p>{</span><span class=n>name</span><span class=p>:</span> <span class=s1>&#39;&#39;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=err>`</span><span class=n>a</span><span class=o>.</span><span class=n>name</span> <span class=err>??</span> <span class=s1>&#39;varun 1&#39;</span> <span class=o>=</span> <span class=o>$</span><span class=p>{</span><span class=n>a</span><span class=o>.</span><span class=n>name</span> <span class=err>??</span> <span class=s1>&#39;varun 1&#39;</span><span class=p>}</span><span class=err>`</span><span class=p>);</span> 
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=err>`</span><span class=n>a</span><span class=o>.</span><span class=n>name</span> <span class=o>||</span> <span class=s1>&#39;varun 2&#39;</span> <span class=o>=</span> <span class=o>$</span><span class=p>{</span><span class=n>a</span><span class=o>.</span><span class=n>name</span> <span class=o>||</span> <span class=s1>&#39;varun 2&#39;</span><span class=p>}</span><span class=err>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>a</span><span class=o>.</span><span class=n>name</span> <span class=err>??</span> <span class=s1>&#39;varun 1&#39;</span> <span class=o>=</span> 
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>a</span><span class=o>.</span><span class=n>name</span> <span class=o>||</span> <span class=s1>&#39;varun 2&#39;</span> <span class=o>=</span> <span class=n>varun</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=mf>5.</span> <span class=n>Using</span> <span class=bp>false</span> <span class=n>as</span> <span class=n>input</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>a</span> <span class=o>=</span> <span class=bp>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=err>`</span><span class=n>a</span> <span class=o>||</span> <span class=mi>10</span> <span class=o>=</span> <span class=o>$</span><span class=p>{</span><span class=n>a</span> <span class=o>||</span> <span class=mi>10</span><span class=p>}</span><span class=err>`</span><span class=p>);</span> <span class=o>//</span> <span class=n>a</span> <span class=o>||</span> <span class=mi>10</span> <span class=o>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=err>`</span><span class=n>a</span> <span class=err>??</span> <span class=mi>10</span> <span class=o>=</span> <span class=o>$</span><span class=p>{</span><span class=n>a</span> <span class=err>??</span> <span class=mi>10</span><span class=p>}</span><span class=err>`</span><span class=p>);</span> <span class=o>//</span> <span class=n>a</span> <span class=err>??</span> <span class=mi>10</span> <span class=o>=</span> <span class=bp>false</span>
</span></span></code></pre></td></tr></table></div></div><p>For JS‚Äôs falsy value judgement, you can refer to this table: <a class=link href=https://dorey.github.io/JavaScript-Equality-Table/ target=_blank rel=noopener>JavaScript-Equality-Table/</a>.</p><h2 id=use-symbols-as-keys-in-weakmap>Use Symbols as Keys in WeakMap</h2><p>WeakMap is very similar to Map, but the difference is that its keys can only be objects or symbols, which are stored as weak references.</p><p>Why? Because the keys of a WeakMap must be garbage collectable. Most primitive data types can be freely created and have no lifecycle, so they can‚Äôt be used as keys. Objects and non-registered symbols can be used as keys because they can be garbage collected ‚Äî MDN- WeakMap.</p><p>This feature means that if there are no other references to the object in memory except for the key, JavaScript engine can perform garbage collection on the object when needed.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// Map
</span></span><span class=line><span class=cl>let user = { name: &#34;User&#34; };
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>let map = new Map();
</span></span><span class=line><span class=cl>map.set(user, &#34;Ketching&#34;);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>user = null; // Overwrite the reference by setting to null, &#39;user&#39; is stored internally in the map, which can be accessed through map.keys()
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// WeakMap
</span></span><span class=line><span class=cl>let user = { name: &#34;User&#34; };
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>let weakMap = new WeakMap();
</span></span><span class=line><span class=cl>weakMap.set(user, &#34;Ganyu&#34;);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>user = null; // With WeakMap, &#39;user&#39; has been deleted from memory 
</span></span></code></pre></td></tr></table></div></div><p>So, what is the use of a WeakMap? Given its characteristics, it can be inferred that WeakMap can be used for custom caching and detecting memory leaks.</p><p>By using objects as keys, you can associate cached values with specific objects. When the object is garbage collected, the corresponding WeakMap entry will be automatically deleted, immediately clearing the cache.</p><p>In ES14, it has become possible to use symbols as keys in WeakMap, which can make the role of key-value pairs in WeakMap more clear. Because the only primitive type that can be used as keys in WeakMap is the symbol, the symbol guarantees that the key is unique and cannot be recreated.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>let mySymbol = Symbol(&#39;mySymbol&#39;);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>let myWeakMap = new WeakMap();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>let obj = {
</span></span><span class=line><span class=cl>    name: &#39;Frontend Kitten Writer&#39;
</span></span><span class=line><span class=cl>};
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>myWeakMap.set(mySymbol, obj);
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>console.log(myWeakMap.get(mySymbol)); // Output: {name: &#39;Frontend Kitten Writer&#39;}
</span></span></code></pre></td></tr></table></div></div><h2 id=functional-programming>Functional Programming</h2><p>Since 2015, JavaScript versions have been updated, and this year (2023 ES14) is no exception.</p><p>The biggest update in ES14 is that many extra array methods have been added, or complementary methods that don‚Äôt cause mutation have been added to the existing array methods. That means they‚Äôll create new arrays based on the original ones rather than directly modifying the original arrays.</p><p>The new complementary methods are:</p><ul><li><p>Array.sort() -> Array.toSorted()</p></li><li><p>Array.splice() -> Array.toSpliced()</p></li><li><p>Array.reverse() -> Array.toReversed()</p></li></ul><p>The new array methods are:</p><ul><li><p>Array with()</p></li><li><p>Array.findLast()</p></li><li><p>Array.findLastIndex()</p></li></ul><p>The key theme of this year is Simpler Functional Programming (fp) and Immutability.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>//</span> <span class=n>For</span> <span class=n>example</span><span class=p>,</span> <span class=n>with</span> <span class=ne>Array</span><span class=o>.</span><span class=n>with</span><span class=p>(),</span> <span class=n>you</span> <span class=n>had</span> <span class=n>to</span> <span class=n>modify</span> <span class=n>a</span> <span class=n>value</span> <span class=n>of</span> <span class=n>an</span> <span class=n>array</span> <span class=n>with</span> <span class=n>arr</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=o>=</span> <span class=mi>3</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>This</span> <span class=n>causes</span> <span class=n>a</span> <span class=n>mutation</span><span class=o>.</span> <span class=n>This</span> <span class=n>is</span> <span class=n>impure</span><span class=o>!</span> <span class=n>Angry</span><span class=err>üí¢</span> <span class=n>But</span> <span class=n>with</span> <span class=n>the</span> <span class=n>new</span> <span class=n>array</span> <span class=n>methods</span> <span class=n>that</span> <span class=n>don</span><span class=s1>&#39;t cause mutations, you can write it like this:</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>arr</span> <span class=o>=</span> <span class=p>[</span><span class=mi>5</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>replaced</span> <span class=o>=</span> <span class=n>arr</span><span class=o>.</span><span class=n>with</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>replaced</span><span class=p>);</span>  <span class=o>//</span> <span class=p>[</span><span class=mi>5</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>1</span><span class=p>]</span>
</span></span></code></pre></td></tr></table></div></div></section><footer class=article-footer><section class=article-tags><a href=/tags/javascript/>Javascript</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/advanced-usage-of-reduce-you-might-not-know/><div class=article-image><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h7QTz6KqyeYG_ausGQjj5g.jpeg loading=lazy data-key data-hash=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h7QTz6KqyeYG_ausGQjj5g.jpeg></div><div class=article-details><h2 class=article-title>Advanced Usage of Reduce You Might Not Know</h2></div></a></article><article class=has-image><a href=/p/vue3-performance-optimization-code-level-optimization/><div class=article-image><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KZsES-HkGUvu6TkmfmNMBA.png loading=lazy data-key data-hash=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KZsES-HkGUvu6TkmfmNMBA.png></div><div class=article-details><h2 class=article-title>Vue3 Performance Optimization ‚Äî Code-Level Optimization</h2></div></a></article><article class=has-image><a href=/p/vue3-performance-optimization-bundle-optimization/><div class=article-image><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KZsES-HkGUvu6TkmfmNMBA.png loading=lazy data-key data-hash=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KZsES-HkGUvu6TkmfmNMBA.png></div><div class=article-details><h2 class=article-title>Vue3 Performance Optimization ‚Äî Bundle Optimization</h2></div></a></article><article class=has-image><a href=/p/how-much-do-you-know-about-29-javascript-object-methods/><div class=article-image><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l_w8hkehf25Nx3H_AzEVbQ.jpeg loading=lazy data-key data-hash=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l_w8hkehf25Nx3H_AzEVbQ.jpeg></div><div class=article-details><h2 class=article-title>How Much Do You Know About 29 JavaScript Object Methods?</h2></div></a></article><article class=has-image><a href=/p/most-of-the-books-youve-read-are-mostly-forgotten-so-why-keep-reading/><div class=article-image><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zm-09l_F3UwVf2IneHGHew.jpeg loading=lazy data-key data-hash=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zm-09l_F3UwVf2IneHGHew.jpeg></div><div class=article-details><h2 class=article-title>Most of the books you‚Äôve read are mostly forgotten, so why keep reading?</h2></div></a></article></div></div></aside><script src=https://giscus.app/client.js data-repo=kxming/skstory data-repo-id=R_kgDOLehX4A data-category=Announcements data-category-id=DIC_kwDOLehX4M4Cd4Vx data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=en-us data-loading crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){setGiscusTheme(document.documentElement.dataset.scheme==="light"?"light":"dark_dimmed")}})()</script><footer class=site-footer><section class=copyright>&copy;
2024 SK Story</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.29.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>