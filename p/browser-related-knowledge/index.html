<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="As the pages written by Web front-end engineers have to run in the browser, many browser-related interview questions will appear in the interview...."><title>Browser Related Knowledge</title>
<link rel=canonical href=https://www.skstory.online/p/browser-related-knowledge/><link rel=stylesheet href=/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css><meta property='og:title' content="Browser Related Knowledge"><meta property='og:description' content="As the pages written by Web front-end engineers have to run in the browser, many browser-related interview questions will appear in the interview...."><meta property='og:url' content='https://www.skstory.online/p/browser-related-knowledge/'><meta property='og:site_name' content='SK Story'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='Javascript'><meta property='article:published_time' content='2024-01-30T16:22:38+08:00'><meta property='article:modified_time' content='2024-01-30T16:22:38+08:00'><meta property='og:image' content='https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OZL33xhjFl0XFUmv'><meta name=twitter:site content="@https://twitter.com/ShawnKxming"><meta name=twitter:creator content="@https://twitter.com/ShawnKxming"><meta name=twitter:title content="Browser Related Knowledge"><meta name=twitter:description content="As the pages written by Web front-end engineers have to run in the browser, many browser-related interview questions will appear in the interview...."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OZL33xhjFl0XFUmv'><link rel="shortcut icon" href=/favicon.ico></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu1157332405703967761.jpeg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>üç•</span></figure><div class=site-meta><h1 class=site-name><a href=/>SK Story</a></h1><h2 class=site-description>Shawn King's Stories Website</h2></div></header><ol class=menu-social><li><a href=mailto:kxming0229@gmail.com target=_blank title=Email rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-mail"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7a2 2 0 012-2h14a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V7z"/><path d="M3 7l9 6 9-6"/></svg></a></li><li><a href=https://www.facebook.com/p/King-Shawn-100092679065959/ target=_blank title=Facebook rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-facebook"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 10v4h3v7h4v-7h3l1-4h-4V8a1 1 0 011-1h3V3h-3a5 5 0 00-5 5v2H7"/></svg></a></li><li><a href=https://twitter.com/ShawnKxming target=_blank title=Twitter rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4l11.733 16H20L8.267 4z"/><path d="M4 20l6.768-6.768m2.46-2.46L20 4"/></svg></a></li><li><a href=https://t.me/shawnkxming target=_blank title=Telegram rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-telegram"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 10l-4 4 6 6 4-16-18 7 4 2 2 6 3-4"/></svg></a></li><li><a href=https://medium.com/@kxming target=_blank title=Medium rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-medium"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4m0 2a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2z"/><path d="M8 9h1l3 3 3-3h1"/><path d="M8 15h2"/><path d="M14 15h2"/><path d="M9 9v6"/><path d="M15 9v6"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#loading-pages-and-rendering-process>Loading Pages and Rendering Process</a><ol><li><a href=#loading-process>Loading Process</a></li><li><a href=#rendering-process>Rendering Process</a></li></ol></li><li><a href=#performance-optimization>Performance Optimization</a><ol><li><a href=#optimization-principles-and-directions>Optimization Principles and Directions</a></li><li><a href=#reduce-page-size-improve-network-loading>Reduce Page Size, Improve Network Loading</a></li><li><a href=#optimize-page-rendering>Optimize Page Rendering</a></li><li><a href=#detailed-explanation>Detailed Explanation</a><ol><li><a href=#static-resource-caching>Static Resource Caching</a></li><li><a href=#use-cdn-to-make-resource-loading-faster>Use CDN to make resource loading faster</a></li><li><a href=#use-ssr-backend-rendering>Use SSR backend rendering</a></li><li><a href=#css-comes-first-js-comes-later>CSS comes first, JS comes later</a></li><li><a href=#lazy-loading>Lazy Loading</a></li><li><a href=#cache-dom-queries>Cache DOM queries</a></li><li><a href=#merge-dom-insertions>Merge DOM Insertions</a></li><li><a href=#event-throttling>Event Throttling</a></li><li><a href=#execute-operations-as-early-as-possible>Execute Operations as Early as Possible</a></li><li><a href=#how-to-do-performance-optimization>How to Do Performance Optimization?</a></li></ol></li></ol></li><li><a href=#web-security>Web Security</a><ol><li><a href=#xss-cross-site-scripting>XSS (Cross Site Scripting)</a></li><li><a href=#harm-of-xss>Harm of XSS</a></li><li><a href=#prevention-of-xss>Prevention of XSS</a></li><li><a href=#csrf-cross-site-request-forgery>CSRF (Cross-site request forgery)</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/browser-related-knowledge/><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OZL33xhjFl0XFUmv loading=lazy alt="Featured image of post Browser Related Knowledge"></a></div><div class=article-details><header class=article-category><a href=/categories/javascript/ style=background-color:#d1d419;color:#fff>Javascript</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/browser-related-knowledge/>Browser Related Knowledge</a></h2><h3 class=article-subtitle>As the pages written by Web front-end engineers have to run in the browser, many browser-related interview questions will appear in the interview....</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Jan 30, 2024</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>11 minute read</time></div></footer></div></header><section class=article-content><p>As the pages written by Web front-end engineers have to run in the browser, many browser-related interview questions will appear in the interview.</p><h1 id=knowledge-consolidation>Knowledge Consolidation</h1><ul><li><p>Browser loading and rendering process</p></li><li><p>Performance optimization</p></li><li><p>Web security</p></li></ul><p>This section will start with the browser‚Äôs loading process, then introduce how to optimize performance, and finally introduce common security issues and precautions in Web development.</p><hr><h2 id=loading-pages-and-rendering-process>Loading Pages and Rendering Process</h2><p>The loading process and rendering process can be divided into two parts. When answering questions, the key is to grasp the core points, cover all the points, with a little analysis, and be concise without dragging.</p><blockquote><p>Topic: The process of browser loading and rendering pages</p></blockquote><h3 id=loading-process>Loading Process</h3><p>The points are as follows:</p><ul><li><p>The browser gets the IP address of the domain name according to the DNS server</p></li><li><p>Send an HTTP request to the machine of this IP</p></li><li><p>The server receives, processes, and returns the HTTP request</p></li><li><p>The browser gets the returned content</p></li></ul><p>In fact, it is a bunch of HMTL formatted strings, because only the HTML format can be correctly parsed by the browser, which is required by W3C standards. Next is the browser‚Äôs rendering process.</p><h3 id=rendering-process>Rendering Process</h3><p>The points are as follows:</p><ul><li><p>Generate the DOM tree based on the HTML structure</p></li><li><p>Generate CSSOM based on CSS</p></li><li><p>Integrate DOM and CSSOM to form the RenderTree</p></li><li><p>Start rendering and displaying based on RenderTree</p></li><li><p>When you encounter a <code>&lt;script></code>, you will execute and block rendering</p></li></ul><p>In the previous paragraph, the browser has already obtained the HTML content returned from the server and starts parsing and rendering. The content initially obtained was simply a bunch of strings, they must first be structured into basic data structures that computers are good at processing, hence HTML strings are transformed to a DOM tree ‚Äî tree is one of the most basic data structures.</p><p>During the parsing process, if you encounter tags like <code>&lt;link href="..."></code> and <code>&lt;script src="..."></code> that load CSS and JS externally, the browser will download them asynchronously, the download process is the same as when downloading HTML content above. However, the downloaded strings are in CSS or JS format here.</p><p>The browser generates CSSOM from CSS, then integrates DOM and CSSOM to form the RenderTree, and then it can start rendering based on RenderTree. Think about it, if you have the DOM structure and styles, you can meet the rendering conditions at this time. In addition, this can also explain a question. <strong>Why should CSS be placed in the HTML header?</strong> This will allow the browser to get CSS as early as possible to generate CSSOM, and then generate the final RenderTree in one go after parsing HTML, rendering only once. If CSS is placed at the bottom of HTML, rendering stutter may occur, affecting performance and experience.</p><p>Finally, during the rendering process, if <code>&lt;script></code> is encountered, it will stop rendering and execute the JS code. Because browser rendering and JS execution share a thread, and there must be single-threaded operation here, multithreading can cause rendering DOM conflicts. After the content of <code>&lt;script></code> is executed, the browser continues to render. Finally, consider another question. <strong>Why should JS be placed at the bottom of HTML?</strong> Placing JS at the bottom can ensure that the browser prioritizes the rendering of existing HTML content, allowing users to see the content first, providing a good experience. Additionally, if JS execution involves DOM operations, it must wait for DOM parsing to complete. When JS is executed at the bottom, HTML is definitely parsed into a DOM structure. If JS is placed at the top of HTML, when JS is executed, HTML may not have time to be converted into a DOM structure, which may cause an error.</p><h2 id=performance-optimization>Performance Optimization</h2><p>Performance optimization is a common interview topic. This kind of topic has a lot of extensibility, can expand many small details, and poses a great challenge to personal technical vision and business capabilities. In this part, I will focus on the commonly used performance optimization solutions.</p><blockquote><p>Topic: Summarize the solutions for front-end performance optimization</p></blockquote><h3 id=optimization-principles-and-directions>Optimization Principles and Directions</h3><p>The principle of performance optimization is to use a better user experience as the standard, specifically to achieve the following goals:</p><ul><li><p>More use of memory, cache or other methods</p></li><li><p>Reduce CPU and GPU calculations for faster display</p></li></ul><p>There are two directions for optimization:</p><ul><li><p>Reduce page size, improve network loading</p></li><li><p>Optimize page rendering</p></li></ul><h3 id=reduce-page-size-improve-network-loading>Reduce Page Size, Improve Network Loading</h3><ul><li><p>Compression and merger of static resources (JS code compression and merger, CSS code compression and merger, sprite images)</p></li><li><p>Static resource caching (adding MD5 to resource names)</p></li><li><p>Use CDN to make resource loading faster</p></li></ul><h3 id=optimize-page-rendering>Optimize Page Rendering</h3><ul><li><p>Put CSS at the front, JS at the back</p></li><li><p>Lazy loading (image lazy loading, dropdown for more loading)</p></li><li><p>Reduce DOM queries, cache DOM queries</p></li><li><p>Reduce DOM operations, try to combine multiple operations to execute (use DocumentFragment)</p></li><li><p>Event throttling</p></li><li><p>Execute operations as early as possible (DOMContentLoaded)</p></li><li><p>Use SSR backend rendering, directly output the data to HTML, reduce the time for the browser to use JS templates to render page HTML</p></li></ul><h3 id=detailed-explanation>Detailed Explanation</h3><p>####Compression and merger of static resources</p><p>If not merged, each will go through the request process described before</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;script src=&#34;a.js&#34;&gt;&lt;/script&gt;
</span></span><span class=line><span class=cl>&lt;script src=&#34;b.js&#34;&gt;&lt;/script&gt;
</span></span><span class=line><span class=cl>&lt;script src=&#34;c.js&#34;&gt;&lt;/script&gt;
</span></span></code></pre></td></tr></table></div></div><p>If merged, only one request process is walked through</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;script src=&#34;abc.js&#34;&gt;&lt;/script&gt;
</span></span></code></pre></td></tr></table></div></div><h4 id=static-resource-caching>Static Resource Caching</h4><p>Control cache through link name</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;script src=&#34;abc_1.js&#34;&gt;&lt;/script&gt;
</span></span></code></pre></td></tr></table></div></div><p>Only when the content changes will the link name change</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;script src=&#34;abc_2.js&#34;&gt;&lt;/script&gt;
</span></span></code></pre></td></tr></table></div></div><p>This name doesn‚Äôt need to be manually changed, the front-end build tool can add an MD5 suffix to the file name based on the file content.</p><h4 id=use-cdn-to-make-resource-loading-faster>Use CDN to make resource loading faster</h4><p>The CDN will provide a professional loading optimization solution, and static resources should be placed on the CDN as much as possible. For example:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;script src=&#34;https://cdn.bootcss.com/zepto/1.0rc1/zepto.min.js&#34;&gt;&lt;/script&gt;
</span></span></code></pre></td></tr></table></div></div><h4 id=use-ssr-backend-rendering>Use SSR backend rendering</h4><p>Directly output HTML content in one time, and do not need to load data and render again through Ajax after the page is completely rendered. For example, using smarty, Vue SSR, etc.</p><h4 id=css-comes-first-js-comes-later>CSS comes first, JS comes later</h4><p>It has been mentioned when describing the browser rendering process above, so I won‚Äôt go into details here.</p><h4 id=lazy-loading>Lazy Loading</h4><p>Initially assign a universal preview image to the src, and then dynamically assign it to the official image when scrolling down. For example, preview.png is a preview image, which is relatively small, loads quickly, and many images share this preview.png, which can be loaded only once. When the page scrolls down and the image is displayed, it is replaced with the value of src as data-realsrc.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;img src=&#34;preview.png&#34; data-realsrc=&#34;abc.png&#34;/&gt;
</span></span></code></pre></td></tr></table></div></div><p>In addition, why should data- be used to start property values here? ‚Äî‚Äî All custom properties in HTML should start with data-, because the browser will ignore properties that start with data- when rendering, which can improve rendering performance.</p><h4 id=cache-dom-queries>Cache DOM queries</h4><p>Compare two code blocks:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>var</span> <span class=n>pList</span> <span class=o>=</span> <span class=n>document</span><span class=o>.</span><span class=n>getElementsByTagName</span><span class=p>(</span><span class=s1>&#39;p&#39;</span><span class=p>)</span>  <span class=o>//</span> <span class=n>Query</span> <span class=n>a</span> <span class=n>DOM</span> <span class=n>element</span> <span class=n>once</span> <span class=ow>and</span> <span class=n>cache</span> <span class=n>it</span> <span class=ow>in</span> <span class=n>pList</span>
</span></span><span class=line><span class=cl><span class=k>var</span> <span class=n>i</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>pList</span><span class=o>.</span><span class=n>length</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>javascript</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>var</span> <span class=n>i</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>document</span><span class=o>.</span><span class=n>getElementsByTagName</span><span class=p>(</span><span class=s1>&#39;p&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>length</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>  <span class=o>//</span> <span class=n>Each</span> <span class=n>loop</span> <span class=n>queries</span> <span class=n>the</span> <span class=n>DOM</span><span class=p>,</span> <span class=n>which</span> <span class=n>consumes</span> <span class=n>performance</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>In summary: both querying and modifying the DOM are performance-consuming operations, so try to reduce them as much as possible.</p><h4 id=merge-dom-insertions>Merge DOM Insertions</h4><p>DOM operations are highly performance-consuming, so when inserting multiple tags, first insert the Fragment and then insert into the DOM uniformly.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>var</span> <span class=n>listNode</span> <span class=o>=</span> <span class=n>document</span><span class=o>.</span><span class=n>getElementById</span><span class=p>(</span><span class=s1>&#39;list&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>To</span> <span class=n>insert</span> <span class=mi>10</span> <span class=n>li</span> <span class=n>tags</span>
</span></span><span class=line><span class=cl><span class=k>var</span> <span class=n>frag</span> <span class=o>=</span> <span class=n>document</span><span class=o>.</span><span class=n>createDocumentFragment</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=k>var</span> <span class=n>x</span><span class=p>,</span> <span class=n>li</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>for</span><span class=p>(</span><span class=n>x</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>x</span> <span class=o>&lt;</span> <span class=mi>10</span><span class=p>;</span> <span class=n>x</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>li</span> <span class=o>=</span> <span class=n>document</span><span class=o>.</span><span class=n>createElement</span><span class=p>(</span><span class=s2>&#34;li&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>li</span><span class=o>.</span><span class=n>innerHTML</span> <span class=o>=</span> <span class=s2>&#34;List item &#34;</span> <span class=o>+</span> <span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>frag</span><span class=o>.</span><span class=n>appendChild</span><span class=p>(</span><span class=n>li</span><span class=p>);</span>  <span class=o>//</span> <span class=n>First</span> <span class=n>put</span> <span class=ow>in</span> <span class=n>frag</span><span class=p>,</span> <span class=n>then</span> <span class=n>insert</span> <span class=n>into</span> <span class=n>DOM</span> <span class=n>structure</span> <span class=n>at</span> <span class=n>once</span><span class=o>.</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>listNode</span><span class=o>.</span><span class=n>appendChild</span><span class=p>(</span><span class=n>frag</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=event-throttling>Event Throttling</h4><p>For example, you need to trigger a change event when the text changes, which is monitored through keyup. Use throttling.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>var</span> <span class=n>textarea</span> <span class=o>=</span> <span class=n>document</span><span class=o>.</span><span class=n>getElementById</span><span class=p>(</span><span class=s1>&#39;text&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>var</span> <span class=n>timeoutId</span>
</span></span><span class=line><span class=cl><span class=n>textarea</span><span class=o>.</span><span class=n>addEventListener</span><span class=p>(</span><span class=s1>&#39;keyup&#39;</span><span class=p>,</span> <span class=n>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>timeoutId</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>clearTimeout</span><span class=p>(</span><span class=n>timeoutId</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>timeoutId</span> <span class=o>=</span> <span class=n>setTimeout</span><span class=p>(</span><span class=n>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=o>//</span> <span class=n>Trigger</span> <span class=n>change</span> <span class=n>event</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span> <span class=mi>100</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=execute-operations-as-early-as-possible>Execute Operations as Early as Possible</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>window</span><span class=o>.</span><span class=n>addEventListener</span><span class=p>(</span><span class=s1>&#39;load&#39;</span><span class=p>,</span> <span class=n>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=o>//</span> <span class=n>All</span> <span class=n>page</span> <span class=n>resources</span> <span class=n>must</span> <span class=n>be</span> <span class=n>loaded</span> <span class=n>before</span> <span class=n>executing</span><span class=p>,</span> <span class=n>including</span> <span class=n>images</span><span class=p>,</span> <span class=n>videos</span><span class=p>,</span> <span class=n>etc</span><span class=o>.</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=n>document</span><span class=o>.</span><span class=n>addEventListener</span><span class=p>(</span><span class=s1>&#39;DOMContentLoaded&#39;</span><span class=p>,</span> <span class=n>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=o>//</span> <span class=n>It</span> <span class=n>can</span> <span class=n>be</span> <span class=n>executed</span> <span class=n>once</span> <span class=n>the</span> <span class=n>DOM</span> <span class=n>is</span> <span class=n>rendered</span><span class=p>,</span> <span class=n>at</span> <span class=n>this</span> <span class=n>time</span><span class=p>,</span> <span class=n>images</span> <span class=ow>and</span> <span class=n>videos</span> <span class=n>may</span> <span class=ow>not</span> <span class=n>have</span> <span class=n>been</span> <span class=n>loaded</span> <span class=n>yet</span><span class=o>.</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=how-to-do-performance-optimization>How to Do Performance Optimization?</h4><p>The above are individual points of performance optimization. When implementing a performance optimization project, it should be promoted in the following steps:</p><ol><li><p>Establish a performance data collection platform, baseline the current performance data, and record the time consumption of the entire page opening process through performance points.</p></li><li><p>Analyze the reasons for the long time period, find the optimization points, and determine the optimization goals.</p></li><li><p>Start optimizing.</p></li><li><p>Record the optimization effect through the data collection platform.</p></li><li><p>Continually adjust optimization points and expected targets, and cycle stages 2 to 4.</p></li></ol><p>Performance optimization is a long-term task, not a one-time success. It should be done gradually based on the principle of base lining first, analyzing carefully, and optimizing last.</p><h2 id=web-security>Web Security</h2><blockquote><p>Topic: What are the common security issues in the front end?</p></blockquote><p>There are two major safety concerns in web front-end development. If you can answer the two questions below, you should be able to answer this question. But before beginning, let‚Äôs talk about a very simple attack method ‚Äî SQL Injection.</p><p>When I was in school, I knew about an attack method called ‚ÄúSQL Injection‚Äù. For example, when making a login interface for a system, entering a username and password, and submitting, the backend directly gets the data and splices the SQL statement to query the database. If malicious SQL assembly is performed at the time of input, the final generated SQL will be problematic. But now, somewhat large systems won‚Äôt do this. From submitting login information to finally getting authorization, there has to be multiple layers of validation. Therefore, SQL injections only happen in smaller, lower-end systems.</p><h3 id=xss-cross-site-scripting>XSS (Cross Site Scripting)</h3><p>This is the most common attack method in the front end, and many large websites (like Facebook) have been attacked by XSS.</p><p>For example, I post a normal article on a blogging website, inputting Chinese, English, and pictures, and there‚Äôs no problem. But if I write in malicious JS scripts, like getting document.cookie and then transmitting it to my own server, then every time my blog post is viewed, this script will execute and secretly pass the information in the visitor&rsquo;s cookies to my server.</p><p>In principle, the hacker inputs a specific JS code covertly in some way (publishing an article, commenting, etc.). Then, when other people read this article or comment, the JS code that was injected before executes. Once the JS code executes, it cannot be controlled, because it has the same permissions as the original JS on the web page, such as getting server-side data, getting cookies, etc. And that‚Äôs when the attack happens.</p><h3 id=harm-of-xss>Harm of XSS</h3><p>The harm of XSS is quite significant, and if a page can execute other‚Äôs unsafe JS code freely, it could cause the page to become chaotic or even lose functionality at a minimum, and at its worst, cause the user‚Äôs information to be exposed.</p><p>For example, in early years, social networking sites often had XSS worms. Through posting articles with inserted JS scripts, users who visit the infected articles would automatically republish new articles. These articles would enter each user‚Äôs article list through the recommendation system, leading to widespread infection.</p><p>Another example is using methods to get cookies, transmitting the cookies to the invader‚Äôs server. The invader can then simulate the cookies to log in to the website and alter the user‚Äôs information.</p><h3 id=prevention-of-xss>Prevention of XSS</h3><p>So how do we prevent XSS attacks? ‚Äî ‚Äî The most fundamental way is to validate and replace the content input by the user. The characters that need to be replaced are:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&amp; replaced with: &amp;amp;
</span></span><span class=line><span class=cl>&lt; replaced with: &amp;lt;
</span></span><span class=line><span class=cl>&gt; replaced with: &amp;gt;
</span></span><span class=line><span class=cl>&#34; replaced with: &amp;quot;
</span></span><span class=line><span class=cl>&#39; replaced with: &amp;#x27;
</span></span><span class=line><span class=cl>/ replaced with: &amp;#x2f;
</span></span></code></pre></td></tr></table></div></div><p>After replacing these characters, the attack code input by the hacker will become invalid, and the XSS attack will not occur easily.</p><p>In addition, you can have stronger control over cookies, such as adding http-only restrictions to sensitive cookies, preventing JS from getting the contents of cookies.</p><h3 id=csrf-cross-site-request-forgery>CSRF (Cross-site request forgery)</h3><p>CSRF borrows the permission of the current operator to secretly complete an operation, and doesn‚Äôt take the user‚Äôs information.</p><p>For example, on a payment website, the interface for transferring money to others is <a class=link href="http://buy.com/pay?touid=999&amp;money=100" target=_blank rel=noopener>http://buy.com/pay?touid=999&money=100</a>, and there&rsquo;s no password or token verification when using this interface, only simply visiting the webpage will allow for a direct transfer for others. A user has already logged onto <a class=link href=http://buy.com target=_blank rel=noopener>http://buy.com</a>. During the selection of goods, he suddenly receives an email, and this email has a line of code <code>&lt;img src="http://buy.com/pay?touid=999&amp;money=100"/></code>. After he visits the email, the purchase has actually been completed.</p><p>CSRF actually takes advantage of a feature of cookies. As we know, after logging into <a class=link href=http://buy.com target=_blank rel=noopener>http://buy.com</a>, the cookie will have the login marker, and now when you request <a class=link href="http://buy.com/pay?touid=999&amp;money=100" target=_blank rel=noopener>http://buy.com/pay?touid=999&money=100</a>, it will bring the cookie, which informs the server end that you&rsquo;ve logged in. However, if you request another domain&rsquo;s API, such as <a class=link href=http://abc.com/api target=_blank rel=noopener>http://abc.com/api</a> on <a class=link href=http://buy.com target=_blank rel=noopener>http://buy.com</a>, it will not bring the cookie, this is restricted by the browser&rsquo;s same-origin policy. But ‚Äî‚Äî now, when you&rsquo;re on another domain&rsquo;s page and you request <a class=link href="http://buy.com/pay?touid=999&amp;money=100" target=_blank rel=noopener>http://buy.com/pay?touid=999&money=100</a>, it will bring buy.com&rsquo;s cookie. This is the theoretical foundation for a CSRF attack.</p><p>The prevention of CSRF is adding permission verification at various levels, such as in current online shopping websites, any transaction involving money will definitely require a password or a fingerprint. Apart from this, sensitive interfaces using POST requests rather than GET is also very important.</p></section><footer class=article-footer><section class=article-tags><a href=/tags/javascript/>Javascript</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/advanced-usage-of-reduce-you-might-not-know/><div class=article-image><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h7QTz6KqyeYG_ausGQjj5g.jpeg loading=lazy data-key data-hash=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h7QTz6KqyeYG_ausGQjj5g.jpeg></div><div class=article-details><h2 class=article-title>Advanced Usage of Reduce You Might Not Know</h2></div></a></article><article class=has-image><a href=/p/vue3-performance-optimization-code-level-optimization/><div class=article-image><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KZsES-HkGUvu6TkmfmNMBA.png loading=lazy data-key data-hash=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KZsES-HkGUvu6TkmfmNMBA.png></div><div class=article-details><h2 class=article-title>Vue3 Performance Optimization ‚Äî Code-Level Optimization</h2></div></a></article><article class=has-image><a href=/p/vue3-performance-optimization-bundle-optimization/><div class=article-image><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KZsES-HkGUvu6TkmfmNMBA.png loading=lazy data-key data-hash=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KZsES-HkGUvu6TkmfmNMBA.png></div><div class=article-details><h2 class=article-title>Vue3 Performance Optimization ‚Äî Bundle Optimization</h2></div></a></article><article class=has-image><a href=/p/how-much-do-you-know-about-29-javascript-object-methods/><div class=article-image><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l_w8hkehf25Nx3H_AzEVbQ.jpeg loading=lazy data-key data-hash=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l_w8hkehf25Nx3H_AzEVbQ.jpeg></div><div class=article-details><h2 class=article-title>How Much Do You Know About 29 JavaScript Object Methods?</h2></div></a></article><article class=has-image><a href=/p/most-of-the-books-youve-read-are-mostly-forgotten-so-why-keep-reading/><div class=article-image><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zm-09l_F3UwVf2IneHGHew.jpeg loading=lazy data-key data-hash=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zm-09l_F3UwVf2IneHGHew.jpeg></div><div class=article-details><h2 class=article-title>Most of the books you‚Äôve read are mostly forgotten, so why keep reading?</h2></div></a></article></div></div></aside><script src=https://giscus.app/client.js data-repo=kxming/skstory data-repo-id=R_kgDOLehX4A data-category=Announcements data-category-id=DIC_kwDOLehX4M4Cd4Vx data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=en-us data-loading crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){setGiscusTheme(document.documentElement.dataset.scheme==="light"?"light":"dark_dimmed")}})()</script><footer class=site-footer><section class=copyright>&copy;
2024 SK Story</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.29.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>