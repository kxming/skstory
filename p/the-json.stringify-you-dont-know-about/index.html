<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="We are familiar with JSON.stringify, which is generally used for serialization (deep copy)..."><title>The JSON.stringify() You Don‚Äôt Know About</title>
<link rel=canonical href=https://www.skstory.online/p/the-json.stringify-you-dont-know-about/><link rel=stylesheet href=/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css><meta property='og:title' content="The JSON.stringify() You Don‚Äôt Know About"><meta property='og:description' content="We are familiar with JSON.stringify, which is generally used for serialization (deep copy)..."><meta property='og:url' content='https://www.skstory.online/p/the-json.stringify-you-dont-know-about/'><meta property='og:site_name' content='SK Story'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='Code'><meta property='article:tag' content='Javascript'><meta property='article:published_time' content='2024-06-13T16:02:05+08:00'><meta property='article:modified_time' content='2024-06-13T16:02:05+08:00'><meta property='og:image' content='https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U5P16wQHFvMFQDjpfDRBjQ.png'><meta name=twitter:site content="@https://twitter.com/ShawnKxming"><meta name=twitter:creator content="@https://twitter.com/ShawnKxming"><meta name=twitter:title content="The JSON.stringify() You Don‚Äôt Know About"><meta name=twitter:description content="We are familiar with JSON.stringify, which is generally used for serialization (deep copy)..."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U5P16wQHFvMFQDjpfDRBjQ.png'><link rel="shortcut icon" href=/favicon.ico></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu1157332405703967761.jpeg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>üç•</span></figure><div class=site-meta><h1 class=site-name><a href=/>SK Story</a></h1><h2 class=site-description>Shawn King's Stories Website</h2></div></header><ol class=menu-social><li><a href=mailto:kxming0229@gmail.com target=_blank title=Email rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-mail"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7a2 2 0 012-2h14a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V7z"/><path d="M3 7l9 6 9-6"/></svg></a></li><li><a href=https://www.facebook.com/p/King-Shawn-100092679065959/ target=_blank title=Facebook rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-facebook"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 10v4h3v7h4v-7h3l1-4h-4V8a1 1 0 011-1h3V3h-3a5 5 0 00-5 5v2H7"/></svg></a></li><li><a href=https://twitter.com/ShawnKxming target=_blank title=Twitter rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4l11.733 16H20L8.267 4z"/><path d="M4 20l6.768-6.768m2.46-2.46L20 4"/></svg></a></li><li><a href=https://t.me/shawnkxming target=_blank title=Telegram rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-telegram"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 10l-4 4 6 6 4-16-18 7 4 2 2 6 3-4"/></svg></a></li><li><a href=https://medium.com/@kxming target=_blank title=Medium rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-medium"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4m0 2a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2z"/><path d="M8 9h1l3 3 3-3h1"/><path d="M8 15h2"/><path d="M14 15h2"/><path d="M9 9v6"/><path d="M15 9v6"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#concept>Concept</a></li><li><a href=#disadvantages>Disadvantages</a><ol><li><a href=#1-not-friendly-to-functions>1. Not Friendly to Functions</a></li><li><a href=#2-not-friendly-to-undefined>2. Not Friendly to undefined</a></li><li><a href=#3-not-friendly-to-regular-expressions>3. Not Friendly to Regular Expressions</a></li><li><a href=#4-array-objects>4. Array Objects</a></li></ol></li><li><a href=#features>Features</a><ol><li><a href=#first>First</a></li><li><a href=#second>Second</a></li><li><a href=#third>Third</a></li><li><a href=#fourth>Fourth</a></li><li><a href=#fifth>Fifth</a></li><li><a href=#sixth>Sixth</a></li><li><a href=#seventh>Seventh</a></li><li><a href=#eighth>Eighth</a></li><li><a href=#ninth>Ninth</a></li></ol></li><li><a href=#expansion>Expansion</a><ol><li><a href=#1-second-parameter-replacer>1. Second parameter replacer</a><ol><li><a href=#used-as-a-function>Used as a function:</a></li><li><a href=#used-as-an-array>Used as an array</a></li></ol></li><li><a href=#2-third-parameter-space>2. Third parameter space</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/the-json.stringify-you-dont-know-about/><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U5P16wQHFvMFQDjpfDRBjQ.png loading=lazy alt="Featured image of post The JSON.stringify() You Don‚Äôt Know About"></a></div><div class=article-details><header class=article-category><a href=/categories/code/>Code
</a><a href=/categories/javascript/ style=background-color:#d1d419;color:#fff>Javascript</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/the-json.stringify-you-dont-know-about/>The JSON.stringify() You Don‚Äôt Know About</a></h2><h3 class=article-subtitle>We are familiar with JSON.stringify, which is generally used for serialization (deep copy)...</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Jun 13, 2024</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>7 minute read</time></div></footer></div></header><section class=article-content><h2 id=concept>Concept</h2><p>We are familiar with <code>JSON.stringify</code>, which is generally used for serialization (deep copy). It converts our objects into a JSON string. This method is indeed very convenient in our work, however, this method also has some disadvantages, which we seldom encounter.</p><h2 id=disadvantages>Disadvantages</h2><h3 id=1-not-friendly-to-functions>1. Not Friendly to Functions</h3><p>If an object‚Äôs property is a function, this property will be lost during serialization.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>let obj = {
</span></span><span class=line><span class=cl>    name: &#39;iyongbao&#39;,
</span></span><span class=line><span class=cl>    foo: function () {
</span></span><span class=line><span class=cl>        console.log(`${ this.name }`)
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>console.log(JSON.stringify(obj)); // {&#34;name&#34;:&#34;iyongbao&#34;}
</span></span></code></pre></td></tr></table></div></div><h3 id=2-not-friendly-to-undefined>2. Not Friendly to undefined</h3><p>If an object‚Äôs property value is undefined, it will be lost after conversion.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>let obj = {
</span></span><span class=line><span class=cl>    name: undefined
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>console.log(JSON.stringify(obj)); // {}
</span></span></code></pre></td></tr></table></div></div><h3 id=3-not-friendly-to-regular-expressions>3. Not Friendly to Regular Expressions</h3><p>If an object‚Äôs property is a regular expression, it will turn into an empty Object after conversion.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>let obj = {
</span></span><span class=line><span class=cl>    name: &#39;iyongbao&#39;,
</span></span><span class=line><span class=cl>    zoo: /^i/ig,
</span></span><span class=line><span class=cl>    foo: function () {
</span></span><span class=line><span class=cl>        console.log(`${ this.name }`)
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>console.log(JSON.stringify(obj)); // {&#34;name&#34;:&#34;iyongbao&#34;,&#34;zoo&#34;:{}}
</span></span></code></pre></td></tr></table></div></div><h3 id=4-array-objects>4. Array Objects</h3><p>The above scenarios also occur if it is an array object.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>let arr = [
</span></span><span class=line><span class=cl>    {
</span></span><span class=line><span class=cl>        name: undefined
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>]
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>console.log(JSON.stringify(arr)); // [{}]
</span></span></code></pre></td></tr></table></div></div><h2 id=features>Features</h2><h3 id=first>First</h3><ul><li><code>JSON.stringify()</code> will return different results when <code>undefined</code>, any <code>function</code>, and <code>symbol</code>, these three special values, are used as the values of object properties, array elements, or as standalone values.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>const</span> <span class=n>data</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>a</span><span class=p>:</span> <span class=s2>&#34;aaa&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>b</span><span class=p>:</span> <span class=n>undefined</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>c</span><span class=p>:</span> <span class=n>Symbol</span><span class=p>(</span><span class=s2>&#34;dd&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=n>fn</span><span class=p>:</span> <span class=n>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=bp>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=n>JSON</span><span class=o>.</span><span class=n>stringify</span><span class=p>(</span><span class=n>data</span><span class=p>);</span> <span class=o>//</span> <span class=s2>&#34;{&#34;</span><span class=n>a</span><span class=s2>&#34;:&#34;</span><span class=n>aaa</span><span class=s2>&#34;}&#34;</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>When <code>undefined</code>, any <code>function</code>, and <code>symbol</code> are used as array element values, <code>JSON.stringify()</code> will serialize them as null.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>JSON.stringify([&#34;aaa&#34;, undefined, function aa() {
</span></span><span class=line><span class=cl>    return true
</span></span><span class=line><span class=cl>  }, Symbol(&#39;dd&#39;)])  // &#34;[&#34;aaa&#34;,null,null,null]&#34;
</span></span></code></pre></td></tr></table></div></div><ul><li>When <code>undefined</code>, any <code>function</code>, and <code>symbol</code> are serialized by <code>JSON.stringify()</code> as standalone values, it will return undefined.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>JSON.stringify(function a (){console.log(&#39;a&#39;)})
</span></span><span class=line><span class=cl>// undefined
</span></span><span class=line><span class=cl>JSON.stringify(undefined)
</span></span><span class=line><span class=cl>// undefined
</span></span><span class=line><span class=cl>JSON.stringify(Symbol(&#39;dd&#39;))
</span></span><span class=line><span class=cl>// undefined
</span></span></code></pre></td></tr></table></div></div><h3 id=second>Second</h3><p>The properties of non-array objects cannot be guaranteed to appear in a specific order in the serialized string. As mentioned in the first characteristic, <code>JSON.stringify()</code> ignores some special values during serialization, so it cannot guarantee that the serialized string will still appear in a specific order (except for arrays).</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>const</span> <span class=n>data</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>a</span><span class=p>:</span> <span class=s2>&#34;aaa&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>b</span><span class=p>:</span> <span class=n>undefined</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>c</span><span class=p>:</span> <span class=n>Symbol</span><span class=p>(</span><span class=s2>&#34;dd&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=n>fn</span><span class=p>:</span> <span class=n>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=bp>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=n>d</span><span class=p>:</span> <span class=s2>&#34;ddd&#34;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=n>JSON</span><span class=o>.</span><span class=n>stringify</span><span class=p>(</span><span class=n>data</span><span class=p>);</span> <span class=o>//</span> <span class=s2>&#34;{&#34;</span><span class=n>a</span><span class=s2>&#34;:&#34;</span><span class=n>aaa</span><span class=s2>&#34;,&#34;</span><span class=n>d</span><span class=s2>&#34;:&#34;</span><span class=n>ddd</span><span class=s2>&#34;}&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>JSON</span><span class=o>.</span><span class=n>stringify</span><span class=p>([</span><span class=s2>&#34;aaa&#34;</span><span class=p>,</span> <span class=n>undefined</span><span class=p>,</span> <span class=n>function</span> <span class=n>aa</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=bp>true</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span> <span class=n>Symbol</span><span class=p>(</span><span class=s1>&#39;dd&#39;</span><span class=p>),</span><span class=s2>&#34;eee&#34;</span><span class=p>])</span>  <span class=o>//</span> <span class=s2>&#34;[&#34;</span><span class=n>aaa</span><span class=s2>&#34;,null,null,null,&#34;</span><span class=n>eee</span><span class=s2>&#34;]&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=third>Third</h3><p>If the value being converted has a <code>toJSON()</code> function, the serialization result will be whatever value that function returns, and the values of other properties will be ignored.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>JSON.stringify({
</span></span><span class=line><span class=cl>    say: &#34;hello JSON.stringify&#34;,
</span></span><span class=line><span class=cl>    toJSON: function() {
</span></span><span class=line><span class=cl>      return &#34;today i learn&#34;;
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>  })
</span></span><span class=line><span class=cl>// &#34;today i learn&#34;
</span></span></code></pre></td></tr></table></div></div><h3 id=fourth>Fourth</h3><p><code>JSON.stringify()</code> will serialize Date values normally. In fact, the Date object itself implements the <code>toJSON()</code> method (equivalent to <code>Date.toISOString()</code>), so the Date object is treated as a string.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>JSON.stringify({ now: new Date() });
</span></span><span class=line><span class=cl>// &#34;{&#34;now&#34;:&#34;2024-06-16T12:43:13.577Z&#34;}&#34;
</span></span></code></pre></td></tr></table></div></div><h3 id=fifth>Fifth</h3><p>Numeric values in the format of <code>NaN</code> and <code>Infinity</code>, as well as <code>null</code>, will all be treated as <code>null</code>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>JSON.stringify(NaN)
</span></span><span class=line><span class=cl>// &#34;null&#34;
</span></span><span class=line><span class=cl>JSON.stringify(null)
</span></span><span class=line><span class=cl>// &#34;null&#34;
</span></span><span class=line><span class=cl>JSON.stringify(Infinity)
</span></span><span class=line><span class=cl>// &#34;null&#34;
</span></span></code></pre></td></tr></table></div></div><h3 id=sixth>Sixth</h3><p>Wrapper objects for booleans, numbers, and strings will be automatically converted to their corresponding primitive values during serialization.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>JSON.stringify([new Number(1), new String(&#34;false&#34;), new Boolean(false)]);
</span></span><span class=line><span class=cl>// &#34;[1,&#34;false&#34;,false]&#34;
</span></span></code></pre></td></tr></table></div></div><h3 id=seventh>Seventh</h3><p>Objects of other types, including <code>Map</code>/<code>Set</code>/<code>WeakMap</code>/<code>WeakSet</code>, will only serialize enumerable properties.Non-enumerable properties are ignored by default.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>JSON</span><span class=o>.</span><span class=n>stringify</span><span class=p>(</span> 
</span></span><span class=line><span class=cl>    <span class=ne>Object</span><span class=o>.</span><span class=n>create</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>null</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=p>{</span> 
</span></span><span class=line><span class=cl>            <span class=n>x</span><span class=p>:</span> <span class=p>{</span> <span class=n>value</span><span class=p>:</span> <span class=s1>&#39;json&#39;</span><span class=p>,</span> <span class=n>enumerable</span><span class=p>:</span> <span class=bp>false</span> <span class=p>},</span> 
</span></span><span class=line><span class=cl>            <span class=n>y</span><span class=p>:</span> <span class=p>{</span> <span class=n>value</span><span class=p>:</span> <span class=s1>&#39;stringify&#39;</span><span class=p>,</span> <span class=n>enumerable</span><span class=p>:</span> <span class=bp>true</span> <span class=p>}</span> 
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=s2>&#34;{&#34;</span><span class=n>y</span><span class=s2>&#34;:&#34;</span><span class=n>stringify</span><span class=s2>&#34;}&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=eighth>Eighth</h3><p>We all know that the simplest and most brute-force way to implement deep cloning is serialization: <code>JSON.parse(JSON.stringify())</code>. This method of implementing deep cloning will lead to many pitfalls due to the various characteristics of serialization. For example, the circular reference issue we are addressing now.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>//</span> <span class=n>Executing</span> <span class=n>this</span> <span class=n>method</span> <span class=n>on</span> <span class=n>objects</span> <span class=n>with</span> <span class=n>circular</span> <span class=n>references</span> <span class=p>(</span><span class=n>objects</span> <span class=n>referencing</span> <span class=n>each</span> <span class=n>other</span><span class=p>,</span> <span class=n>forming</span> <span class=n>an</span> <span class=n>infinite</span> <span class=n>loop</span><span class=p>)</span> <span class=n>will</span> <span class=n>throw</span> <span class=n>an</span> <span class=n>error</span><span class=o>.</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>obj</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>name</span><span class=p>:</span> <span class=s2>&#34;loopObj&#34;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>loopObj</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>obj</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>Objects</span> <span class=n>form</span> <span class=n>a</span> <span class=n>circular</span> <span class=n>reference</span><span class=p>,</span> <span class=n>creating</span> <span class=n>a</span> <span class=n>closed</span> <span class=n>loop</span>
</span></span><span class=line><span class=cl><span class=n>obj</span><span class=o>.</span><span class=n>loopObj</span> <span class=o>=</span> <span class=n>loopObj</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>Encapsulate</span> <span class=n>a</span> <span class=n>deep</span> <span class=n>clone</span> <span class=n>function</span>
</span></span><span class=line><span class=cl><span class=n>function</span> <span class=n>deepClone</span><span class=p>(</span><span class=n>obj</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>JSON</span><span class=o>.</span><span class=n>parse</span><span class=p>(</span><span class=n>JSON</span><span class=o>.</span><span class=n>stringify</span><span class=p>(</span><span class=n>obj</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>Execute</span> <span class=n>deep</span> <span class=n>cloning</span><span class=p>,</span> <span class=n>throw</span> <span class=n>an</span> <span class=n>error</span>
</span></span><span class=line><span class=cl><span class=n>deepClone</span><span class=p>(</span><span class=n>obj</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=o>/**</span>
</span></span><span class=line><span class=cl> <span class=n>VM44</span><span class=p>:</span><span class=mi>9</span> <span class=n>Uncaught</span> <span class=n>TypeError</span><span class=p>:</span> <span class=n>Converting</span> <span class=n>circular</span> <span class=n>structure</span> <span class=n>to</span> <span class=n>JSON</span>
</span></span><span class=line><span class=cl>    <span class=o>--&gt;</span> <span class=n>starting</span> <span class=n>at</span> <span class=n>object</span> <span class=n>with</span> <span class=n>constructor</span> <span class=s1>&#39;Object&#39;</span>
</span></span><span class=line><span class=cl>    <span class=o>|</span>     <span class=n>property</span> <span class=s1>&#39;loopObj&#39;</span> <span class=o>-&gt;</span> <span class=n>object</span> <span class=n>with</span> <span class=n>constructor</span> <span class=s1>&#39;Object&#39;</span>
</span></span><span class=line><span class=cl>    <span class=o>---</span> <span class=n>property</span> <span class=s1>&#39;obj&#39;</span> <span class=n>closes</span> <span class=n>the</span> <span class=n>circle</span>
</span></span><span class=line><span class=cl>    <span class=n>at</span> <span class=n>JSON</span><span class=o>.</span><span class=n>stringify</span> <span class=p>(</span><span class=o>&lt;</span><span class=n>anonymous</span><span class=o>&gt;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>at</span> <span class=n>deepClone</span> <span class=p>(</span><span class=o>&lt;</span><span class=n>anonymous</span><span class=o>&gt;</span><span class=p>:</span><span class=mi>9</span><span class=p>:</span><span class=mi>26</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>at</span> <span class=o>&lt;</span><span class=n>anonymous</span><span class=o>&gt;</span><span class=p>:</span><span class=mi>11</span><span class=p>:</span><span class=mi>13</span>
</span></span><span class=line><span class=cl> <span class=o>*/</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=ninth>Ninth</h3><p>Properties with a <code>symbol</code> as the property key will be completely ignored, even if they are explicitly included in the replacer parameter.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>JSON.stringify({ [Symbol.for(&#34;json&#34;)]: &#34;stringify&#34; }, function(k, v) {
</span></span><span class=line><span class=cl>    if (typeof k === &#34;symbol&#34;) {
</span></span><span class=line><span class=cl>      return v;
</span></span><span class=line><span class=cl>    }
</span></span><span class=line><span class=cl>  })
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// undefined
</span></span></code></pre></td></tr></table></div></div><h2 id=expansion>Expansion</h2><p><code>JSON.stringify</code> also has optional second and third parameters.</p><h3 id=1-second-parameter-replacer>1. Second parameter replacer</h3><p>The second parameter, <code>replacer</code>, can take two forms: a function or an array. As a function, it receives two arguments, the key and value. The function acts similarly to callback functions in array methods like map, filter, etc., executing once for each property value. If <code>replacer</code> is an array, the values in the array represent the names of the properties that will be serialized into the JSON string.</p><h4 id=used-as-a-function>Used as a function:</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>const</span> <span class=n>data</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>a</span><span class=p>:</span> <span class=s2>&#34;aaa&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>b</span><span class=p>:</span> <span class=n>undefined</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>c</span><span class=p>:</span> <span class=n>Symbol</span><span class=p>(</span><span class=s2>&#34;dd&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=n>fn</span><span class=p>:</span> <span class=n>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=bp>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>Without</span> <span class=n>using</span> <span class=n>the</span> <span class=n>replacer</span> <span class=n>parameter</span>
</span></span><span class=line><span class=cl><span class=n>JSON</span><span class=o>.</span><span class=n>stringify</span><span class=p>(</span><span class=n>data</span><span class=p>);</span> 
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=s2>&#34;{&#34;</span><span class=n>a</span><span class=s2>&#34;:&#34;</span><span class=n>aaa</span><span class=s2>&#34;}&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>When</span> <span class=n>using</span> <span class=n>the</span> <span class=n>replacer</span> <span class=n>parameter</span> <span class=n>as</span> <span class=n>a</span> <span class=n>function</span>
</span></span><span class=line><span class=cl><span class=n>JSON</span><span class=o>.</span><span class=n>stringify</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>switch</span> <span class=p>(</span><span class=bp>true</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=nb>typeof</span> <span class=n>value</span> <span class=o>===</span> <span class=s2>&#34;undefined&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=s2>&#34;undefined&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=nb>typeof</span> <span class=n>value</span> <span class=o>===</span> <span class=s2>&#34;symbol&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=n>value</span><span class=o>.</span><span class=n>toString</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>case</span> <span class=nb>typeof</span> <span class=n>value</span> <span class=o>===</span> <span class=s2>&#34;function&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=n>value</span><span class=o>.</span><span class=n>toString</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=n>default</span><span class=p>:</span>
</span></span><span class=line><span class=cl>      <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>value</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=s2>&#34;{&#34;</span><span class=n>a</span><span class=s2>&#34;:&#34;</span><span class=n>aaa</span><span class=s2>&#34;,&#34;</span><span class=sa>b</span><span class=s2>&#34;:&#34;</span><span class=n>undefined</span><span class=s2>&#34;,&#34;</span><span class=n>c</span><span class=s2>&#34;:&#34;</span><span class=n>Symbol</span><span class=p>(</span><span class=n>dd</span><span class=p>)</span><span class=s2>&#34;,&#34;</span><span class=n>fn</span><span class=s2>&#34;:&#34;</span><span class=n>function</span><span class=p>()</span> <span class=p>{</span>\<span class=n>n</span>    <span class=k>return</span> <span class=bp>true</span><span class=p>;</span>\<span class=n>n</span>  <span class=p>}</span><span class=s2>&#34;}&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>When the replacer function is used, the first argument passed to this function is not the first key-value pair of the object. Instead, an empty string is used as the key, and the value is the entire object‚Äôs key-value pairs:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>const</span> <span class=n>data</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>a</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>b</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>c</span><span class=p>:</span> <span class=mi>4</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>d</span><span class=p>:</span> <span class=mi>5</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=n>JSON</span><span class=o>.</span><span class=n>stringify</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>value</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>The</span> <span class=n>first</span> <span class=n>argument</span> <span class=n>passed</span> <span class=n>to</span> <span class=n>the</span> <span class=n>replacer</span> <span class=n>function</span> <span class=n>is</span> <span class=p>{</span><span class=s2>&#34;&#34;</span><span class=p>:{</span><span class=n>a</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span> <span class=n>b</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span> <span class=n>c</span><span class=p>:</span> <span class=mi>4</span><span class=p>,</span> <span class=n>d</span><span class=p>:</span> <span class=mi>5</span><span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=p>{</span><span class=n>a</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span> <span class=n>b</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span> <span class=n>c</span><span class=p>:</span> <span class=mi>4</span><span class=p>,</span> <span class=n>d</span><span class=p>:</span> <span class=mi>5</span><span class=p>}</span>   
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=mi>4</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=mi>5</span>
</span></span></code></pre></td></tr></table></div></div><p>Implementing a map function</p><p>We can also use it to manually implement a similar map function for an object.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>//</span> <span class=n>Implement</span> <span class=n>a</span> <span class=n>map</span> <span class=n>function</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>data</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>a</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>b</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>c</span><span class=p>:</span> <span class=mi>4</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>d</span><span class=p>:</span> <span class=mi>5</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>objMap</span> <span class=o>=</span> <span class=p>(</span><span class=n>obj</span><span class=p>,</span> <span class=n>fn</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nb>typeof</span> <span class=n>fn</span> <span class=o>!==</span> <span class=s2>&#34;function&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>throw</span> <span class=n>new</span> <span class=n>TypeError</span><span class=p>(</span><span class=err>`</span><span class=o>$</span><span class=p>{</span><span class=n>fn</span><span class=p>}</span> <span class=n>is</span> <span class=ow>not</span> <span class=n>a</span> <span class=n>function</span> <span class=o>!</span><span class=err>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>JSON</span><span class=o>.</span><span class=n>parse</span><span class=p>(</span><span class=n>JSON</span><span class=o>.</span><span class=n>stringify</span><span class=p>(</span><span class=n>obj</span><span class=p>,</span> <span class=n>fn</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=n>objMap</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=n>value</span> <span class=o>%</span> <span class=mi>2</span> <span class=o>===</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>value</span> <span class=o>/</span> <span class=mi>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>value</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=p>{</span><span class=n>a</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span> <span class=n>b</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span> <span class=n>c</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span> <span class=n>d</span><span class=p>:</span> <span class=mi>5</span><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=used-as-an-array>Used as an array</h4><p>When replacer is used as an array, the result is very straightforward. The values in the array represent the names of the properties that will be serialized into the JSON string.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>const</span> <span class=n>jsonObj</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>name</span><span class=p>:</span> <span class=s2>&#34;JSON.stringify&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>params</span><span class=p>:</span> <span class=s2>&#34;obj,replacer,space&#34;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>Only</span> <span class=n>retain</span> <span class=n>the</span> <span class=n>value</span> <span class=n>of</span> <span class=n>the</span> <span class=n>params</span> <span class=n>property</span>
</span></span><span class=line><span class=cl><span class=n>JSON</span><span class=o>.</span><span class=n>stringify</span><span class=p>(</span><span class=n>jsonObj</span><span class=p>,</span> <span class=p>[</span><span class=s2>&#34;params&#34;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=s2>&#34;{&#34;</span><span class=n>params</span><span class=s2>&#34;:&#34;</span><span class=n>obj</span><span class=p>,</span><span class=n>replacer</span><span class=p>,</span><span class=n>space</span><span class=s2>&#34;}&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=2-third-parameter-space>2. Third parameter space</h3><p>The third parameter, space, is used to control the spacing within the resulting string. Let‚Äôs look at an example to understand what this does:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>const</span> <span class=n>tiedan</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>name</span><span class=p>:</span> <span class=s2>&#34;Jhon&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>describe</span><span class=p>:</span> <span class=s2>&#34;JSON.stringify()&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>emotion</span><span class=p>:</span> <span class=s2>&#34;like&#34;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=n>JSON</span><span class=o>.</span><span class=n>stringify</span><span class=p>(</span><span class=n>tiedan</span><span class=p>,</span> <span class=n>null</span><span class=p>,</span> <span class=s2>&#34;--&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>The</span> <span class=n>output</span> <span class=n>is</span> <span class=n>as</span> <span class=n>follows</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=s2>&#34;{</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=o>--</span><span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Jhon&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=o>--</span><span class=s2>&#34;describe&#34;</span><span class=p>:</span> <span class=s2>&#34;JSON.stringify()&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=o>--</span><span class=s2>&#34;emotion&#34;</span><span class=p>:</span> <span class=s2>&#34;like&#34;</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=p>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=n>JSON</span><span class=o>.</span><span class=n>stringify</span><span class=p>(</span><span class=n>tiedan</span><span class=p>,</span> <span class=n>null</span><span class=p>,</span> <span class=mi>2</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=s2>&#34;{</span>
</span></span><span class=line><span class=cl><span class=o>//</span>   <span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Jhon&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=o>//</span>   <span class=s2>&#34;describe&#34;</span><span class=p>:</span> <span class=s2>&#34;JSON.stringify()&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=o>//</span>   <span class=s2>&#34;emotion&#34;</span><span class=p>:</span> <span class=s2>&#34;like&#34;</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=p>}</span><span class=s2>&#34;</span>
</span></span></code></pre></td></tr></table></div></div></section><footer class=article-footer><section class=article-tags><a href=/tags/code/>Code</a>
<a href=/tags/javascript/>Javascript</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/advanced-usage-of-reduce-you-might-not-know/><div class=article-image><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h7QTz6KqyeYG_ausGQjj5g.jpeg loading=lazy data-key data-hash=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h7QTz6KqyeYG_ausGQjj5g.jpeg></div><div class=article-details><h2 class=article-title>Advanced Usage of Reduce You Might Not Know</h2></div></a></article><article class=has-image><a href=/p/vue3-performance-optimization-code-level-optimization/><div class=article-image><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KZsES-HkGUvu6TkmfmNMBA.png loading=lazy data-key data-hash=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KZsES-HkGUvu6TkmfmNMBA.png></div><div class=article-details><h2 class=article-title>Vue3 Performance Optimization ‚Äî Code-Level Optimization</h2></div></a></article><article class=has-image><a href=/p/vue3-performance-optimization-bundle-optimization/><div class=article-image><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KZsES-HkGUvu6TkmfmNMBA.png loading=lazy data-key data-hash=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KZsES-HkGUvu6TkmfmNMBA.png></div><div class=article-details><h2 class=article-title>Vue3 Performance Optimization ‚Äî Bundle Optimization</h2></div></a></article><article class=has-image><a href=/p/how-much-do-you-know-about-29-javascript-object-methods/><div class=article-image><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l_w8hkehf25Nx3H_AzEVbQ.jpeg loading=lazy data-key data-hash=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l_w8hkehf25Nx3H_AzEVbQ.jpeg></div><div class=article-details><h2 class=article-title>How Much Do You Know About 29 JavaScript Object Methods?</h2></div></a></article><article class=has-image><a href=/p/most-of-the-books-youve-read-are-mostly-forgotten-so-why-keep-reading/><div class=article-image><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zm-09l_F3UwVf2IneHGHew.jpeg loading=lazy data-key data-hash=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zm-09l_F3UwVf2IneHGHew.jpeg></div><div class=article-details><h2 class=article-title>Most of the books you‚Äôve read are mostly forgotten, so why keep reading?</h2></div></a></article></div></div></aside><script src=https://giscus.app/client.js data-repo=kxming/skstory data-repo-id=R_kgDOLehX4A data-category=Announcements data-category-id=DIC_kwDOLehX4M4Cd4Vx data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=en-us data-loading crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){setGiscusTheme(document.documentElement.dataset.scheme==="light"?"light":"dark_dimmed")}})()</script><footer class=site-footer><section class=copyright>&copy;
2024 SK Story</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.29.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>