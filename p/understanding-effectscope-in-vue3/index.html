<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="In Vue‚Äôs component setup(), effects will be collected and bound to the current instance."><title>Understanding effectScope in Vue3</title>
<link rel=canonical href=https://www.skstory.online/p/understanding-effectscope-in-vue3/><link rel=stylesheet href=/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css><meta property='og:title' content="Understanding effectScope in Vue3"><meta property='og:description' content="In Vue‚Äôs component setup(), effects will be collected and bound to the current instance."><meta property='og:url' content='https://www.skstory.online/p/understanding-effectscope-in-vue3/'><meta property='og:site_name' content='SK Story'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='Code'><meta property='article:tag' content='Javascript'><meta property='article:published_time' content='2024-06-17T16:02:05+08:00'><meta property='article:modified_time' content='2024-06-17T16:02:05+08:00'><meta property='og:image' content='https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mejgw2yY0uDgYRxE8Vo1yA.png'><meta name=twitter:site content="@https://twitter.com/ShawnKxming"><meta name=twitter:creator content="@https://twitter.com/ShawnKxming"><meta name=twitter:title content="Understanding effectScope in Vue3"><meta name=twitter:description content="In Vue‚Äôs component setup(), effects will be collected and bound to the current instance."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mejgw2yY0uDgYRxE8Vo1yA.png'><link rel="shortcut icon" href=/favicon.ico></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu1157332405703967761.jpeg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>üç•</span></figure><div class=site-meta><h1 class=site-name><a href=/>SK Story</a></h1><h2 class=site-description>Shawn King's Stories Website</h2></div></header><ol class=menu-social><li><a href=mailto:kxming0229@gmail.com target=_blank title=Email rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-mail"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7a2 2 0 012-2h14a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V7z"/><path d="M3 7l9 6 9-6"/></svg></a></li><li><a href=https://www.facebook.com/p/King-Shawn-100092679065959/ target=_blank title=Facebook rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-facebook"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 10v4h3v7h4v-7h3l1-4h-4V8a1 1 0 011-1h3V3h-3a5 5 0 00-5 5v2H7"/></svg></a></li><li><a href=https://twitter.com/ShawnKxming target=_blank title=Twitter rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4l11.733 16H20L8.267 4z"/><path d="M4 20l6.768-6.768m2.46-2.46L20 4"/></svg></a></li><li><a href=https://t.me/shawnkxming target=_blank title=Telegram rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-telegram"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 10l-4 4 6 6 4-16-18 7 4 2 2 6 3-4"/></svg></a></li><li><a href=https://medium.com/@kxming target=_blank title=Medium rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-medium"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4m0 2a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2z"/><path d="M8 9h1l3 3 3-3h1"/><path d="M8 15h2"/><path d="M14 15h2"/><path d="M9 9v6"/><path d="M15 9v6"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#overview>Overview</a></li><li><a href=#usage>Usage</a><ol><li><a href=#basic>Basic</a></li><li><a href=#nested-scopes>Nested Scopes</a></li><li><a href=#detached-nested-scopes>Detached Nested Scopes</a></li><li><a href=#getting-the-current-scope>Getting the Current Scope</a></li></ol></li><li><a href=#examples>Examples</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/understanding-effectscope-in-vue3/><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mejgw2yY0uDgYRxE8Vo1yA.png loading=lazy alt="Featured image of post Understanding effectScope in Vue3"></a></div><div class=article-details><header class=article-category><a href=/categories/code/>Code
</a><a href=/categories/javascript/ style=background-color:#d1d419;color:#fff>Javascript</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/understanding-effectscope-in-vue3/>Understanding effectScope in Vue3</a></h2><h3 class=article-subtitle>In Vue‚Äôs component setup(), effects will be collected and bound to the current instance.</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Jun 17, 2024</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>5 minute read</time></div></footer></div></header><section class=article-content><h2 id=overview>Overview</h2><p>In Vue‚Äôs component <code>setup()</code>, effects will be collected and bound to the current instance. When the instance get unmounted, effects will be disposed automatically. This is a convenient and intuitive feature. However, when we are using them outside of components or as a standalone package, it‚Äôs not that simple.</p><p>Especially when we have some long and complex composable code, it‚Äôs laborious to manually collect all the effects.</p><p>It‚Äôs also easy to forget collecting them (or you don‚Äôt have access to effects created in the composable functions) which might result in memory leakage and unexpected behavior.</p><p><code>effectScope</code> is introduced to solve this problem, and this feature was added in vue3.2, which belongs to the advanced content of the reactive system. This is the <a class=link href=https://vuejs.org/api/reactivity-advanced.html#effectscope target=_blank rel=noopener>official documentation</a> explanationÔºö</p><blockquote><p>Creates an effect scope object which can capture the reactive effects (i.e. computed and watchers) created within it so that these effects can be disposed together. For detailed use cases of this API, please consult its corresponding <a class=link href=https://github.com/vuejs/rfcs/blob/master/active-rfcs/0041-reactivity-effect-scope.md target=_blank rel=noopener>RFC</a>.</p></blockquote><p>Literally, it is the effect scope, used to collect the side effects created within it and to handle them uniformly. The main content of the API is to create an effect scope using <code>effectScope</code>, which can capture the reactive side effects (i.e., <code>computed</code> properties and <code>watchers</code>) created within it, so that the captured side effects can be dealt with together. Use <code>getCurrentScope</code> to return the current active effect scope. Use <code>onScopeDispose</code> to register a handler callback on the current active effect scope. This callback will be called when the related effect scope stops.</p><h2 id=usage>Usage</h2><p><code>effectScope</code> is mainly used in hooks, and <code>effectScope</code> is extensively utilized in <a class=link href=https://vueuse.org/guide/ target=_blank rel=noopener>vueuse</a>.</p><h3 id=basic>Basic</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>//</span> <span class=n>effect</span><span class=p>,</span> <span class=n>computed</span><span class=p>,</span> <span class=n>watch</span><span class=p>,</span> <span class=n>watchEffect</span> <span class=n>created</span> <span class=n>inside</span> <span class=n>the</span> <span class=n>scope</span> <span class=n>will</span> <span class=n>be</span> <span class=n>collected</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>Creating</span> <span class=n>a</span> <span class=n>new</span> <span class=n>scope</span>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>scope</span> <span class=o>=</span> <span class=n>effectScope</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>a</span> <span class=n>scope</span> <span class=n>allows</span> <span class=n>the</span> <span class=n>execution</span> <span class=n>of</span> <span class=n>a</span> <span class=n>run</span> <span class=n>function</span> <span class=p>(</span><span class=n>which</span> <span class=n>accepts</span> <span class=n>a</span> <span class=n>function</span> <span class=n>as</span> <span class=n>an</span> <span class=n>argument</span> <span class=ow>and</span> <span class=n>returns</span> <span class=n>the</span> <span class=k>return</span> <span class=n>value</span> <span class=n>of</span> <span class=n>that</span> <span class=n>function</span><span class=p>)</span> <span class=ow>and</span> <span class=n>captures</span> <span class=n>all</span> <span class=n>the</span> <span class=n>effects</span> <span class=n>created</span> <span class=n>during</span> <span class=n>the</span> <span class=n>execution</span> <span class=n>of</span> <span class=n>that</span> <span class=n>function</span><span class=p>,</span> <span class=n>including</span> <span class=n>APIs</span> <span class=n>that</span> <span class=n>can</span> <span class=n>create</span> <span class=n>effects</span><span class=p>,</span> <span class=n>such</span> <span class=n>as</span> <span class=n>computed</span><span class=p>,</span> <span class=n>watch</span><span class=p>,</span> <span class=ow>and</span> <span class=n>watchEffect</span>
</span></span><span class=line><span class=cl><span class=n>scope</span><span class=o>.</span><span class=n>run</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>const</span> <span class=n>doubled</span> <span class=o>=</span> <span class=n>computed</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=n>counter</span><span class=o>.</span><span class=n>value</span> <span class=o>*</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>watch</span><span class=p>(</span><span class=n>doubled</span><span class=p>,</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>doubled</span><span class=o>.</span><span class=n>value</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>watchEffect</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=s1>&#39;Count: &#39;</span><span class=p>,</span> <span class=n>doubled</span><span class=o>.</span><span class=n>value</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>to</span> <span class=n>dispose</span> <span class=n>all</span> <span class=n>effects</span> <span class=ow>in</span> <span class=n>the</span> <span class=n>scope</span>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>When</span> <span class=n>calling</span> <span class=n>scope</span><span class=o>.</span><span class=n>stop</span><span class=p>(),</span> <span class=n>all</span> <span class=n>captured</span> <span class=n>effects</span> <span class=n>will</span> <span class=n>be</span> <span class=n>cancelled</span><span class=p>,</span> <span class=n>including</span> <span class=n>nested</span> <span class=n>Scopes</span><span class=p>,</span> <span class=n>which</span> <span class=n>will</span> <span class=n>also</span> <span class=n>be</span> <span class=n>recursively</span> <span class=n>cancelled</span><span class=o>.</span>
</span></span><span class=line><span class=cl><span class=n>scope</span><span class=o>.</span><span class=n>stop</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=nested-scopes>Nested Scopes</h3><p>Nested scopes should also be collected by their parent scope. And when the parent scope gets disposed, all its descendant scopes will also be stopped.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=k>const</span> <span class=n>scope</span> <span class=o>=</span> <span class=n>effectScope</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>scope</span><span class=o>.</span><span class=n>run</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>const</span> <span class=n>doubled</span> <span class=o>=</span> <span class=n>computed</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=n>counter</span><span class=o>.</span><span class=n>value</span> <span class=o>*</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=o>//</span> <span class=ow>not</span> <span class=n>need</span> <span class=n>to</span> <span class=n>get</span> <span class=n>the</span> <span class=n>stop</span> <span class=n>handler</span><span class=p>,</span> <span class=n>it</span> <span class=n>will</span> <span class=n>be</span> <span class=n>collected</span> <span class=n>by</span> <span class=n>the</span> <span class=n>outer</span> <span class=n>scope</span>
</span></span><span class=line><span class=cl>  <span class=n>effectScope</span><span class=p>()</span><span class=o>.</span><span class=n>run</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>watch</span><span class=p>(</span><span class=n>doubled</span><span class=p>,</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=n>doubled</span><span class=o>.</span><span class=n>value</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>watchEffect</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=s1>&#39;Count: &#39;</span><span class=p>,</span> <span class=n>doubled</span><span class=o>.</span><span class=n>value</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>dispose</span> <span class=n>all</span> <span class=n>effects</span><span class=p>,</span> <span class=n>including</span> <span class=n>those</span> <span class=ow>in</span> <span class=n>the</span> <span class=n>nested</span> <span class=n>scopes</span>
</span></span><span class=line><span class=cl><span class=n>scope</span><span class=o>.</span><span class=n>stop</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=detached-nested-scopes>Detached Nested Scopes</h3><p><code>effectScope</code> accepts an argument to be created in &ldquo;detached&rdquo; mode. A detached scope will not be collected by its parent scope.</p><p>This also makes usages like <strong>lazy initialization</strong> possible.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=n>let</span><span class=w> </span><span class=n>nestedScope</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>const</span><span class=w> </span><span class=n>parentScope</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nf>effectScope</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>parentScope</span><span class=p>.</span><span class=nf>run</span><span class=p>(()</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=err>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>const</span><span class=w> </span><span class=n>doubled</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nf>computed</span><span class=p>(()</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=n>counter</span><span class=p>.</span><span class=n>value</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>2</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>//</span><span class=w> </span><span class=k>with</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>detected</span><span class=w> </span><span class=n>flag</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=o>//</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>scope</span><span class=w> </span><span class=n>will</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=n>be</span><span class=w> </span><span class=n>collected</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=n>disposed</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=k>outer</span><span class=w> </span><span class=n>scope</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>nestedScope</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nf>effectScope</span><span class=p>(</span><span class=no>true</span><span class=w> </span><span class=cm>/* detached */</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>nestedScope</span><span class=p>.</span><span class=nf>run</span><span class=p>(()</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=err>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nf>watch</span><span class=p>(</span><span class=n>doubled</span><span class=p>,</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=n>console</span><span class=p>.</span><span class=nf>log</span><span class=p>(</span><span class=n>doubled</span><span class=p>.</span><span class=n>value</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=err>}</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nf>watchEffect</span><span class=p>(()</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=n>console</span><span class=p>.</span><span class=nf>log</span><span class=p>(</span><span class=s1>&#39;Count: &#39;</span><span class=p>,</span><span class=w> </span><span class=n>doubled</span><span class=p>.</span><span class=n>value</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>}</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>//</span><span class=w> </span><span class=n>disposes</span><span class=w> </span><span class=k>all</span><span class=w> </span><span class=n>effects</span><span class=p>,</span><span class=w> </span><span class=n>but</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=o>`</span><span class=n>nestedScope</span><span class=o>`</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>parentScope</span><span class=p>.</span><span class=nf>stop</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>//</span><span class=w> </span><span class=n>stop</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>nested</span><span class=w> </span><span class=n>scope</span><span class=w> </span><span class=n>only</span><span class=w> </span><span class=k>when</span><span class=w> </span><span class=n>appropriate</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>nestedScope</span><span class=p>.</span><span class=nf>stop</span><span class=p>()</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><code>onScopeDispose</code></p><p>The global hook <code>onScopeDispose()</code> serves a similar functionality to <code>onUnmounted()</code>, but works for the current scope instead of the component instance. This could benefit composable functions to clean up their side effects along with its scope. Since <code>setup()</code> also creates a scope for the component, it will be equivalent to <code>onUnmounted()</code> when there is no explicit effect scope created.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>import</span> <span class=p>{</span> <span class=n>onScopeDispose</span> <span class=p>}</span> <span class=n>from</span> <span class=s1>&#39;vue&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>scope</span> <span class=o>=</span> <span class=n>effectScope</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>scope</span><span class=o>.</span><span class=n>run</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>onScopeDispose</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>console</span><span class=o>.</span><span class=n>log</span><span class=p>(</span><span class=s1>&#39;cleaned!&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>scope</span><span class=o>.</span><span class=n>stop</span><span class=p>()</span> <span class=o>//</span> <span class=n>logs</span> <span class=s1>&#39;cleaned!&#39;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=getting-the-current-scope>Getting the Current Scope</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>import { getCurrentScope } from &#39;vue&#39;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>getCurrentScope() // EffectScope | undefined
</span></span></code></pre></td></tr></table></div></div><h2 id=examples>Examples</h2><p>Some composables setup global side effects. For example the following <code>useMouse()</code> function:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>function</span> <span class=n>useMouse</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>const</span> <span class=n>x</span> <span class=o>=</span> <span class=n>ref</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>const</span> <span class=n>y</span> <span class=o>=</span> <span class=n>ref</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>function</span> <span class=n>handler</span><span class=p>(</span><span class=n>e</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>x</span><span class=o>.</span><span class=n>value</span> <span class=o>=</span> <span class=n>e</span><span class=o>.</span><span class=n>x</span>
</span></span><span class=line><span class=cl>    <span class=n>y</span><span class=o>.</span><span class=n>value</span> <span class=o>=</span> <span class=n>e</span><span class=o>.</span><span class=n>y</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>window</span><span class=o>.</span><span class=n>addEventListener</span><span class=p>(</span><span class=s1>&#39;mousemove&#39;</span><span class=p>,</span> <span class=n>handler</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>onUnmounted</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>window</span><span class=o>.</span><span class=n>removeEventListener</span><span class=p>(</span><span class=s1>&#39;mousemove&#39;</span><span class=p>,</span> <span class=n>handler</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>{</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>If the <code>useMouse</code> hook to obtain coordinates is used by multiple components, it will add multiple listeners, increasing performance cost. In this case, using <code>effectscope</code> is more performance-friendly.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>function</span> <span class=n>useMouse</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>const</span> <span class=n>x</span> <span class=o>=</span> <span class=n>ref</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>const</span> <span class=n>y</span> <span class=o>=</span> <span class=n>ref</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>function</span> <span class=n>handler</span><span class=p>(</span><span class=n>e</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>x</span><span class=o>.</span><span class=n>value</span> <span class=o>=</span> <span class=n>e</span><span class=o>.</span><span class=n>x</span>
</span></span><span class=line><span class=cl>    <span class=n>y</span><span class=o>.</span><span class=n>value</span> <span class=o>=</span> <span class=n>e</span><span class=o>.</span><span class=n>y</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>window</span><span class=o>.</span><span class=n>addEventListener</span><span class=p>(</span><span class=s1>&#39;mousemove&#39;</span><span class=p>,</span> <span class=n>handler</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>onScopeDispose</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>window</span><span class=o>.</span><span class=n>removeEventListener</span><span class=p>(</span><span class=s1>&#39;mousemove&#39;</span><span class=p>,</span> <span class=n>handler</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>{</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>function</span> <span class=n>createSharedComposable</span><span class=p>(</span><span class=n>composable</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>let</span> <span class=n>subscribers</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>  <span class=n>let</span> <span class=n>state</span><span class=p>,</span> <span class=n>scope</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>const</span> <span class=n>dispose</span> <span class=o>=</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>scope</span> <span class=o>&amp;&amp;</span> <span class=o>--</span><span class=n>subscribers</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>scope</span><span class=o>.</span><span class=n>stop</span><span class=p>()</span>
</span></span><span class=line><span class=cl>      <span class=n>state</span> <span class=o>=</span> <span class=n>scope</span> <span class=o>=</span> <span class=n>null</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span><span class=o>...</span><span class=n>args</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>subscribers</span><span class=o>++</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=n>state</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>scope</span> <span class=o>=</span> <span class=n>effectScope</span><span class=p>(</span><span class=bp>true</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=n>state</span> <span class=o>=</span> <span class=n>scope</span><span class=o>.</span><span class=n>run</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=n>composable</span><span class=p>(</span><span class=o>...</span><span class=n>args</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>onScopeDispose</span><span class=p>(</span><span class=n>dispose</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>state</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=n>useSharedMouse</span> <span class=o>=</span> <span class=n>createSharedComposable</span><span class=p>(</span><span class=n>useMouse</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>export</span> <span class=n>default</span> <span class=n>useSharedMouse</span>
</span></span></code></pre></td></tr></table></div></div></section><footer class=article-footer><section class=article-tags><a href=/tags/code/>Code</a>
<a href=/tags/javascript/>Javascript</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/advanced-usage-of-reduce-you-might-not-know/><div class=article-image><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h7QTz6KqyeYG_ausGQjj5g.jpeg loading=lazy data-key data-hash=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h7QTz6KqyeYG_ausGQjj5g.jpeg></div><div class=article-details><h2 class=article-title>Advanced Usage of Reduce You Might Not Know</h2></div></a></article><article class=has-image><a href=/p/vue3-performance-optimization-code-level-optimization/><div class=article-image><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KZsES-HkGUvu6TkmfmNMBA.png loading=lazy data-key data-hash=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KZsES-HkGUvu6TkmfmNMBA.png></div><div class=article-details><h2 class=article-title>Vue3 Performance Optimization ‚Äî Code-Level Optimization</h2></div></a></article><article class=has-image><a href=/p/vue3-performance-optimization-bundle-optimization/><div class=article-image><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KZsES-HkGUvu6TkmfmNMBA.png loading=lazy data-key data-hash=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KZsES-HkGUvu6TkmfmNMBA.png></div><div class=article-details><h2 class=article-title>Vue3 Performance Optimization ‚Äî Bundle Optimization</h2></div></a></article><article class=has-image><a href=/p/how-much-do-you-know-about-29-javascript-object-methods/><div class=article-image><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l_w8hkehf25Nx3H_AzEVbQ.jpeg loading=lazy data-key data-hash=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l_w8hkehf25Nx3H_AzEVbQ.jpeg></div><div class=article-details><h2 class=article-title>How Much Do You Know About 29 JavaScript Object Methods?</h2></div></a></article><article class=has-image><a href=/p/most-of-the-books-youve-read-are-mostly-forgotten-so-why-keep-reading/><div class=article-image><img src=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zm-09l_F3UwVf2IneHGHew.jpeg loading=lazy data-key data-hash=https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zm-09l_F3UwVf2IneHGHew.jpeg></div><div class=article-details><h2 class=article-title>Most of the books you‚Äôve read are mostly forgotten, so why keep reading?</h2></div></a></article></div></div></aside><script src=https://giscus.app/client.js data-repo=kxming/skstory data-repo-id=R_kgDOLehX4A data-category=Announcements data-category-id=DIC_kwDOLehX4M4Cd4Vx data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=en-us data-loading crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){setGiscusTheme(document.documentElement.dataset.scheme==="light"?"light":"dark_dimmed")}})()</script><footer class=site-footer><section class=copyright>&copy;
2024 SK Story</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.29.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>