<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="In what aspects is the performance of Vue3.0 mainly improved? Reactive Systems The core of the reactive system in Vue.js 2.x relies on Object.defineProperty. The entire object is hijacked and then a deep traversal of all properties is carried out, with a getter and setter added to each attribute to achieve reactivity.\nIn Vue.js 3.x, the Proxy object is used to rewrite the reactive system.\nIt can monitor newly added dynamic properties.">
<title>Part 1: 100 Front-end Questions and Answers</title>

<link rel='canonical' href='http://localhost:1313/p/part-1-100-front-end-questions-and-answers/'>

<link rel="stylesheet" href="/scss/style.min.d8118f156935b64eca93aca758476adca858d2c47354971654d9bd2933a0e45f.css"><meta property='og:title' content="Part 1: 100 Front-end Questions and Answers">
<meta property='og:description' content="In what aspects is the performance of Vue3.0 mainly improved? Reactive Systems The core of the reactive system in Vue.js 2.x relies on Object.defineProperty. The entire object is hijacked and then a deep traversal of all properties is carried out, with a getter and setter added to each attribute to achieve reactivity.\nIn Vue.js 3.x, the Proxy object is used to rewrite the reactive system.\nIt can monitor newly added dynamic properties.">
<meta property='og:url' content='http://localhost:1313/p/part-1-100-front-end-questions-and-answers/'>
<meta property='og:site_name' content='SK Story'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Javascript' /><meta property='article:tag' content='Vue' /><meta property='article:published_time' content='2024-02-07T16:22:38&#43;08:00'/><meta property='article:modified_time' content='2024-02-07T16:22:38&#43;08:00'/><meta property='og:image' content='https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ge1I6ow4qwBbwv5A' />
<meta name="twitter:site" content="@https://twitter.com/ShawnKxming">
    <meta name="twitter:creator" content="@https://twitter.com/ShawnKxming"><meta name="twitter:title" content="Part 1: 100 Front-end Questions and Answers">
<meta name="twitter:description" content="In what aspects is the performance of Vue3.0 mainly improved? Reactive Systems The core of the reactive system in Vue.js 2.x relies on Object.defineProperty. The entire object is hijacked and then a deep traversal of all properties is carried out, with a getter and setter added to each attribute to achieve reactivity.\nIn Vue.js 3.x, the Proxy object is used to rewrite the reactive system.\nIt can monitor newly added dynamic properties."><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ge1I6ow4qwBbwv5A' />
    <link rel="shortcut icon" href="/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu61f49258472ba116407e56a959fa113d_189154_300x0_resize_q75_box.jpeg" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üç•</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">SK Story</a></h1>
            <h2 class="site-description">Shawn King&#39;s Stories Website</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='mailto:kxming0229@gmail.com'
                        target="_blank"
                        title="Email"
                        rel="me"
                    >
                        
                        
                            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-mail"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z" /><path d="M3 7l9 6l9 -6" /></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://www.facebook.com/p/King-Shawn-100092679065959/'
                        target="_blank"
                        title="Facebook"
                        rel="me"
                    >
                        
                        
                            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-brand-facebook"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3" /></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://twitter.com/ShawnKxming'
                        target="_blank"
                        title="Twitter"
                        rel="me"
                    >
                        
                        
                            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-brand-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4l11.733 16h4.267l-11.733 -16z" /><path d="M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772" /></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://t.me/shawnkxming'
                        target="_blank"
                        title="Telegram"
                        rel="me"
                    >
                        
                        
                            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-brand-telegram"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 10l-4 4l6 6l4 -16l-18 7l4 2l2 6l3 -4" /></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://medium.com/@kxming'
                        target="_blank"
                        title="Medium"
                        rel="me"
                    >
                        
                        
                            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-brand-medium"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z" /><path d="M8 9h1l3 3l3 -3h1" /><path d="M8 15l2 0" /><path d="M14 15l2 0" /><path d="M9 9l0 6" /><path d="M15 9l0 6" /></svg>
                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Links</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>About</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>Dark Mode</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#in-what-aspects-is-the-performance-of-vue30-mainly-improved">In what aspects is the performance of Vue3.0 mainly improved?</a>
      <ol>
        <li><a href="#reactive-systems">Reactive Systems</a></li>
        <li><a href="#compilation-stage">Compilation Stage</a></li>
        <li><a href="#source-code-size">Source Code Size</a></li>
      </ol>
    </li>
    <li><a href="#what-are-the-new-components-in-vue3">What are the new components in Vue3?</a>
      <ol>
        <li><a href="#fragment">Fragment</a></li>
        <li><a href="#teleport">Teleport</a></li>
        <li><a href="#suspense">Suspense</a></li>
      </ol>
    </li>
    <li><a href="#whats-the-difference-between-vue20-and-vue30">What‚Äôs the difference between Vue2.0 and Vue3.0?</a></li>
    <li><a href="#vue-life-cycle">Vue Life Cycle</a></li>
    <li><a href="#whats-the-difference-between-the-composition-api-and-react-hook-as-they-are-said-to-be-quite-similar">What‚Äôs the difference between the Composition API and React Hook as they are said to be quite similar?</a></li>
    <li><a href="#whats-the-difference-between-the-composition-api-and-the-options-api">What‚Äôs the difference between the Composition API and the Options API?</a>
      <ol>
        <li><a href="#options-api">Options API</a></li>
        <li><a href="#composition-api">Composition API</a></li>
        <li><a href="#comparison">Comparison</a>
          <ol>
            <li><a href="#logic-organization">Logic Organization</a></li>
            <li><a href="#logic-reuse">Logic Reuse</a></li>
          </ol>
        </li>
        <li><a href="#conclusion">Conclusion</a></li>
      </ol>
    </li>
    <li><a href="#what-is-a-single-page-application-spa-and-how-do-you-optimize-the-loading-of-the-first-screen">What is a Single Page Application (SPA), and how do you optimize the loading of the first screen?</a></li>
    <li><a href="#what-performance-optimizations-have-you-done-on-a-vue-project">What performance optimizations have you done on a Vue project?</a></li>
    <li><a href="#what-are-the-ways-of-communication-between-vue-components">What are the ways of communication between Vue components?</a></li>
    <li><a href="#what-are-the-common-modifiers-in-vue">What are the common modifiers in Vue?</a>
      <ol>
        <li><a href="#form-modifiers">Form Modifiers</a></li>
        <li><a href="#event-modifiers">Event Modifiers</a></li>
      </ol>
    </li>
    <li><a href="#what-is-the-function-of-nexttick-in-vue">What is the function of $nextTick in Vue?</a></li>
    <li><a href="#how-to-understand-two-way-data-binding">How to understand two-way data binding</a></li>
    <li><a href="#what-is-the-difference-between-v-show-and-v-if-can-you-explain-it">What is the difference between v-show and v-if? Can you explain it?</a></li>
    <li><a href="#have-you-ever-used-keep-alive-what-is-it-for">Have you ever used keep-alive? What is it for?</a></li>
    <li><a href="#can-you-implement-a-virtual-dom">Can you implement a Virtual DOM?</a>
      <ol>
        <li><a href="#first-lets-see-how-the-browser-understands-html">First, let‚Äôs see how the browser understands HTML:</a></li>
        <li><a href="#next-see-how-vue-understands-html-template">Next, see how Vue understands HTML template</a></li>
        <li><a href="#summary">Summary</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/p/part-1-100-front-end-questions-and-answers/">
                
                    <img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ge1I6ow4qwBbwv5A" loading="lazy" alt="Featured image of post Part 1: 100 Front-end Questions and Answers" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/javascript/" style="background-color: #D1D419; color: #fff;">
                Javascript
            </a>
        
            <a href="/categories/vue/" style="background-color: #28A243; color: #fff;">
                Vue
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/part-1-100-front-end-questions-and-answers/">Part 1: 100 Front-end Questions and Answers</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Feb 07, 2024</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    30 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h2 id="in-what-aspects-is-the-performance-of-vue30-mainly-improved">In what aspects is the performance of Vue3.0 mainly improved?</h2>
<h3 id="reactive-systems">Reactive Systems</h3>
<p>The core of the reactive system in Vue.js 2.x relies on Object.defineProperty. The entire object is hijacked and then a deep traversal of all properties is carried out, with a getter and setter added to each attribute to achieve reactivity.</p>
<p>In Vue.js 3.x, the Proxy object is used to rewrite the reactive system.</p>
<ul>
<li>
<p>It can monitor newly added dynamic properties.</p>
</li>
<li>
<p>It can monitor deleted properties.</p>
</li>
<li>
<p>It can monitor the index and length properties of the array.</p>
</li>
</ul>
<p>Implementation Principle:</p>
<p>Through the Proxy (Agent): Intercepts any changes in object properties, including changing property values, adding properties, and deleting properties.</p>
<p>Via Reflect (Reflection): Operates on the properties of the source object.</p>
<p>Proxy and Reflect as Described in the MDN Documentation:</p>
<ul>
<li>
<p>Proxy: <a class="link" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy"  target="_blank" rel="noopener"
    >Proxy ‚Äî JavaScript | MDN</a></p>
</li>
<li>
<p>Reflect: <a class="link" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect"  target="_blank" rel="noopener"
    >Reflect ‚Äî JavaScript | MDN</a></p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">new Proxy(data, {
</span></span><span class="line"><span class="cl">  // Intercept to read property values
</span></span><span class="line"><span class="cl">  get (target, prop) {
</span></span><span class="line"><span class="cl">    return Reflect.get(target, prop)
</span></span><span class="line"><span class="cl">  },
</span></span><span class="line"><span class="cl">  // Intercept to set property values or add new properties
</span></span><span class="line"><span class="cl">  set (target, prop, value) {
</span></span><span class="line"><span class="cl">    return Reflect.set(target, prop, value)
</span></span><span class="line"><span class="cl">  },
</span></span><span class="line"><span class="cl">  // Intercept to delete properties
</span></span><span class="line"><span class="cl">  deleteProperty (target, prop) {
</span></span><span class="line"><span class="cl">    return Reflect.deleteProperty(target, prop)
</span></span><span class="line"><span class="cl">  }
</span></span><span class="line"><span class="cl">})
</span></span><span class="line"><span class="cl">proxy.name = &#39;tom&#39; ![]
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="compilation-stage">Compilation Stage</h3>
<p>Vue.js 2.x optimizes the diff process by marking static nodes</p>
<p>In Vue.js 3.x</p>
<ul>
<li>
<p>Vue.js 3.x marks and lifts all static root nodes, during diff only has to compare the content of dynamic nodes</p>
</li>
<li>
<p>Fragments (upgrade vetur plugin): No need for unique root node in the template, you can directly place text or peer tags</p>
</li>
<li>
<p>Static promotion (hoistStatic), when using hoistStatic, all static nodes are lifted outside the render method. Only need to be created once when the application starts, and then used, just need to apply the extracted static nodes, which will be reused with each rendering.</p>
</li>
<li>
<p>Patch flag, add corresponding markings at the end of the dynamic tag, only the node with patchFlag is considered as a dynamic element, will track attribute modifications, can quickly find dynamic nodes, no need to traverse one by one, improved the performance of virtual dom diff.</p>
</li>
<li>
<p>Cache event handling function cacheHandler, avoid regenerating a new function every time it is triggered to update the previous function.</p>
</li>
</ul>
<h3 id="source-code-size">Source Code Size</h3>
<p>Compared with Vue2, the overall size of Vue3 has been reduced, besides removing some infrequently used APIs.</p>
<p>Tree Shanking</p>
<ul>
<li>
<p>Any function, such as ref, reactive, computed, etc., is only packaged when it is used.</p>
</li>
<li>
<p>Through static analysis in the compilation stage, find the modules that have not been imported and mark them, and shake off these modules.</p>
</li>
</ul>
<h2 id="what-are-the-new-components-in-vue3">What are the new components in Vue3?</h2>
<h3 id="fragment">Fragment</h3>
<p>In Vue2: A component must have a root tag</p>
<p>In Vue3: A component can be without a root tag, multiple tags will be wrapped in a Fragment virtual element</p>
<p>Benefits: Reduces tag level, reduces memory usage</p>
<h3 id="teleport">Teleport</h3>
<p>What is Teleport? ‚Äî ‚Äî Teleport is a technology that can move our component‚Äôs HTML structure to a specified location.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;teleport to=&#34;destination&#34;&gt;
</span></span><span class="line"><span class="cl">    &lt;div v-if=&#34;isShow&#34; class=&#34;mask&#34;&gt;
</span></span><span class="line"><span class="cl">        &lt;div class=&#34;dialog&#34;&gt;
</span></span><span class="line"><span class="cl">            &lt;h3&gt;I am a pop-up window&lt;/h3&gt;
</span></span><span class="line"><span class="cl">            &lt;button @click=&#34;isShow = false&#34;&gt;Close Popup&lt;/button&gt;
</span></span><span class="line"><span class="cl">        &lt;/div&gt;
</span></span><span class="line"><span class="cl">    &lt;/div&gt;
</span></span><span class="line"><span class="cl">&lt;/teleport&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="suspense">Suspense</h3>
<p>Render some extra content while waiting for asynchronous components to provide a better user experience</p>
<p>Steps to use:</p>
<p>Asynchronously import components</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">import</span> <span class="p">{</span><span class="n">defineAsyncComponent</span><span class="p">}</span> <span class="n">from</span> <span class="s1">&#39;vue&#39;</span>
</span></span><span class="line"><span class="cl"><span class="k">const</span> <span class="n">Child</span> <span class="o">=</span> <span class="n">defineAsyncComponent</span><span class="p">(()</span><span class="o">=&gt;</span><span class="n">import</span><span class="p">(</span><span class="s1">&#39;./components/Child.vue&#39;</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Wrap the component with Suspense and configure default and fallback</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;template&gt;
</span></span><span class="line"><span class="cl">    &lt;div class=&#34;app&#34;&gt;
</span></span><span class="line"><span class="cl">        &lt;h3&gt;I am App component&lt;/h3&gt;
</span></span><span class="line"><span class="cl">        &lt;Suspense&gt;
</span></span><span class="line"><span class="cl">            &lt;template v-slot:default&gt;
</span></span><span class="line"><span class="cl">                &lt;Child/&gt;
</span></span><span class="line"><span class="cl">            &lt;/template&gt;
</span></span><span class="line"><span class="cl">            &lt;template v-slot:fallback&gt;
</span></span><span class="line"><span class="cl">                &lt;h3&gt;Loading.....&lt;/h3&gt;
</span></span><span class="line"><span class="cl">            &lt;/template&gt;
</span></span><span class="line"><span class="cl">        &lt;/Suspense&gt;
</span></span><span class="line"><span class="cl">    &lt;/div&gt;
</span></span><span class="line"><span class="cl">&lt;/template&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="whats-the-difference-between-vue20-and-vue30">What‚Äôs the difference between Vue2.0 and Vue3.0?</h2>
<ol>
<li>
<p>The reconfiguration of the reactive system, replacing Object.defineProperty with proxy.</p>
</li>
<li>
<p>TypeScript support.</p>
</li>
<li>
<p>Addition of the Composition API for better logic reuse and code organization.</p>
</li>
<li>
<p>The priority of v-if and v-for.</p>
</li>
<li>
<p>Static element hoisting.</p>
</li>
<li>
<p>Static marking of virtual nodes.</p>
</li>
<li>
<p>Changes in life cycle.</p>
</li>
<li>
<p>Package size optimization.</p>
</li>
<li>
<p>Improved ssr rendering performance.</p>
</li>
<li>
<p>Supports multiple root nodes.</p>
</li>
</ol>
<h2 id="vue-life-cycle">Vue Life Cycle</h2>
<p>Life cycle of Vue2</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*byyX8EW6mIhRsCBWwByNYg.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>Life cycle of Vue3</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GuPF9Iep5TpjcfNEfxcouA.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>In Vue 3.0, you can still use the life cycle hooks of Vue 2.x, but two of them have been renamed:</p>
<ul>
<li>
<p>beforeDestroy has been renamed as beforeUnmount</p>
</li>
<li>
<p>destroyed has been renamed as unmounted</p>
</li>
</ul>
<p>Vue 3.0 also provides life cycle hooks in the form of Composition API. The correspondence with hooks in Vue 2.x is as follows:</p>
<ul>
<li>
<p>beforeCreate ===&gt; setup()</p>
</li>
<li>
<p>created =====&gt; setup()</p>
</li>
<li>
<p>beforeMount ==&gt; onBeforeMount</p>
</li>
<li>
<p>mounted =====&gt; onMounted</p>
</li>
<li>
<p>beforeUpdate ==&gt; onBeforeUpdate</p>
</li>
<li>
<p>updated =====&gt; onUpdated</p>
</li>
<li>
<p>beforeUnmount =&gt; onBeforeUnmount</p>
</li>
<li>
<p>unmounted ==&gt; onUnmounted</p>
</li>
</ul>
<p>A Vue instance has a complete life cycle, which is a series of processes from starting to create, initializing data, compiling templates, mounting Dom to rendering, updating to rendering, and unmounting. This is called Vue‚Äôs life cycle.</p>
<ol>
<li>
<p>beforeCreate (before creation): Data observation and initialization of events have not yet started, i.e., at this point, neither the reactive tracking of data nor the setting of events/watcher have been made. So, you cannot access the methods and data on data, computed, watch, and methods.</p>
</li>
<li>
<p>created (after creation): After the instance is created, the options configured on the instance including data, computed, watch, methods are configured. But the rendered nodes haven&rsquo;t been mounted on the DOM yet, so you cannot access the $el property.</p>
</li>
<li>
<p>beforeMount (before mounting): It&rsquo;s called before the mounting starts, when the corresponding render function is called for the first time. At this stage, the instance has completed the following configurations: compiled the template, generated HTML by combining the data and the template. But the HTML has not been mounted on the page yet.</p>
</li>
<li>
<p>mounted (after mounting): It&rsquo;s called after the el is replaced by the newly created vm.$el, and the instance is mounted. At this stage, the instance has completed the following configurations: replaced the DOM object pointed by el attribute with the compiled HTML content. Completed rendering the HTML in the template to the HTML page. Ajax interactions would take place in this process.</p>
</li>
<li>
<p>beforeUpdate (before update): It&rsquo;s called when the reactive data is updated. At this point, although the reactive data has been updated, the corresponding real DOM has not been rendered yet.</p>
</li>
<li>
<p>updated (after update): It&rsquo;s called after the virtual DOM is re-rendered and patched due to data changes. At this time, the DOM has been updated according to the changes in the reactive data. You can perform operations dependent on the DOM when the hook is called because the component DOM has been updated. However, in most cases, you should avoid changing the state during this period, as this may result in an infinite update loop. This hook is not called during server-side rendering.</p>
</li>
<li>
<p>eforeDestroy (before destruction): This is called before the instance is destroyed. At this step, the instance is still fully available, this can still get the instance.</p>
</li>
<li>
<p>destroyed (after destruction): This is called after the instance is destroyed. After calling this hook, all things indicated by the Vue instance will be unbound, all event listeners will be removed, and all child instances will also be destroyed. This hook is not called during server-side rendering.</p>
</li>
</ol>
<h2 id="whats-the-difference-between-the-composition-api-and-react-hook-as-they-are-said-to-be-quite-similar">What‚Äôs the difference between the Composition API and React Hook as they are said to be quite similar?</h2>
<p>From the perspective of React Hook‚Äôs implementation, React Hook is based on the call order of useState to determine the state of the next re-rendering. Therefore, there are a few restrictions:</p>
<ul>
<li>
<p>Do not use Hook in loops, conditionals, or nested function calls</p>
</li>
<li>
<p>You must ensure it‚Äôs always called at the top level of your React functions</p>
</li>
<li>
<p>he dependence of useEffect and useMemo must be manually determined</p>
</li>
</ul>
<p>On the other hand, the Composition API is based on Vue‚Äôs reactive system. Comparing to React Hook:</p>
<ul>
<li>
<p>In the setup function, a component instance only calls setup once. However, with React Hook, the Hook needs to be called every time it re-renders. This creates more GC pressure for React and relatively slower performance comparing to Vue.</p>
</li>
<li>
<p>With the Composition API, you do not have to worry about the order of calls. It can also be used in loops, conditionals, and nested functions.</p>
</li>
<li>
<p>The reactive system automatically implements dependency collection, and the performance optimization of the component is done internally by Vue. However, with React Hook, dependencies need to be manually passed and the order of dependencies must be ensured, otherwise, component performance will go down due to incorrect dependencies when using useEffect and useMemo, etc.</p>
</li>
</ul>
<p>Even though the Composition API is used in similar ways as the React Hook, its design concept is also a reference to the React Hook.</p>
<h2 id="whats-the-difference-between-the-composition-api-and-the-options-api">What‚Äôs the difference between the Composition API and the Options API?</h2>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*enqGPX4DOE8THuhSw82x0w.gif"
	
	
	
	loading="lazy"
	
	
></p>
<h3 id="options-api">Options API</h3>
<p>The Options API, often referred to as the options API, is found in files with the Vue extension. It deals with page logic by defining properties and methods such as methods, computed, watch, data, etc.</p>
<p>For instance, if with the Options code writing style, if it‚Äôs about component state, it‚Äôs written in the data property. If it‚Äôs a method, it‚Äôs written in the methods property‚Ä¶</p>
<p>Organizing logic with component options (data, computed, methods, watch) is effective in most cases.</p>
<p>However, as components become more complex, resulting in a long list of corresponding properties, this can make the components hard to read and understand.</p>
<h3 id="composition-api">Composition API</h3>
<p>In Vue3‚Äôs Composition API, components are organized based on logic functionality, with all APIs defined for a particular feature are grouped together (more high cohesion, low coupling).</p>
<p>Even if the project is very large and has many features, we can quickly locate all the APIs used for a particular feature.</p>
<h3 id="comparison">Comparison</h3>
<p>Below are two main comparisons between the Composition API and Options API:</p>
<ul>
<li>
<p>Logic Organization</p>
</li>
<li>
<p>Logic Reuse</p>
</li>
</ul>
<h4 id="logic-organization">Logic Organization</h4>
<p><strong>Options API:</strong></p>
<p>Suppose a component is a large component with many logic concerns within it (corresponding to the different colors in the figure below).</p>
<p><img src="https://miro.medium.com/v2/resize:fit:524/format:webp/1*8mjxWSKlTcGHFupt-CdGkQ.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>You can see that this fragmentation makes it difficult to understand and maintain complex components.</p>
<p>The separation of options masks potential logic problems. In addition, when dealing with a single logic concern, we must continually ‚Äújump‚Äù to the relevant code‚Äôs option block.</p>
<p><strong>Compostion API:</strong></p>
<p>The Composition API is used to address these issues by placing all the code related to a logic concern in one function. This way, when we need to modify a feature, we no longer need to jump around in the file.</p>
<p>Here‚Äôs a simple example, putting all the code related to the count property in one function.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">function</span> <span class="n">useCount</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">let</span> <span class="n">count</span> <span class="o">=</span> <span class="n">ref</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">let</span> <span class="n">double</span> <span class="o">=</span> <span class="n">computed</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">count</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="n">handleConut</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">count</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">count</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl">    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">count</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">count</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">double</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">handleConut</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Use count in the component</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="k">export</span> <span class="n">default</span> <span class="n">defineComponent</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="n">setup</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">const</span> <span class="p">{</span> <span class="n">count</span><span class="p">,</span> <span class="n">double</span><span class="p">,</span> <span class="n">handleConut</span> <span class="p">}</span> <span class="o">=</span> <span class="n">useCount</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">count</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">double</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">handleConut</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Here‚Äôs another figure for comparison. You can intuitively feel the advantage of Composition API in terms of logic organization. Later on, if you need to modify a property feature, just jump to the method controlling that property.</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fbc2isYpnrtSvo5bT7IPxA.png"
	
	
	
	loading="lazy"
	
	
></p>
<h4 id="logic-reuse">Logic Reuse</h4>
<p>In Vue2, we used mixin to reuse the same logic.</p>
<p>Here‚Äôs an example: we would create a separate mixin.js file</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="k">export</span> <span class="k">const</span> <span class="n">MoveMixin</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">data</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">x</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="n">y</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl">  <span class="n">methods</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">handleKeyup</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">code</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="k">switch</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">code</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">case</span> <span class="s2">&#34;ArrowUp&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">          <span class="n">this</span><span class="o">.</span><span class="n">y</span><span class="o">--</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">case</span> <span class="s2">&#34;ArrowDown&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">          <span class="n">this</span><span class="o">.</span><span class="n">y</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">case</span> <span class="s2">&#34;ArrowLeft&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">          <span class="n">this</span><span class="o">.</span><span class="n">x</span><span class="o">--</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">case</span> <span class="s2">&#34;ArrowRight&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">          <span class="n">this</span><span class="o">.</span><span class="n">x</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl">  <span class="n">mounted</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">window</span><span class="o">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="s2">&#34;keyup&#34;</span><span class="p">,</span> <span class="n">this</span><span class="o">.</span><span class="n">handleKeyup</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl">  <span class="n">unmounted</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">window</span><span class="o">.</span><span class="n">removeEventListener</span><span class="p">(</span><span class="s2">&#34;keyup&#34;</span><span class="p">,</span> <span class="n">this</span><span class="o">.</span><span class="n">handleKeyup</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Then use it in the component</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">template</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Mouse</span> <span class="n">position</span><span class="p">:</span> <span class="n">x</span> <span class="p">{{</span> <span class="n">x</span> <span class="p">}}</span> <span class="o">/</span> <span class="n">y</span> <span class="p">{{</span> <span class="n">y</span> <span class="p">}}</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">template</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">script</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">import</span> <span class="n">mousePositionMixin</span> <span class="n">from</span> <span class="s1">&#39;./mouse&#39;</span>
</span></span><span class="line"><span class="cl"><span class="k">export</span> <span class="n">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">mixins</span><span class="p">:</span> <span class="p">[</span><span class="n">mousePositionMixin</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The use of a single mixin doesn‚Äôt seem to be a problem, but when we mix a large amount of different mixins into one component</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">mixins: [mousePositionMixin, fooMixin, barMixin, otherMixin]
</span></span></code></pre></td></tr></table>
</div>
</div><p>there are two very obvious issues:</p>
<ul>
<li>
<p>Name conflicts</p>
</li>
<li>
<p>Unclear data source</p>
</li>
</ul>
<p>Now let‚Äôs turn the code above into Composition API style.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">import</span> <span class="p">{</span> <span class="n">onMounted</span><span class="p">,</span> <span class="n">onUnmounted</span><span class="p">,</span> <span class="n">reactive</span> <span class="p">}</span> <span class="n">from</span> <span class="s2">&#34;vue&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">export</span> <span class="n">function</span> <span class="n">useMove</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">const</span> <span class="n">position</span> <span class="o">=</span> <span class="n">reactive</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="n">x</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">y</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl">  <span class="k">const</span> <span class="n">handleKeyup</span> <span class="o">=</span> <span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">code</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">//</span> <span class="err">‰∏ä‰∏ãÂ∑¶Âè≥</span> <span class="n">x</span> <span class="n">y</span>
</span></span><span class="line"><span class="cl">    <span class="k">switch</span> <span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">code</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="s2">&#34;ArrowUp&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="o">//</span> <span class="n">y</span><span class="o">.</span><span class="n">value</span><span class="o">--</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">position</span><span class="o">.</span><span class="n">y</span><span class="o">--</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="s2">&#34;ArrowDown&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="o">//</span> <span class="n">y</span><span class="o">.</span><span class="n">value</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">position</span><span class="o">.</span><span class="n">y</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="s2">&#34;ArrowLeft&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="o">//</span> <span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="o">--</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">position</span><span class="o">.</span><span class="n">x</span><span class="o">--</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="s2">&#34;ArrowRight&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="o">//</span> <span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">position</span><span class="o">.</span><span class="n">x</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl">  <span class="n">onMounted</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">window</span><span class="o">.</span><span class="n">addEventListener</span><span class="p">(</span><span class="s2">&#34;keyup&#34;</span><span class="p">,</span> <span class="n">handleKeyup</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl">  <span class="n">onUnmounted</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">window</span><span class="o">.</span><span class="n">removeEventListener</span><span class="p">(</span><span class="s2">&#34;keyup&#34;</span><span class="p">,</span> <span class="n">handleKeyup</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span> <span class="n">position</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Use it in the component</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">template</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Mouse</span> <span class="n">position</span><span class="p">:</span> <span class="n">x</span> <span class="p">{{</span> <span class="n">x</span> <span class="p">}}</span> <span class="o">/</span> <span class="n">y</span> <span class="p">{{</span> <span class="n">y</span> <span class="p">}}</span>
</span></span><span class="line"><span class="cl">  <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">template</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">script</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">import</span> <span class="p">{</span> <span class="n">useMove</span> <span class="p">}</span> <span class="n">from</span> <span class="s2">&#34;./useMove&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">import</span> <span class="p">{</span> <span class="n">toRefs</span> <span class="p">}</span> <span class="n">from</span> <span class="s2">&#34;vue&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">export</span> <span class="n">default</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">setup</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="p">{</span> <span class="n">position</span> <span class="p">}</span> <span class="o">=</span> <span class="n">useMove</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="p">{</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="p">}</span> <span class="o">=</span> <span class="n">toRefs</span><span class="p">(</span><span class="n">position</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">x</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="n">y</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>You can see that the whole data source is clear now. Even if you are going to write more hook functions, you won‚Äôt have name conflicts.</p>
<h3 id="conclusion">Conclusion</h3>
<ul>
<li>
<p>In terms of logic organization and logic reuse, the Composition API is superior to the Options API.</p>
</li>
<li>
<p>As the Composition API is almost functional, it has better type inference.</p>
</li>
<li>
<p>The Composition API is tree-shaking friendly, and the code is more compressible.</p>
</li>
<li>
<p>You won‚Äôt see the use of ‚Äòthis‚Äô in the Composition API, which reduces the ambiguity of this.</p>
</li>
<li>
<p>If it‚Äôs a small component, the continued use of Options API is also very friendly.</p>
</li>
</ul>
<h2 id="what-is-a-single-page-application-spa-and-how-do-you-optimize-the-loading-of-the-first-screen">What is a Single Page Application (SPA), and how do you optimize the loading of the first screen?</h2>
<p>A single page web application (SPA) is an application with only one web page. It is a web application that loads a single HTML page and dynamically updates that page as the user interacts with the application. Most of the Vue projects we develop are built quickly with official CLI scaffolding. We build an instance directly through <code>new Vue</code> and pass in <code>el:#app</code> as the mount parameter. After packaging with <code>npm run build</code>, we generate a single <code>index.html</code>, which is called a single page application.</p>
<p>Of course, Vue can also be introduced like jq, as the basic framework for multi-page applications.</p>
<p>SPA First Screen Optimization Methods:</p>
<ul>
<li>
<p>Reduce entry file accumulation</p>
</li>
<li>
<p>Static resource local caching</p>
</li>
<li>
<p>On-demand loading of UI framework</p>
</li>
<li>
<p>Image resource compression</p>
</li>
<li>
<p>Component repeated packaging</p>
</li>
<li>
<p>Activate GZip compression</p>
</li>
<li>
<p>Use SSR</p>
</li>
</ul>
<h2 id="what-performance-optimizations-have-you-done-on-a-vue-project">What performance optimizations have you done on a Vue project?</h2>
<ol>
<li>v-if and v-show</li>
</ol>
<ul>
<li>
<p>Use v-show for frequent switching, taking advantage of its caching feature.</p>
</li>
<li>
<p>Use v-if for first screen rendering, it will not render if it&rsquo;s false.</p>
</li>
</ul>
<ol start="2">
<li>v-for use key</li>
</ol>
<ul>
<li>
<p>When the list changes, use a unique unchanging key in the loop to take advantage of its local reuse strategy.</p>
</li>
<li>
<p>When the list is rendered only once, the key can use the loop&rsquo;s index.</p>
</li>
</ul>
<ol start="3">
<li>Listeners and computed properties</li>
</ol>
<ul>
<li>
<p>The watch listener is used when data changes trigger other actions.</p>
</li>
<li>
<p>Make more use of computed computed properties. As the name suggests, these are newly calculated properties that will not trigger recalculation if the dependent data has not changed.</p>
</li>
</ul>
<ol start="4">
<li>Correct use of the lifecycle</li>
</ol>
<ul>
<li>
<p>Destruction of events bound or the timer happens at the destroyed stage.</p>
</li>
<li>
<p>When using dynamic components, you can cache them with keep-alive, and related operations can be activated in the activated stage.</p>
</li>
</ul>
<ol start="5">
<li>Data response processing</li>
</ol>
<ul>
<li>
<p>Data that does not need to be processed responsively can be handled with Object.freeze, or can be defined directly using this.xxx = xxx.</p>
</li>
<li>
<p>Properties that need to be processed responsively can be handled using this.$set instead of JSON.parse(JSON.stringify(XXX)).</p>
</li>
</ul>
<ol start="6">
<li>Route loading</li>
</ol>
<ul>
<li>The page components can be loaded asynchronously.</li>
</ul>
<ol start="7">
<li>Plugin Import</li>
</ol>
<ul>
<li>Third-party plugins can be loaded on-demand, such as element-ui.</li>
</ul>
<ol start="8">
<li>Reduce the volume of code</li>
</ol>
<ul>
<li>
<p>Use mixin to extract common methods.</p>
</li>
<li>
<p>Extract common components.</p>
</li>
<li>
<p>Define common methods in common js.</p>
</li>
<li>
<p>Extract common css.</p>
</li>
</ul>
<ol start="9">
<li>Compilation</li>
</ol>
<ul>
<li>
<p>If the template needs to be compiled online, the complete version of vue.esm.js can be used.</p>
</li>
<li>
<p>If the template does not need to be compiled online, the runtime version vue.runtime.esm.js can be adopted, which is about 30% smaller in volume than the complete version.</p>
</li>
</ul>
<ol start="10">
<li>Rendering methods</li>
</ol>
<ul>
<li>
<p>Server-side rendering; if the website requires SEO, you can use server-side rendering.</p>
</li>
<li>
<p>Front-end rendering; some backend management systems used internally by companies can adopt front-end rendering.</p>
</li>
</ul>
<ol start="11">
<li>Use of font icons</li>
</ol>
<ul>
<li>Some pictographic icons should use font icons as much as possible.</li>
</ul>
<p>Look at this article for more optimization content ‚Äî <a class="link" href="https://medium.com/@kxming/what-optimizations-can-be-utilized-for-frontend-performance-62883de81fa8"  target="_blank" rel="noopener"
    >What optimizations can be utilized for frontend performance?</a></p>
<h2 id="what-are-the-ways-of-communication-between-vue-components">What are the ways of communication between Vue components?</h2>
<p>Ways of communication between Vue3 components:</p>
<ul>
<li>
<p>props</p>
</li>
<li>
<p>$emit</p>
</li>
<li>
<p>expose / ref</p>
</li>
<li>
<p>$attrs</p>
</li>
<li>
<p>v-model</p>
</li>
<li>
<p>provide / inject</p>
</li>
<li>
<p>Vuex</p>
</li>
<li>
<p>mitt</p>
</li>
</ul>
<p>Ways of communication between Vue2 components:</p>
<ul>
<li>
<p>props</p>
</li>
<li>
<p>$emit / v-on</p>
</li>
<li>
<p>.sync</p>
</li>
<li>
<p>v-model</p>
</li>
<li>
<p>ref</p>
</li>
<li>
<p>$children / $parent</p>
</li>
<li>
<p>$attrs / $listeners</p>
</li>
<li>
<p>provide / inject</p>
</li>
<li>
<p>EventBus</p>
</li>
<li>
<p>Vuex</p>
</li>
<li>
<p>$root</p>
</li>
<li>
<p>slot</p>
</li>
</ul>
<h2 id="what-are-the-common-modifiers-in-vue">What are the common modifiers in Vue?</h2>
<h3 id="form-modifiers">Form Modifiers</h3>
<p>(1) .lazy</p>
<p>By default, v-model synchronizes the value of the input box with the data after each input event. You can add the lazy modifier, so that it synchronizes after the change event:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;input v-model.lazy=&#34;msg&#34;&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>(2) .number</p>
<p>If you want to automatically convert the user‚Äôs input into a numerical type, you can add the number modifier to v-model:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;input v-model.number=&#34;age&#34; type=&#34;number&#34;&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>(3) .trim</p>
<p>To automatically filter out the leading and trailing whitespace of the user‚Äôs input, you can add the <code>trim</code> modifier to v-model:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;input v-model.trim=&#34;msg&#34;&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="event-modifiers">Event Modifiers</h3>
<p>(1) .stop</p>
<p>Stops the click event propagation.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;!-- Only the a is triggered here --&gt;
</span></span><span class="line"><span class="cl">    &lt;div @click=&#34;divClick&#34;&gt;&lt;a v-on:click.stop=&#34;aClick&#34;&gt;Click&lt;/a&gt;&lt;/div&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>(2) .prevent</p>
<p>Prevents the tag&rsquo;s default behavior.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;a href=&#34;http://www.baidu.com&#34; v-on:click.prevent=&#34;aClick&#34;&gt;Click&lt;/a&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>(3) .capture</p>
<p>The event triggers first on the node with the .capture modifier, then triggers inside the enclosed nodes.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;!-- The divClick event is first executed here, then the aClick event --&gt;
</span></span><span class="line"><span class="cl">&lt;div @click=&#34;divClick&#34;&gt;&lt;a v-on:click=&#34;aClick&#34;&gt;Click&lt;/a&gt;&lt;/div&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>(4) .self</p>
<p>Triggers handler only when the event.target is the current element itself. That is, the event is not triggered from inside elements.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;!-- When clicking on the a tag, only the aClick event will be triggered. Only when clicking on phrase will the divClick event be triggered --&gt;
</span></span><span class="line"><span class="cl">    &lt;div @click.self=&#34;divClick&#34;&gt;phrase&lt;a v-on:click=&#34;aClick&#34;&gt;Click&lt;/a&gt;&lt;/div&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>(5) .once</p>
<p>Unlike other modifiers that only work on native DOM events, the .once modifier can also be used on custom component events, meaning that the current event is triggered only once.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;a v-on:click.once=&#34;aClick&#34;&gt;Click&lt;/a&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>(6) .passive</p>
<p>The .passive modifier can especially improve performance on mobile devices.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="o">&lt;!</span><span class="c1">-- The default behavior of the scroll event (i.e., scroll behavior) will be triggered immediately --&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&lt;!</span><span class="c1">-- Instead of waiting for `onScroll` to complete --&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&lt;!</span><span class="c1">-- This includes the case of `event.preventDefault()` --&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">&lt;</span><span class="k">div</span><span class="w"> </span><span class="n">v</span><span class="o">-</span><span class="k">on</span><span class="p">:</span><span class="n">scroll</span><span class="p">.</span><span class="n">passive</span><span class="o">=</span><span class="s2">&#34;onScroll&#34;</span><span class="o">&gt;</span><span class="p">...</span><span class="o">&lt;/</span><span class="k">div</span><span class="o">&gt;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="what-is-the-function-of-nexttick-in-vue">What is the function of $nextTick in Vue?</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="k">const</span> <span class="n">callbacks</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl"><span class="n">let</span> <span class="n">pending</span> <span class="o">=</span> <span class="bp">false</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl"><span class="o">/**</span>
</span></span><span class="line"><span class="cl">  <span class="o">*</span> <span class="n">It</span> <span class="n">does</span> <span class="n">two</span> <span class="n">things</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">  <span class="o">*</span> <span class="n">Wraps</span> <span class="n">the</span> <span class="n">flushSchedulerQueue</span> <span class="n">function</span> <span class="n">with</span> <span class="n">try</span><span class="o">-</span><span class="n">catch</span> <span class="ow">and</span> <span class="n">put</span> <span class="n">it</span> <span class="n">into</span> <span class="n">the</span> <span class="n">callbacks</span> <span class="n">array</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">  <span class="o">*</span> <span class="n">If</span> <span class="n">pending</span> <span class="n">is</span> <span class="bp">false</span><span class="p">,</span> <span class="n">it</span> <span class="n">means</span> <span class="n">there</span> <span class="n">is</span> <span class="n">no</span> <span class="n">flushCallbacks</span> <span class="n">function</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">current</span> <span class="n">browser</span> <span class="n">task</span> <span class="n">queue</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">  <span class="o">*</span> <span class="n">If</span> <span class="n">pending</span> <span class="n">is</span> <span class="bp">true</span><span class="p">,</span> <span class="n">it</span> <span class="n">means</span> <span class="n">the</span> <span class="n">flushCallbacks</span> <span class="n">function</span> <span class="n">has</span> <span class="n">been</span> <span class="n">inserted</span> <span class="n">into</span> <span class="n">the</span> <span class="n">browser</span><span class="s1">&#39;s task queue.</span>
</span></span><span class="line"><span class="cl">  <span class="o">*</span> <span class="n">When</span> <span class="n">it</span> <span class="n">executes</span> <span class="n">the</span> <span class="n">flushCallbacks</span> <span class="n">function</span><span class="p">,</span> <span class="n">pending</span> <span class="n">will</span> <span class="n">be</span> <span class="n">set</span> <span class="n">back</span> <span class="n">to</span> <span class="bp">false</span><span class="p">,</span> <span class="n">indicating</span> <span class="n">that</span> <span class="n">the</span> <span class="n">next</span> <span class="n">flushCallbacks</span> <span class="n">function</span> <span class="n">can</span> <span class="n">be</span> <span class="n">inserted</span> <span class="n">into</span> <span class="n">the</span> <span class="n">queue</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">  <span class="o">*</span> <span class="n">The</span> <span class="n">role</span> <span class="n">of</span> <span class="n">pending</span><span class="p">:</span> <span class="n">only</span> <span class="n">one</span> <span class="n">flushCallbacks</span> <span class="n">function</span> <span class="n">is</span> <span class="n">present</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">browser</span><span class="s1">&#39;s task queue at the same time.</span>
</span></span><span class="line"><span class="cl">  <span class="o">*</span><span class="err">@</span><span class="n">param</span> <span class="p">{</span><span class="o">*</span><span class="p">}</span> <span class="n">cb</span> <span class="n">Accepts</span> <span class="n">a</span> <span class="n">callback</span> <span class="n">function</span> <span class="o">=&gt;</span> <span class="n">flushSchedulerQueue</span>
</span></span><span class="line"><span class="cl">  <span class="o">*</span><span class="err">@</span><span class="n">param</span> <span class="p">{</span><span class="o">*</span><span class="p">}</span> <span class="n">ctx</span> <span class="n">context</span>
</span></span><span class="line"><span class="cl"> <span class="o">*</span> <span class="err">@</span><span class="n">returns</span> 
</span></span><span class="line"><span class="cl"> <span class="o">*/</span>
</span></span><span class="line"><span class="cl"><span class="k">export</span> <span class="n">function</span> <span class="n">nextTick</span> <span class="p">(</span><span class="n">cb</span><span class="err">?</span><span class="p">:</span> <span class="n">Function</span><span class="p">,</span> <span class="n">ctx</span><span class="err">?</span><span class="p">:</span> <span class="ne">Object</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">let</span> <span class="n">_resolve</span>
</span></span><span class="line"><span class="cl">  <span class="o">//</span> <span class="n">Store</span> <span class="n">the</span> <span class="n">wrapped</span> <span class="n">function</span> <span class="ow">in</span> <span class="n">callbacks</span> <span class="n">array</span>
</span></span><span class="line"><span class="cl">  <span class="n">callbacks</span><span class="o">.</span><span class="n">push</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">cb</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="o">//</span> <span class="n">Wrap</span> <span class="n">the</span> <span class="n">callback</span> <span class="n">function</span> <span class="n">with</span> <span class="n">try</span><span class="o">-</span><span class="n">catch</span> <span class="k">for</span> <span class="n">error</span> <span class="n">capturing</span>
</span></span><span class="line"><span class="cl">      <span class="n">try</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">cb</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">ctx</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span> <span class="n">catch</span> <span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">handleError</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">ctx</span><span class="p">,</span> <span class="s1">&#39;nextTick&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">_resolve</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">_resolve</span><span class="p">(</span><span class="n">ctx</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">pending</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">pending</span> <span class="o">=</span> <span class="bp">true</span>
</span></span><span class="line"><span class="cl">    <span class="o">//</span> <span class="n">Execute</span> <span class="n">timerFunc</span><span class="p">,</span> <span class="n">putting</span> <span class="n">the</span> <span class="n">flushCallbacks</span> <span class="n">function</span> <span class="n">on</span> <span class="n">the</span> <span class="n">browser</span><span class="s1">&#39;s task queue</span>
</span></span><span class="line"><span class="cl">    <span class="n">timerFunc</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="o">//</span> <span class="o">$</span><span class="n">flow</span><span class="o">-</span><span class="n">disable</span><span class="o">-</span><span class="n">line</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">cb</span> <span class="o">&amp;&amp;</span> <span class="nb">typeof</span> <span class="n">Promise</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">new</span> <span class="n">Promise</span><span class="p">(</span><span class="n">resolve</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">_resolve</span> <span class="o">=</span> <span class="n">resolve</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Official definition of its function:</p>
<p>Execute the deferred callback after the next DOM update cycle. Use this method immediately after changing data to get the updated DOM.
‚Äã
What does that mean?
‚Äã
We can understand it as follows: Vue updates the DOM asynchronously. When data changes, Vue will start an asynchronous update queue. The view needs to wait for all data changes in the queue to complete before updating it collectively.
‚Äã
The core of Vue‚Äôs asynchronous update mechanism is that it leverages the browser‚Äôs asynchronous task queue. The micro task queue is preferred and the macro task queue is secondary.
‚Äã
When reactive data is updated, it calls the dep.notify method, notifying the watcher collected in dep to execute the update method. watcher.update will put watcher itself into a watcher queue (global queue array).
‚Äã
Then the nextTick method will put a flushSchedulerQueue method (a method that refreshes the watcher queue) into a global callbacks array.
‚Äã
If there is no flushCallbacks function in the browser‚Äôs asynchronous task queue, it will execute the timerFunc function and put the flushCallbacks function into the asynchronous task queue. If there is a flushCallbacks function in the async task queue, wait for it to finish and then put the next flushCallbacks function in.
‚Äã
The flushCallbacks function is responsible for executing all flushSchedulerQueue functions in the callbacks array.
‚Äã
The flushSchedulerQueue function is responsible for updating the watcher queue, i.e. executing the run method for each watcher in the queue array, thus entering the update phase, such as executing component update functions or user‚Äôs watch callback functions.</p>
<h2 id="how-to-understand-two-way-data-binding">How to understand two-way data binding</h2>
<p>As we all know, Vue is a framework for two-way data binding, which consists of three important parts:</p>
<ul>
<li>
<p><strong>Data layer (Model)</strong>: The data and business logic of the application</p>
</li>
<li>
<p><strong>View layer (View)</strong>: The display effect of the application, various UI components.</p>
</li>
<li>
<p><strong>Business logic layer (ViewModel)</strong>: The core part encapsulated by the framework, which is responsible for associating data with the view.</p>
</li>
</ul>
<p>This layered architecture can be professionally referred to as: MVVM. The core functionality of the control layer here is ‚Äútwo-way data binding‚Äù.</p>
<p>Naturally, we just need to understand what it is, and then we can further understand the principle of data binding.</p>
<p>Understanding ViewModel</p>
<p>Its main responsibilities are:</p>
<ul>
<li>
<p>Update the view after data changes</p>
</li>
<li>
<p>Update data after view changes</p>
</li>
</ul>
<p>Of course, it also consists of two main parts:</p>
<ul>
<li>
<p>Observer: Listens to all data properties</p>
</li>
<li>
<p>Compiler: Scans and parses the instructions of each element node, replaces data according to the instruction template, and binds the corresponding update function.</p>
</li>
</ul>
<h2 id="what-is-the-difference-between-v-show-and-v-if-can-you-explain-it">What is the difference between v-show and v-if? Can you explain it?</h2>
<p>The effect of v-show and v-if is the same (not including v-else), both can control whether the element is displayed on the page, and they are used the same way.</p>
<p>Differences:</p>
<ul>
<li>
<p>Different control methods</p>
</li>
<li>
<p>Different compilation processes</p>
</li>
<li>
<p>Different compilation conditions</p>
</li>
</ul>
<p><strong>Control method</strong>: If v-show hides, css ‚Äî display:none is added to the element, and the dom element is still there. If v-if shows or hides, the dom element is entirely added or deleted.</p>
<p><strong>Compilation process</strong>: v-if switch has a process of local compilation/unloading. During the switch, event listeners and subcomponents inside the conditional block are properly destroyed and recreated; v-show just simply switches based on css.</p>
<p><strong>Compilation condition</strong>: v-if is true conditional rendering. It will ensure that event listeners and subcomponents in the conditional block are appropriately destroyed and recreated during the switch. When the rendering condition is false, no operation is performed until it is true to render.</p>
<p>When v-show changes from false to true, it will not trigger the lifecycle of the component.</p>
<p>When v-if changes from false to true, it triggers the beforeCreate, create, beforeMount, mounted hooks of the component. When it changes from true to false, it triggers the beforeDestory, destoryed methods of the component.</p>
<p>Performance consumption: v-if has higher switching costs; v-show has higher initial rendering costs.</p>
<h2 id="have-you-ever-used-keep-alive-what-is-it-for">Have you ever used keep-alive? What is it for?</h2>
<p>Vue supports components and also has a built-in component keep-alive for caching that can be used directly. The usage scenarios are for route components and dynamic components.</p>
<ul>
<li>
<p>activated represents the lifecycle of entering the component, deactivated represents the lifecycle of leaving the component</p>
</li>
<li>
<p>include represents that only matched components will be cached, exclude represents that matched components will not be cached</p>
</li>
<li>
<p>max represents how many components can be cached at most</p>
</li>
</ul>
<p>Basic usage of keep-alive:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;keep-alive&gt;
</span></span><span class="line"><span class="cl">&lt;component :is=&#34;view&#34;&gt;&lt;/component&gt;
</span></span><span class="line"><span class="cl">&lt;/keep-alive&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Using includes and exclude:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;keep-alive include=&#34;a,b&#34;&gt;
</span></span><span class="line"><span class="cl">&lt;component :is=&#34;view&#34;&gt;&lt;/component&gt;
</span></span><span class="line"><span class="cl">&lt;/keep-alive&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Using RegExp(v-bing)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;keep-alive :include=&#34;/a|b/&#34;&gt;
</span></span><span class="line"><span class="cl">&lt;component :is=&#34;view&#34;&gt;&lt;/component&gt;
</span></span><span class="line"><span class="cl">&lt;/keep-alive&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Using Array(v-bing)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;keep-alive :include=&#34;[&#39;a&#39;, &#39;b&#39;]&#34;&gt;
</span></span><span class="line"><span class="cl">&lt;component :is=&#34;view&#34;&gt;&lt;/component&gt;
</span></span><span class="line"><span class="cl">&lt;/keep-alive&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>The match first checks the component‚Äôs own name option. If the name option is not available, the match checks its local registration name (the key value of the parent component‚Äôs components option). Anonymous components cannot be matched.</p>
<p>Two more lifecycle hooks (activated and deactivated) will be created for the components with keep-alive cache settings:</p>
<p>When first entering the component: beforeRouteEnter &gt; beforeCreate &gt; created &gt; mounted &gt; activated &gt; ‚Ä¶ ‚Ä¶ &gt; beforeRouteLeave &gt; deactivated</p>
<p>When entering the component again: beforeRouteEnter &gt;activated &gt; ‚Ä¶ ‚Ä¶ &gt; beforeRouteLeave &gt; deactivated</p>
<h2 id="can-you-implement-a-virtual-dom">Can you implement a Virtual DOM?</h2>
<h3 id="first-lets-see-how-the-browser-understands-html">First, let‚Äôs see how the browser understands HTML:</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;div&gt;  
</span></span><span class="line"><span class="cl">    &lt;h1&gt;My title&lt;/h1&gt;  
</span></span><span class="line"><span class="cl">    Some text content  
</span></span><span class="line"><span class="cl">    &lt;!-- TODO: Add tagline --&gt;  
</span></span><span class="line"><span class="cl">&lt;/div&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>When the browser reads these codes, it constructs a DOM tree to keep track of everything, as you would draw a family tree to track the development of family members. The above HTML corresponds to the DOM node tree as shown in the following figure:</p>
<p><img src="https://miro.medium.com/v2/resize:fit:564/format:webp/1*iOyuPyyTmW_KKqDb0_nVvg.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>Each element is a node. Every piece of text is also a node. Even comments are nodes. A node is a part of a page. Just like a family tree, each node can have child nodes (that is, each part can contain some other parts).</p>
<h3 id="next-see-how-vue-understands-html-template">Next, see how Vue understands HTML template</h3>
<p>Vue constructs a Virtual DOM to keep track of how it will change the real DOM. Because the information it contains will tell Vue what kind of nodes need to be rendered on the page, including the description information of its child nodes. We describe such nodes as ‚ÄúVirtual Node(VNode)‚Äù. ‚ÄúVirtual DOM‚Äù is our name for the entire VNode tree built up by the Vue component tree.</p>
<p>In other words, the browser‚Äôs understanding of HTML is the DOM tree, Vue‚Äôs understanding of HTML is the virtual DOM, and finally in the patch stage, it is rendered into real DOM nodes through DOM operation APIs.
How to implement Virtual DOM
First, let&rsquo;s look at the structure of VNode in vue</p>
<p>Source code location: <code>src/core/vdom/vnode.js</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="k">export</span> <span class="n">default</span> <span class="k">class</span> <span class="n">VNode</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">tag</span><span class="p">:</span> <span class="n">string</span> <span class="o">|</span> <span class="n">void</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">data</span><span class="p">:</span> <span class="n">VNodeData</span> <span class="o">|</span> <span class="n">void</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">children</span><span class="p">:</span> <span class="err">?</span><span class="ne">Array</span><span class="o">&lt;</span><span class="n">VNode</span><span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">text</span><span class="p">:</span> <span class="n">string</span> <span class="o">|</span> <span class="n">void</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">elm</span><span class="p">:</span> <span class="ne">Node</span> <span class="o">|</span> <span class="n">void</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">ns</span><span class="p">:</span> <span class="n">string</span> <span class="o">|</span> <span class="n">void</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">context</span><span class="p">:</span> <span class="n">Component</span> <span class="o">|</span> <span class="n">void</span><span class="p">;</span> <span class="o">//</span> <span class="n">rendered</span> <span class="ow">in</span> <span class="n">this</span> <span class="n">component</span><span class="s1">&#39;s scope</span>
</span></span><span class="line"><span class="cl">  <span class="n">functionalContext</span><span class="p">:</span> <span class="n">Component</span> <span class="o">|</span> <span class="n">void</span><span class="p">;</span> <span class="o">//</span> <span class="n">only</span> <span class="k">for</span> <span class="n">functional</span> <span class="n">component</span> <span class="n">root</span> <span class="n">nodes</span>
</span></span><span class="line"><span class="cl">  <span class="n">key</span><span class="p">:</span> <span class="n">string</span> <span class="o">|</span> <span class="n">number</span> <span class="o">|</span> <span class="n">void</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">componentOptions</span><span class="p">:</span> <span class="n">VNodeComponentOptions</span> <span class="o">|</span> <span class="n">void</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">componentInstance</span><span class="p">:</span> <span class="n">Component</span> <span class="o">|</span> <span class="n">void</span><span class="p">;</span> <span class="o">//</span> <span class="n">component</span> <span class="n">instance</span>
</span></span><span class="line"><span class="cl">  <span class="n">parent</span><span class="p">:</span> <span class="n">VNode</span> <span class="o">|</span> <span class="n">void</span><span class="p">;</span> <span class="o">//</span> <span class="n">component</span> <span class="n">placeholder</span> <span class="n">node</span>
</span></span><span class="line"><span class="cl">  <span class="n">raw</span><span class="p">:</span> <span class="n">boolean</span><span class="p">;</span> <span class="o">//</span> <span class="n">contains</span> <span class="n">raw</span> <span class="n">HTML</span><span class="err">?</span> <span class="p">(</span><span class="n">server</span> <span class="n">only</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="n">isStatic</span><span class="p">:</span> <span class="n">boolean</span><span class="p">;</span> <span class="o">//</span> <span class="n">hoisted</span> <span class="k">static</span> <span class="n">node</span>
</span></span><span class="line"><span class="cl">  <span class="n">isRootInsert</span><span class="p">:</span> <span class="n">boolean</span><span class="p">;</span> <span class="o">//</span> <span class="n">necessary</span> <span class="k">for</span> <span class="n">enter</span> <span class="n">transition</span> <span class="n">check</span>
</span></span><span class="line"><span class="cl">  <span class="n">isComment</span><span class="p">:</span> <span class="n">boolean</span><span class="p">;</span> <span class="o">//</span> <span class="n">empty</span> <span class="n">comment</span> <span class="n">placeholder</span><span class="err">?</span>
</span></span><span class="line"><span class="cl">  <span class="n">isCloned</span><span class="p">:</span> <span class="n">boolean</span><span class="p">;</span> <span class="o">//</span> <span class="n">is</span> <span class="n">a</span> <span class="n">cloned</span> <span class="n">node</span><span class="err">?</span>
</span></span><span class="line"><span class="cl">  <span class="n">isOnce</span><span class="p">:</span> <span class="n">boolean</span><span class="p">;</span> <span class="o">//</span> <span class="n">is</span> <span class="n">a</span> <span class="n">v</span><span class="o">-</span><span class="n">once</span> <span class="n">node</span><span class="err">?</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl">  <span class="n">constructor</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">tag</span><span class="err">?</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">data</span><span class="err">?</span><span class="p">:</span> <span class="n">VNodeData</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">children</span><span class="err">?</span><span class="p">:</span> <span class="err">?</span><span class="ne">Array</span><span class="o">&lt;</span><span class="n">VNode</span><span class="o">&gt;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">text</span><span class="err">?</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">elm</span><span class="err">?</span><span class="p">:</span> <span class="ne">Node</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">context</span><span class="err">?</span><span class="p">:</span> <span class="n">Component</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">componentOptions</span><span class="err">?</span><span class="p">:</span> <span class="n">VNodeComponentOptions</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="o">/*</span> <span class="n">The</span> <span class="n">tag</span> <span class="n">name</span> <span class="n">of</span> <span class="n">the</span> <span class="n">current</span> <span class="n">node</span> <span class="o">*/</span>
</span></span><span class="line"><span class="cl">    <span class="n">this</span><span class="o">.</span><span class="n">tag</span> <span class="o">=</span> <span class="n">tag</span>
</span></span><span class="line"><span class="cl">    <span class="o">/*</span> <span class="n">The</span> <span class="n">corresponding</span> <span class="n">object</span> <span class="n">of</span> <span class="n">the</span> <span class="n">current</span> <span class="n">node</span><span class="p">,</span> <span class="n">which</span> <span class="n">contains</span> <span class="n">some</span> <span class="n">specific</span> <span class="n">data</span> <span class="n">information</span><span class="p">,</span> <span class="n">is</span> <span class="n">a</span> <span class="n">VNodeData</span> <span class="n">type</span><span class="p">,</span> <span class="n">you</span> <span class="n">can</span> <span class="n">refer</span> <span class="n">to</span> <span class="n">the</span> <span class="n">data</span> <span class="n">information</span> <span class="ow">in</span> <span class="n">VNodeData</span> <span class="n">type</span> <span class="o">*/</span>
</span></span><span class="line"><span class="cl">    <span class="n">this</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>
</span></span><span class="line"><span class="cl">    <span class="o">/*</span> <span class="n">The</span> <span class="n">child</span> <span class="n">nodes</span> <span class="n">of</span> <span class="n">the</span> <span class="n">current</span> <span class="n">node</span><span class="p">,</span> <span class="n">which</span> <span class="n">is</span> <span class="n">an</span> <span class="n">array</span> <span class="o">*/</span>
</span></span><span class="line"><span class="cl">    <span class="n">this</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="n">children</span>
</span></span><span class="line"><span class="cl">    <span class="o">/*</span> <span class="n">The</span> <span class="n">text</span> <span class="n">of</span> <span class="n">the</span> <span class="n">current</span> <span class="n">node</span> <span class="o">*/</span>
</span></span><span class="line"><span class="cl">    <span class="n">this</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span>
</span></span><span class="line"><span class="cl">    <span class="o">/*</span> <span class="n">The</span> <span class="n">real</span> <span class="n">DOM</span> <span class="n">node</span> <span class="n">corresponding</span> <span class="n">to</span> <span class="n">the</span> <span class="n">current</span> <span class="n">virtual</span> <span class="n">node</span> <span class="o">*/</span>
</span></span><span class="line"><span class="cl">    <span class="n">this</span><span class="o">.</span><span class="n">elm</span> <span class="o">=</span> <span class="n">elm</span>
</span></span><span class="line"><span class="cl">    <span class="o">/*</span> <span class="n">The</span> <span class="n">namespace</span> <span class="n">of</span> <span class="n">the</span> <span class="n">current</span> <span class="n">node</span> <span class="o">*/</span>
</span></span><span class="line"><span class="cl">    <span class="n">this</span><span class="o">.</span><span class="n">ns</span> <span class="o">=</span> <span class="n">undefined</span>
</span></span><span class="line"><span class="cl">    <span class="o">/*</span> <span class="n">Compilation</span> <span class="n">scope</span> <span class="o">*/</span>
</span></span><span class="line"><span class="cl">    <span class="n">this</span><span class="o">.</span><span class="n">context</span> <span class="o">=</span> <span class="n">context</span>
</span></span><span class="line"><span class="cl">    <span class="o">/*</span> <span class="n">Functional</span> <span class="n">component</span> <span class="n">scope</span> <span class="o">*/</span>
</span></span><span class="line"><span class="cl">    <span class="n">this</span><span class="o">.</span><span class="n">functionalContext</span> <span class="o">=</span> <span class="n">undefined</span>
</span></span><span class="line"><span class="cl">    <span class="o">/*</span> <span class="n">The</span> <span class="n">key</span> <span class="n">attribute</span> <span class="n">of</span> <span class="n">the</span> <span class="n">node</span><span class="p">,</span> <span class="n">used</span> <span class="n">as</span> <span class="n">the</span> <span class="n">marker</span> <span class="n">of</span> <span class="n">the</span> <span class="n">node</span> <span class="k">for</span> <span class="n">optimization</span> <span class="o">*/</span>
</span></span><span class="line"><span class="cl">    <span class="n">this</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">data</span> <span class="o">&amp;&amp;</span> <span class="n">data</span><span class="o">.</span><span class="n">key</span>
</span></span><span class="line"><span class="cl">    <span class="o">/*</span> <span class="n">The</span> <span class="n">options</span> <span class="n">of</span> <span class="n">the</span> <span class="n">component</span> <span class="o">*/</span>
</span></span><span class="line"><span class="cl">    <span class="n">this</span><span class="o">.</span><span class="n">componentOptions</span> <span class="o">=</span> <span class="n">componentOptions</span>
</span></span><span class="line"><span class="cl">    <span class="o">/*</span> <span class="n">The</span> <span class="n">instance</span> <span class="n">of</span> <span class="n">the</span> <span class="n">component</span> <span class="n">corresponding</span> <span class="n">to</span> <span class="n">the</span> <span class="n">current</span> <span class="n">node</span> <span class="o">*/</span>
</span></span><span class="line"><span class="cl">    <span class="n">this</span><span class="o">.</span><span class="n">componentInstance</span> <span class="o">=</span> <span class="n">undefined</span>
</span></span><span class="line"><span class="cl">    <span class="o">/*</span> <span class="n">The</span> <span class="n">parent</span> <span class="n">node</span> <span class="n">of</span> <span class="n">the</span> <span class="n">current</span> <span class="n">node</span> <span class="o">*/</span>
</span></span><span class="line"><span class="cl">    <span class="n">this</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">undefined</span>
</span></span><span class="line"><span class="cl">    <span class="o">/*</span> <span class="n">In</span> <span class="n">short</span><span class="p">,</span> <span class="n">whether</span> <span class="n">it</span> <span class="n">is</span> <span class="n">raw</span> <span class="n">HTML</span> <span class="ow">or</span> <span class="n">just</span> <span class="n">plain</span> <span class="n">text</span><span class="o">.</span> <span class="n">When</span> <span class="n">it</span><span class="s1">&#39;s innerHTML, it&#39;</span><span class="n">s</span> <span class="bp">true</span><span class="o">.</span> <span class="n">When</span> <span class="n">it</span><span class="s1">&#39;s textContent, it&#39;</span><span class="n">s</span> <span class="bp">false</span><span class="o">.</span> <span class="o">*/</span>
</span></span><span class="line"><span class="cl">    <span class="n">this</span><span class="o">.</span><span class="n">raw</span> <span class="o">=</span> <span class="bp">false</span>
</span></span><span class="line"><span class="cl">    <span class="o">/*</span> <span class="n">Static</span> <span class="n">node</span> <span class="n">flag</span> <span class="o">*/</span>
</span></span><span class="line"><span class="cl">    <span class="n">this</span><span class="o">.</span><span class="n">isStatic</span> <span class="o">=</span> <span class="bp">false</span>
</span></span><span class="line"><span class="cl">    <span class="o">/*</span> <span class="n">Whether</span> <span class="n">to</span> <span class="n">insert</span> <span class="n">as</span> <span class="n">root</span> <span class="n">node</span> <span class="o">*/</span>
</span></span><span class="line"><span class="cl">    <span class="n">this</span><span class="o">.</span><span class="n">isRootInsert</span> <span class="o">=</span> <span class="bp">true</span>
</span></span><span class="line"><span class="cl">    <span class="o">/*</span> <span class="n">Whether</span> <span class="n">it</span><span class="s1">&#39;s a comment node */</span>
</span></span><span class="line"><span class="cl">    <span class="n">this</span><span class="o">.</span><span class="n">isComment</span> <span class="o">=</span> <span class="bp">false</span>
</span></span><span class="line"><span class="cl">    <span class="o">/*</span> <span class="n">Whether</span> <span class="n">it</span><span class="s1">&#39;s a cloned node */</span>
</span></span><span class="line"><span class="cl">    <span class="n">this</span><span class="o">.</span><span class="n">isCloned</span> <span class="o">=</span> <span class="bp">false</span>
</span></span><span class="line"><span class="cl">    <span class="o">/*</span> <span class="n">Whether</span> <span class="n">there</span><span class="s1">&#39;s a v-once directive */</span>
</span></span><span class="line"><span class="cl">    <span class="n">this</span><span class="o">.</span><span class="n">isOnce</span> <span class="o">=</span> <span class="bp">false</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl">  <span class="o">//</span> <span class="n">DEPRECATED</span><span class="p">:</span> <span class="n">alias</span> <span class="k">for</span> <span class="n">componentInstance</span> <span class="k">for</span> <span class="n">backwards</span> <span class="n">compat</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">  <span class="o">/*</span> <span class="n">istanbul</span> <span class="n">ignore</span> <span class="n">next</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">answershuto</span><span class="o">/</span><span class="n">learnVue</span><span class="o">*/</span>
</span></span><span class="line"><span class="cl">  <span class="n">get</span> <span class="n">child</span> <span class="p">():</span> <span class="n">Component</span> <span class="o">|</span> <span class="n">void</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">this</span><span class="o">.</span><span class="n">componentInstance</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Here, a brief explanation of VNode:</p>
<ul>
<li>
<p>The context option of all objects points to the Vue instance</p>
</li>
<li>
<p>The elm property points to the corresponding real DOM node</p>
</li>
</ul>
<p>vue generates VNode via createElement</p>
<p>Source code location: <code>src/core/vdom/create-element.js</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="k">export</span> <span class="n">function</span> <span class="n">createElement</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="n">context</span><span class="p">:</span> <span class="n">Component</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="n">tag</span><span class="p">:</span> <span class="n">any</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="n">data</span><span class="p">:</span> <span class="n">any</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="n">children</span><span class="p">:</span> <span class="n">any</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="n">normalizationType</span><span class="p">:</span> <span class="n">any</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="n">alwaysNormalize</span><span class="p">:</span> <span class="n">boolean</span>
</span></span><span class="line"><span class="cl"><span class="p">):</span> <span class="n">VNode</span> <span class="o">|</span> <span class="ne">Array</span><span class="o">&lt;</span><span class="n">VNode</span><span class="o">&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="ne">Array</span><span class="o">.</span><span class="n">isArray</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">||</span> <span class="n">isPrimitive</span><span class="p">(</span><span class="n">data</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">normalizationType</span> <span class="o">=</span> <span class="n">children</span>
</span></span><span class="line"><span class="cl">    <span class="n">children</span> <span class="o">=</span> <span class="n">data</span>
</span></span><span class="line"><span class="cl">    <span class="n">data</span> <span class="o">=</span> <span class="n">undefined</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">isTrue</span><span class="p">(</span><span class="n">alwaysNormalize</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">normalizationType</span> <span class="o">=</span> <span class="n">ALWAYS_NORMALIZE</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="n">_createElement</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">children</span><span class="p">,</span> <span class="n">normalizationType</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>As you can see above, the createElement method is actually a wrapper for the _createElement method, and it judges the parameters that are passed in</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="k">export</span> <span class="n">function</span> <span class="n">_createElement</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">context</span><span class="p">:</span> <span class="n">Component</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">tag</span><span class="err">?</span><span class="p">:</span> <span class="n">string</span> <span class="o">|</span> <span class="n">Class</span><span class="o">&lt;</span><span class="n">Component</span><span class="o">&gt;</span> <span class="o">|</span> <span class="n">Function</span> <span class="o">|</span> <span class="ne">Object</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">data</span><span class="err">?</span><span class="p">:</span> <span class="n">VNodeData</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">children</span><span class="err">?</span><span class="p">:</span> <span class="n">any</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">normalizationType</span><span class="err">?</span><span class="p">:</span> <span class="n">number</span>
</span></span><span class="line"><span class="cl"><span class="p">):</span> <span class="n">VNode</span> <span class="o">|</span> <span class="ne">Array</span><span class="o">&lt;</span><span class="n">VNode</span><span class="o">&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">isDef</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">isDef</span><span class="p">((</span><span class="n">data</span><span class="p">:</span> <span class="n">any</span><span class="p">)</span><span class="o">.</span><span class="n">__ob__</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">process</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">NODE_ENV</span> <span class="o">!==</span> <span class="s1">&#39;production&#39;</span> <span class="o">&amp;&amp;</span> <span class="n">warn</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="err">`</span><span class="n">Avoid</span> <span class="n">using</span> <span class="n">observed</span> <span class="n">data</span> <span class="n">object</span> <span class="n">as</span> <span class="n">vnode</span> <span class="n">data</span><span class="p">:</span> <span class="o">$</span><span class="p">{</span><span class="n">JSON</span><span class="o">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">data</span><span class="p">)}</span>\<span class="n">n</span><span class="err">`</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;Always create fresh vnode data objects in each render!&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">context</span><span class="err">`</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">createEmptyVNode</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">//</span> <span class="n">object</span> <span class="n">syntax</span> <span class="ow">in</span> <span class="n">v</span><span class="o">-</span><span class="n">bind</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">isDef</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">isDef</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">is</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">tag</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">is</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">tag</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="o">//</span> <span class="ow">in</span> <span class="k">case</span> <span class="n">of</span> <span class="n">component</span> <span class="p">:</span><span class="n">is</span> <span class="n">set</span> <span class="n">to</span> <span class="n">falsy</span> <span class="n">value</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">createEmptyVNode</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span> 
</span></span><span class="line"><span class="cl">    <span class="o">//</span> <span class="n">support</span> <span class="n">single</span> <span class="n">function</span> <span class="n">children</span> <span class="n">as</span> <span class="n">default</span> <span class="n">scoped</span> <span class="n">slot</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="ne">Array</span><span class="o">.</span><span class="n">isArray</span><span class="p">(</span><span class="n">children</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">typeof</span> <span class="n">children</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;function&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span> <span class="o">||</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">        <span class="n">data</span><span class="o">.</span><span class="n">scopedSlots</span> <span class="o">=</span> <span class="p">{</span> <span class="n">default</span><span class="p">:</span> <span class="n">children</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">children</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">normalizationType</span> <span class="o">===</span> <span class="n">ALWAYS_NORMALIZE</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">children</span> <span class="o">=</span> <span class="n">normalizeChildren</span><span class="p">(</span><span class="n">children</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">===</span> <span class="n">SIMPLE_NORMALIZE</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">children</span> <span class="o">=</span> <span class="n">simpleNormalizeChildren</span><span class="p">(</span><span class="n">children</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="o">//</span> <span class="n">create</span> <span class="n">VNode</span>
</span></span><span class="line"><span class="cl">    <span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>We can see that _createElement receives 5 parameters:</p>
<ul>
<li>
<p><strong>context</strong> represents the context environment of VNode, which is of the Component type</p>
</li>
<li>
<p><strong>tag</strong> represents the tag, it could be a string, or it could be a Component</p>
</li>
<li>
<p><strong>data</strong> represents the data of VNode, it‚Äôs a VNodeData type</p>
</li>
<li>
<p><strong>children</strong> represents the current child nodes of VNode, it can be of any type</p>
</li>
<li>
<p><strong>normalizationType</strong> represents the type of child node normalization, different types have different normalization methods, it mainly refers to whether the render function is generated by compilation or written by the user</p>
</li>
</ul>
<p>According to the type of normalizationType, children will have different definitions</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">if (normalizationType === ALWAYS_NORMALIZE) {
</span></span><span class="line"><span class="cl">    children = normalizeChildren(children)
</span></span><span class="line"><span class="cl">} else if ( === SIMPLE_NORMALIZE) {
</span></span><span class="line"><span class="cl">    children = simpleNormalizeChildren(children)
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>The simpleNormalizeChildren method is called when the render function is generated by compilation</p>
<p>The normalizeChildren method is called in the following two scenarios:</p>
<ul>
<li>
<p>The render function is written by the user</p>
</li>
<li>
<p>Compilation of slot, v-for will generate a nested array</p>
</li>
</ul>
<p>Whether it‚Äôs simpleNormalizeChildren or normalizeChildren, both are for normalizing children (turning children into an array of VNodes), but I won‚Äôt go into the details here.</p>
<p>The source code location for normalizing children is: <code>src/core/vdom/helpers/normalize-children.js</code></p>
<p>After normalizing children, VNode is being created.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">let</span> <span class="n">vnode</span><span class="p">,</span> <span class="n">ns</span>
</span></span><span class="line"><span class="cl"><span class="o">//</span> <span class="n">Judging</span> <span class="n">the</span> <span class="n">tag</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="nb">typeof</span> <span class="n">tag</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">let</span> <span class="n">Ctor</span>
</span></span><span class="line"><span class="cl">  <span class="n">ns</span> <span class="o">=</span> <span class="p">(</span><span class="n">context</span><span class="o">.$</span><span class="n">vnode</span> <span class="o">&amp;&amp;</span> <span class="n">context</span><span class="o">.$</span><span class="n">vnode</span><span class="o">.</span><span class="n">ns</span><span class="p">)</span> <span class="o">||</span> <span class="n">config</span><span class="o">.</span><span class="n">getTagNamespace</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">isReservedTag</span><span class="p">(</span><span class="n">tag</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="o">//</span> <span class="n">If</span> <span class="n">it</span><span class="s1">&#39;s a built-in node, then directly create a plain VNode</span>
</span></span><span class="line"><span class="cl">    <span class="n">vnode</span> <span class="o">=</span> <span class="n">new</span> <span class="n">VNode</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="n">config</span><span class="o">.</span><span class="n">parsePlatformTagName</span><span class="p">(</span><span class="n">tag</span><span class="p">),</span> <span class="n">data</span><span class="p">,</span> <span class="n">children</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="n">undefined</span><span class="p">,</span> <span class="n">undefined</span><span class="p">,</span> <span class="n">context</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">isDef</span><span class="p">(</span><span class="n">Ctor</span> <span class="o">=</span> <span class="n">resolveAsset</span><span class="p">(</span><span class="n">context</span><span class="o">.$</span><span class="n">options</span><span class="p">,</span> <span class="s1">&#39;components&#39;</span><span class="p">,</span> <span class="n">tag</span><span class="p">)))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="o">//</span> <span class="n">component</span>
</span></span><span class="line"><span class="cl">    <span class="o">//</span> <span class="n">If</span> <span class="n">it</span><span class="s1">&#39;s of component type, then VNode node will be created by createComponent</span>
</span></span><span class="line"><span class="cl">    <span class="n">vnode</span> <span class="o">=</span> <span class="n">createComponent</span><span class="p">(</span><span class="n">Ctor</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">children</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">vnode</span> <span class="o">=</span> <span class="n">new</span> <span class="n">VNode</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="n">tag</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">children</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="n">undefined</span><span class="p">,</span> <span class="n">undefined</span><span class="p">,</span> <span class="n">context</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="o">//</span> <span class="n">direct</span> <span class="n">component</span> <span class="n">options</span> <span class="o">/</span> <span class="n">constructor</span>
</span></span><span class="line"><span class="cl">  <span class="n">vnode</span> <span class="o">=</span> <span class="n">createComponent</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">children</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>createComponent is also used to create VNode.</p>
<p>Source code location: <code>src/core/vdom/create-component.js</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span><span class="lnt">93
</span><span class="lnt">94
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="k">export</span> <span class="n">function</span> <span class="n">createComponent</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="n">Ctor</span><span class="p">:</span> <span class="n">Class</span><span class="o">&lt;</span><span class="n">Component</span><span class="o">&gt;</span> <span class="o">|</span> <span class="n">Function</span> <span class="o">|</span> <span class="ne">Object</span> <span class="o">|</span> <span class="n">void</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="n">data</span><span class="p">:</span> <span class="err">?</span><span class="n">VNodeData</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="n">context</span><span class="p">:</span> <span class="n">Component</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="n">children</span><span class="p">:</span> <span class="err">?</span><span class="ne">Array</span><span class="o">&lt;</span><span class="n">VNode</span><span class="o">&gt;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="n">tag</span><span class="err">?</span><span class="p">:</span> <span class="n">string</span>
</span></span><span class="line"><span class="cl"><span class="p">):</span> <span class="n">VNode</span> <span class="o">|</span> <span class="ne">Array</span><span class="o">&lt;</span><span class="n">VNode</span><span class="o">&gt;</span> <span class="o">|</span> <span class="n">void</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">isUndef</span><span class="p">(</span><span class="n">Ctor</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"> <span class="o">//</span> <span class="n">Build</span> <span class="n">subclass</span> <span class="n">constructor</span> 
</span></span><span class="line"><span class="cl">  <span class="k">const</span> <span class="n">baseCtor</span> <span class="o">=</span> <span class="n">context</span><span class="o">.$</span><span class="n">options</span><span class="o">.</span><span class="n">_base</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl">  <span class="o">//</span> <span class="n">plain</span> <span class="n">options</span> <span class="n">object</span><span class="p">:</span> <span class="n">turn</span> <span class="n">it</span> <span class="n">into</span> <span class="n">a</span> <span class="n">constructor</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">isObject</span><span class="p">(</span><span class="n">Ctor</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Ctor</span> <span class="o">=</span> <span class="n">baseCtor</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">Ctor</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl">  <span class="o">//</span> <span class="k">if</span> <span class="n">at</span> <span class="n">this</span> <span class="n">stage</span> <span class="n">it</span><span class="s1">&#39;s not a constructor or an async component factory,</span>
</span></span><span class="line"><span class="cl">  <span class="o">//</span> <span class="n">reject</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nb">typeof</span> <span class="n">Ctor</span> <span class="o">!==</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">process</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">NODE_ENV</span> <span class="o">!==</span> <span class="s1">&#39;production&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">warn</span><span class="p">(</span><span class="err">`</span><span class="n">Invalid</span> <span class="n">Component</span> <span class="n">definition</span><span class="p">:</span> <span class="o">$</span><span class="p">{</span><span class="ne">String</span><span class="p">(</span><span class="n">Ctor</span><span class="p">)}</span><span class="err">`</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl">  <span class="o">//</span> <span class="n">async</span> <span class="n">component</span>
</span></span><span class="line"><span class="cl">  <span class="n">let</span> <span class="n">asyncFactory</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">isUndef</span><span class="p">(</span><span class="n">Ctor</span><span class="o">.</span><span class="n">cid</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">asyncFactory</span> <span class="o">=</span> <span class="n">Ctor</span>
</span></span><span class="line"><span class="cl">    <span class="n">Ctor</span> <span class="o">=</span> <span class="n">resolveAsyncComponent</span><span class="p">(</span><span class="n">asyncFactory</span><span class="p">,</span> <span class="n">baseCtor</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">Ctor</span> <span class="o">===</span> <span class="n">undefined</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="n">createAsyncPlaceholder</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">asyncFactory</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">data</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">context</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">children</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">tag</span>
</span></span><span class="line"><span class="cl">      <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl">  <span class="n">data</span> <span class="o">=</span> <span class="n">data</span> <span class="o">||</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl">  <span class="o">//</span> <span class="n">resolve</span> <span class="n">constructor</span> <span class="n">options</span> <span class="ow">in</span> <span class="k">case</span> <span class="n">global</span> <span class="n">mixins</span> <span class="n">are</span> <span class="n">applied</span> <span class="n">after</span>
</span></span><span class="line"><span class="cl">  <span class="o">//</span> <span class="n">component</span> <span class="n">constructor</span> <span class="n">creation</span>
</span></span><span class="line"><span class="cl">  <span class="n">resolveConstructorOptions</span><span class="p">(</span><span class="n">Ctor</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl">  <span class="o">//</span> <span class="n">transform</span> <span class="n">component</span> <span class="n">v</span><span class="o">-</span><span class="n">model</span> <span class="n">data</span> <span class="n">into</span> <span class="n">props</span> <span class="o">&amp;</span> <span class="n">events</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">isDef</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">model</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">transformModel</span><span class="p">(</span><span class="n">Ctor</span><span class="o">.</span><span class="n">options</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl">  <span class="o">//</span> <span class="n">extract</span> <span class="n">props</span>
</span></span><span class="line"><span class="cl">  <span class="k">const</span> <span class="n">propsData</span> <span class="o">=</span> <span class="n">extractPropsFromVNodeData</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">Ctor</span><span class="p">,</span> <span class="n">tag</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl">  <span class="o">//</span> <span class="n">functional</span> <span class="n">component</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">isTrue</span><span class="p">(</span><span class="n">Ctor</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">functional</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">createFunctionalComponent</span><span class="p">(</span><span class="n">Ctor</span><span class="p">,</span> <span class="n">propsData</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">children</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl">  <span class="o">//</span> <span class="n">extract</span> <span class="n">listeners</span><span class="p">,</span> <span class="n">since</span> <span class="n">these</span> <span class="n">needs</span> <span class="n">to</span> <span class="n">be</span> <span class="n">treated</span> <span class="n">as</span>
</span></span><span class="line"><span class="cl">  <span class="o">//</span> <span class="n">child</span> <span class="n">component</span> <span class="n">listeners</span> <span class="n">instead</span> <span class="n">of</span> <span class="n">DOM</span> <span class="n">listeners</span>
</span></span><span class="line"><span class="cl">  <span class="k">const</span> <span class="n">listeners</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">on</span>
</span></span><span class="line"><span class="cl">  <span class="o">//</span> <span class="n">replace</span> <span class="n">with</span> <span class="n">listeners</span> <span class="n">with</span> <span class="o">.</span><span class="n">native</span> <span class="n">modifier</span>
</span></span><span class="line"><span class="cl">  <span class="o">//</span> <span class="n">so</span> <span class="n">it</span> <span class="n">gets</span> <span class="n">processed</span> <span class="n">during</span> <span class="n">parent</span> <span class="n">component</span> <span class="n">patch</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">  <span class="n">data</span><span class="o">.</span><span class="n">on</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">nativeOn</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">isTrue</span><span class="p">(</span><span class="n">Ctor</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">abstract</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="n">slot</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">slot</span>
</span></span><span class="line"><span class="cl">    <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">slot</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">data</span><span class="o">.</span><span class="n">slot</span> <span class="o">=</span> <span class="n">slot</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl">  <span class="o">//</span> <span class="n">Install</span> <span class="n">component</span> <span class="n">hook</span> <span class="n">function</span><span class="p">,</span> <span class="n">merge</span> <span class="n">the</span> <span class="n">hook</span> <span class="n">function</span> <span class="n">into</span> <span class="n">data</span><span class="o">.</span><span class="n">hook</span>
</span></span><span class="line"><span class="cl">  <span class="n">installComponentHooks</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl">  <span class="o">//</span><span class="n">Instantiate</span> <span class="n">a</span> <span class="n">VNode</span> <span class="ow">and</span> <span class="k">return</span><span class="o">.</span> <span class="n">The</span> <span class="n">VNode</span> <span class="n">of</span> <span class="n">a</span> <span class="n">component</span> <span class="n">doesn</span><span class="s1">&#39;t have children.</span>
</span></span><span class="line"><span class="cl">  <span class="k">const</span> <span class="n">name</span> <span class="o">=</span> <span class="n">Ctor</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">name</span> <span class="o">||</span> <span class="n">tag</span>
</span></span><span class="line"><span class="cl">  <span class="k">const</span> <span class="n">vnode</span> <span class="o">=</span> <span class="n">new</span> <span class="n">VNode</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="err">`</span><span class="n">vue</span><span class="o">-</span><span class="n">component</span><span class="o">-$</span><span class="p">{</span><span class="n">Ctor</span><span class="o">.</span><span class="n">cid</span><span class="p">}</span><span class="o">$</span><span class="p">{</span><span class="n">name</span> <span class="err">?</span> <span class="err">`</span><span class="o">-$</span><span class="p">{</span><span class="n">name</span><span class="p">}</span><span class="err">`</span> <span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">}</span><span class="err">`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">data</span><span class="p">,</span> <span class="n">undefined</span><span class="p">,</span> <span class="n">undefined</span><span class="p">,</span> <span class="n">undefined</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="n">Ctor</span><span class="p">,</span> <span class="n">propsData</span><span class="p">,</span> <span class="n">listeners</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">children</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="n">asyncFactory</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">__WEEX__</span> <span class="o">&amp;&amp;</span> <span class="n">isRecyclableComponent</span><span class="p">(</span><span class="n">vnode</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">renderRecyclableComponentTemplate</span><span class="p">(</span><span class="n">vnode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="err">‚Äã</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="n">vnode</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Let me mention the three key steps in creating VNode through createComponent:</p>
<ul>
<li>
<p>Construct subclass constructor Ctor</p>
</li>
<li>
<p>installComponentHooks installs the component hook function</p>
</li>
<li>
<p>Instantiate vnode</p>
</li>
</ul>
<h3 id="summary">Summary</h3>
<p>The process of createElement creating VNode, each VNode has children, and each element of children is also a VNode. This forms a virtual tree structure, which is used to describe the real DOM tree structure.</p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/javascript/">Javascript</a>
        
            <a href="/tags/vue/">Vue</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Related content</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/p/understanding-definemodel-in-vue3/">
        
        
            <div class="article-image">
                
                    <img src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*XNUMO2PM_SwVgmdGARQtCQ.png" loading="lazy" data-key="" data-hash="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*XNUMO2PM_SwVgmdGARQtCQ.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Understanding defineModel in Vue3</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/understanding-fragment-in-vue3/">
        
        
            <div class="article-image">
                
                    <img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YMMs8s-H6fct1k8DJ1vLRw.png" loading="lazy" data-key="" data-hash="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YMMs8s-H6fct1k8DJ1vLRw.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Understanding Fragment in Vue3</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/understanding-teleport-in-vue3/">
        
        
            <div class="article-image">
                
                    <img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GgMh0JyvKDIrI7ahnm8uiQ.jpeg" loading="lazy" data-key="" data-hash="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GgMh0JyvKDIrI7ahnm8uiQ.jpeg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Understanding Teleport in Vue3</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/understanding-async-components-in-vue3/">
        
        
            <div class="article-image">
                
                    <img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SoXuFiQrG7Mex4MN6hmO3g.jpeg" loading="lazy" data-key="" data-hash="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SoXuFiQrG7Mex4MN6hmO3g.jpeg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Understanding Async Components in Vue3</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/understanding-watch-and-watcheffect-in-vue3/">
        
        
            <div class="article-image">
                
                    <img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v6hSD9YqWXc8J6oR-4kQsQ.png" loading="lazy" data-key="" data-hash="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v6hSD9YqWXc8J6oR-4kQsQ.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Understanding watch and watchEffect in Vue3</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script
    src="https://giscus.app/client.js"
    data-repo="kxming/skstory"
    data-repo-id="R_kgDOLehX4A"
    data-category="Announcements"
    data-category-id="DIC_kwDOLehX4M4Cd4Vx"
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="top"
    data-theme="light"
    data-lang="en"
    crossorigin="anonymous"
    async
></script>
<script>
    function setGiscusTheme(theme) {
        let giscus = document.querySelector("iframe.giscus-frame");
        if (giscus) {
            giscus.contentWindow.postMessage(
                {
                    giscus: {
                        setConfig: {
                            theme: theme,
                        },
                    },
                },
                "https://giscus.app"
            );
        }
    }

    (function () {
        addEventListener("message", (e) => {
            if (event.origin !== "https://giscus.app") return;
            handler();
        });
        window.addEventListener("onColorSchemeChange", handler);

        function handler() {
            if (document.documentElement.dataset.scheme === "light") {
                setGiscusTheme('light');
            } else {
                setGiscusTheme('dark_dimmed');
            }
        }
    })();
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2024 SK Story
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.24.1">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
